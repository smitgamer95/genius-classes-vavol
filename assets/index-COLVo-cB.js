(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function fp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Av={exports:{}},fl={},Pv={exports:{}},Oe={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Lv;function r_(){if(Lv)return Oe;Lv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=x&&F[x]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function M(F,q,le){this.props=F,this.context=q,this.refs=U,this.updater=le||N}M.prototype.isReactComponent={},M.prototype.setState=function(F,q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,q,"setState")},M.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function X(){}X.prototype=M.prototype;function K(F,q,le){this.props=F,this.context=q,this.refs=U,this.updater=le||N}var G=K.prototype=new X;G.constructor=K,V(G,M.prototype),G.isPureReactComponent=!0;var re=Array.isArray,fe=Object.prototype.hasOwnProperty,Q={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(F,q,le){var ye,Ne={},Pe=null,_e=null;if(q!=null)for(ye in q.ref!==void 0&&(_e=q.ref),q.key!==void 0&&(Pe=""+q.key),q)fe.call(q,ye)&&!A.hasOwnProperty(ye)&&(Ne[ye]=q[ye]);var Ve=arguments.length-2;if(Ve===1)Ne.children=le;else if(1<Ve){for(var qe=Array(Ve),ht=0;ht<Ve;ht++)qe[ht]=arguments[ht+2];Ne.children=qe}if(F&&F.defaultProps)for(ye in Ve=F.defaultProps,Ve)Ne[ye]===void 0&&(Ne[ye]=Ve[ye]);return{$$typeof:n,type:F,key:Pe,ref:_e,props:Ne,_owner:Q.current}}function C(F,q){return{$$typeof:n,type:F.type,key:q,ref:F.ref,props:F.props,_owner:F._owner}}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function T(F){var q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(le){return q[le]})}var D=/\/+/g;function I(F,q){return typeof F=="object"&&F!==null&&F.key!=null?T(""+F.key):q.toString(36)}function Le(F,q,le,ye,Ne){var Pe=typeof F;(Pe==="undefined"||Pe==="boolean")&&(F=null);var _e=!1;if(F===null)_e=!0;else switch(Pe){case"string":case"number":_e=!0;break;case"object":switch(F.$$typeof){case n:case e:_e=!0}}if(_e)return _e=F,Ne=Ne(_e),F=ye===""?"."+I(_e,0):ye,re(Ne)?(le="",F!=null&&(le=F.replace(D,"$&/")+"/"),Le(Ne,q,le,"",function(ht){return ht})):Ne!=null&&(P(Ne)&&(Ne=C(Ne,le+(!Ne.key||_e&&_e.key===Ne.key?"":(""+Ne.key).replace(D,"$&/")+"/")+F)),q.push(Ne)),1;if(_e=0,ye=ye===""?".":ye+":",re(F))for(var Ve=0;Ve<F.length;Ve++){Pe=F[Ve];var qe=ye+I(Pe,Ve);_e+=Le(Pe,q,le,qe,Ne)}else if(qe=S(F),typeof qe=="function")for(F=qe.call(F),Ve=0;!(Pe=F.next()).done;)Pe=Pe.value,qe=ye+I(Pe,Ve++),_e+=Le(Pe,q,le,qe,Ne);else if(Pe==="object")throw q=String(F),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return _e}function Z(F,q,le){if(F==null)return F;var ye=[],Ne=0;return Le(F,ye,"","",function(Pe){return q.call(le,Pe,Ne++)}),ye}function Ie(F){if(F._status===-1){var q=F._result;q=q(),q.then(function(le){(F._status===0||F._status===-1)&&(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&&(F._status=2,F._result=le)}),F._status===-1&&(F._status=0,F._result=q)}if(F._status===1)return F._result.default;throw F._result}var me={current:null},ae={transition:null},se={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:ae,ReactCurrentOwner:Q};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Z,forEach:function(F,q,le){Z(F,function(){q.apply(this,arguments)},le)},count:function(F){var q=0;return Z(F,function(){q++}),q},toArray:function(F){return Z(F,function(q){return q})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Oe.Component=M,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=K,Oe.StrictMode=s,Oe.Suspense=f,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Oe.act=oe,Oe.cloneElement=function(F,q,le){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ye=V({},F.props),Ne=F.key,Pe=F.ref,_e=F._owner;if(q!=null){if(q.ref!==void 0&&(Pe=q.ref,_e=Q.current),q.key!==void 0&&(Ne=""+q.key),F.type&&F.type.defaultProps)var Ve=F.type.defaultProps;for(qe in q)fe.call(q,qe)&&!A.hasOwnProperty(qe)&&(ye[qe]=q[qe]===void 0&&Ve!==void 0?Ve[qe]:q[qe])}var qe=arguments.length-2;if(qe===1)ye.children=le;else if(1<qe){Ve=Array(qe);for(var ht=0;ht<qe;ht++)Ve[ht]=arguments[ht+2];ye.children=Ve}return{$$typeof:n,type:F.type,key:Ne,ref:Pe,props:ye,_owner:_e}},Oe.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Oe.createElement=k,Oe.createFactory=function(F){var q=k.bind(null,F);return q.type=F,q},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(F){return{$$typeof:d,render:F}},Oe.isValidElement=P,Oe.lazy=function(F){return{$$typeof:w,_payload:{_status:-1,_result:F},_init:Ie}},Oe.memo=function(F,q){return{$$typeof:y,type:F,compare:q===void 0?null:q}},Oe.startTransition=function(F){var q=ae.transition;ae.transition={};try{F()}finally{ae.transition=q}},Oe.unstable_act=oe,Oe.useCallback=function(F,q){return me.current.useCallback(F,q)},Oe.useContext=function(F){return me.current.useContext(F)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(F){return me.current.useDeferredValue(F)},Oe.useEffect=function(F,q){return me.current.useEffect(F,q)},Oe.useId=function(){return me.current.useId()},Oe.useImperativeHandle=function(F,q,le){return me.current.useImperativeHandle(F,q,le)},Oe.useInsertionEffect=function(F,q){return me.current.useInsertionEffect(F,q)},Oe.useLayoutEffect=function(F,q){return me.current.useLayoutEffect(F,q)},Oe.useMemo=function(F,q){return me.current.useMemo(F,q)},Oe.useReducer=function(F,q,le){return me.current.useReducer(F,q,le)},Oe.useRef=function(F){return me.current.useRef(F)},Oe.useState=function(F){return me.current.useState(F)},Oe.useSyncExternalStore=function(F,q,le){return me.current.useSyncExternalStore(F,q,le)},Oe.useTransition=function(){return me.current.useTransition()},Oe.version="18.3.1",Oe}var Dv;function pp(){return Dv||(Dv=1,Pv.exports=r_()),Pv.exports}/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ov;function s_(){if(Ov)return fl;Ov=1;var n=pp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,y){var w,x={},S=null,N=null;y!==void 0&&(S=""+y),f.key!==void 0&&(S=""+f.key),f.ref!==void 0&&(N=f.ref);for(w in f)s.call(f,w)&&!l.hasOwnProperty(w)&&(x[w]=f[w]);if(d&&d.defaultProps)for(w in f=d.defaultProps,f)x[w]===void 0&&(x[w]=f[w]);return{$$typeof:e,type:d,key:S,ref:N,props:x,_owner:i.current}}return fl.Fragment=t,fl.jsx=u,fl.jsxs=u,fl}var Mv;function a_(){return Mv||(Mv=1,Av.exports=s_()),Av.exports}var m=a_(),j=pp();const ue=fp(j);var bu={},gf={exports:{}},_n={},Fv={exports:{}},Uv={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Vv;function i_(){return Vv||(Vv=1,(function(n){function e(ae,se){var oe=ae.length;ae.push(se);e:for(;0<oe;){var F=oe-1>>>1,q=ae[F];if(0<i(q,se))ae[F]=se,ae[oe]=q,oe=F;else break e}}function t(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var se=ae[0],oe=ae.pop();if(oe!==se){ae[0]=oe;e:for(var F=0,q=ae.length,le=q>>>1;F<le;){var ye=2*(F+1)-1,Ne=ae[ye],Pe=ye+1,_e=ae[Pe];if(0>i(Ne,oe))Pe<q&&0>i(_e,Ne)?(ae[F]=_e,ae[Pe]=oe,F=Pe):(ae[F]=Ne,ae[ye]=oe,F=ye);else if(Pe<q&&0>i(_e,oe))ae[F]=_e,ae[Pe]=oe,F=Pe;else break e}}return se}function i(ae,se){var oe=ae.sortIndex-se.sortIndex;return oe!==0?oe:ae.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],y=[],w=1,x=null,S=3,N=!1,V=!1,U=!1,M=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ae){for(var se=t(y);se!==null;){if(se.callback===null)s(y);else if(se.startTime<=ae)s(y),se.sortIndex=se.expirationTime,e(f,se);else break;se=t(y)}}function re(ae){if(U=!1,G(ae),!V)if(t(f)!==null)V=!0,Ie(fe);else{var se=t(y);se!==null&&me(re,se.startTime-ae)}}function fe(ae,se){V=!1,U&&(U=!1,X(k),k=-1),N=!0;var oe=S;try{for(G(se),x=t(f);x!==null&&(!(x.expirationTime>se)||ae&&!T());){var F=x.callback;if(typeof F=="function"){x.callback=null,S=x.priorityLevel;var q=F(x.expirationTime<=se);se=n.unstable_now(),typeof q=="function"?x.callback=q:x===t(f)&&s(f),G(se)}else s(f);x=t(f)}if(x!==null)var le=!0;else{var ye=t(y);ye!==null&&me(re,ye.startTime-se),le=!1}return le}finally{x=null,S=oe,N=!1}}var Q=!1,A=null,k=-1,C=5,P=-1;function T(){return!(n.unstable_now()-P<C)}function D(){if(A!==null){var ae=n.unstable_now();P=ae;var se=!0;try{se=A(!0,ae)}finally{se?I():(Q=!1,A=null)}}else Q=!1}var I;if(typeof K=="function")I=function(){K(D)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Z=Le.port2;Le.port1.onmessage=D,I=function(){Z.postMessage(null)}}else I=function(){M(D,0)};function Ie(ae){A=ae,Q||(Q=!0,I())}function me(ae,se){k=M(function(){ae(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){V||N||(V=!0,Ie(fe))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(S){case 1:case 2:case 3:var se=3;break;default:se=S}var oe=S;S=se;try{return ae()}finally{S=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,se){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var oe=S;S=ae;try{return se()}finally{S=oe}},n.unstable_scheduleCallback=function(ae,se,oe){var F=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?F+oe:F):oe=F,ae){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=oe+q,ae={id:w++,callback:se,priorityLevel:ae,startTime:oe,expirationTime:q,sortIndex:-1},oe>F?(ae.sortIndex=oe,e(y,ae),t(f)===null&&ae===t(y)&&(U?(X(k),k=-1):U=!0,me(re,oe-F))):(ae.sortIndex=q,e(f,ae),V||N||(V=!0,Ie(fe))),ae},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(ae){var se=S;return function(){var oe=S;S=se;try{return ae.apply(this,arguments)}finally{S=oe}}}})(Uv)),Uv}var zv;function o_(){return zv||(zv=1,Fv.exports=i_()),Fv.exports}/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Bv;function l_(){if(Bv)return _n;Bv=1;var n=pp(),e=o_();function t(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,o=1;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function l(r,a){u(r,a),u(r+"Capture",a)}function u(r,a){for(i[r]=a,r=0;r<a.length;r++)s.add(a[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},x={};function S(r){return f.call(x,r)?!0:f.call(w,r)?!1:y.test(r)?x[r]=!0:(w[r]=!0,!1)}function N(r,a,o,h){if(o!==null&&o.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return h?!1:o!==null?!o.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function V(r,a,o,h){if(a===null||typeof a>"u"||N(r,a,o,h))return!0;if(h)return!1;if(o!==null)switch(o.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function U(r,a,o,h,p,v,_){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=o,this.propertyName=r,this.type=a,this.sanitizeURL=v,this.removeEmptyString=_}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){M[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];M[a]=new U(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){M[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){M[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){M[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){M[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){M[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){M[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){M[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function K(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(X,K);M[a]=new U(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(X,K);M[a]=new U(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(X,K);M[a]=new U(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){M[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),M.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){M[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function G(r,a,o,h){var p=M.hasOwnProperty(a)?M[a]:null;(p!==null?p.type!==0:h||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(V(a,o,p,h)&&(o=null),h||p===null?S(a)&&(o===null?r.removeAttribute(a):r.setAttribute(a,""+o)):p.mustUseProperty?r[p.propertyName]=o===null?p.type===3?!1:"":o:(a=p.attributeName,h=p.attributeNamespace,o===null?r.removeAttribute(a):(p=p.type,o=p===3||p===4&&o===!0?"":""+o,h?r.setAttributeNS(h,a,o):r.setAttribute(a,o))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),Q=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),ae=Symbol.iterator;function se(r){return r===null||typeof r!="object"?null:(r=ae&&r[ae]||r["@@iterator"],typeof r=="function"?r:null)}var oe=Object.assign,F;function q(r){if(F===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+r}var le=!1;function ye(r,a){if(!r||le)return"";le=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch($){var h=$}Reflect.construct(r,[],a)}else{try{a.call()}catch($){h=$}r.call(a.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var p=$.stack.split(`
`),v=h.stack.split(`
`),_=p.length-1,R=v.length-1;1<=_&&0<=R&&p[_]!==v[R];)R--;for(;1<=_&&0<=R;_--,R--)if(p[_]!==v[R]){if(_!==1||R!==1)do if(_--,R--,0>R||p[_]!==v[R]){var L=`
`+p[_].replace(" at new "," at ");return r.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",r.displayName)),L}while(1<=_&&0<=R);break}}}finally{le=!1,Error.prepareStackTrace=o}return(r=r?r.displayName||r.name:"")?q(r):""}function Ne(r){switch(r.tag){case 5:return q(r.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return r=ye(r.type,!1),r;case 11:return r=ye(r.type.render,!1),r;case 1:return r=ye(r.type,!0),r;default:return""}}function Pe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case Q:return"Portal";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case Le:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case T:return(r.displayName||"Context")+".Consumer";case P:return(r._context.displayName||"Context")+".Provider";case D:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Z:return a=r.displayName||null,a!==null?a:Pe(r.type)||"Memo";case Ie:a=r._payload,r=r._init;try{return Pe(r(a))}catch{}}return null}function _e(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(a);case 8:return a===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ve(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ht(r){var a=qe(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),h=""+r[a];if(!r.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,v=o.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(_){h=""+_,v.call(this,_)}}),Object.defineProperty(r,a,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function nn(r){r._valueTracker||(r._valueTracker=ht(r))}function _r(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var o=a.getValue(),h="";return r&&(h=qe(r)?r.checked?"true":"false":r.value),r=h,r!==o?(a.setValue(r),!0):!1}function tr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Wr(r,a){var o=a.checked;return oe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??r._wrapperState.initialChecked})}function _s(r,a){var o=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;o=Ve(a.value!=null?a.value:o),r._wrapperState={initialChecked:h,initialValue:o,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ks(r,a){a=a.checked,a!=null&&G(r,"checked",a,!1)}function Ia(r,a){ks(r,a);var o=Ve(a.value),h=a.type;if(o!=null)h==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+o):r.value!==""+o&&(r.value=""+o);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?Ns(r,a.type,o):a.hasOwnProperty("defaultValue")&&Ns(r,a.type,Ve(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Es(r,a,o){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,o||a===r.value||(r.value=a),r.defaultValue=a}o=r.name,o!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,o!==""&&(r.name=o)}function Ns(r,a,o){(a!=="number"||tr(r.ownerDocument)!==r)&&(o==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+o&&(r.defaultValue=""+o))}var Fn=Array.isArray;function rn(r,a,o,h){if(r=r.options,a){a={};for(var p=0;p<o.length;p++)a["$"+o[p]]=!0;for(o=0;o<r.length;o++)p=a.hasOwnProperty("$"+r[o].value),r[o].selected!==p&&(r[o].selected=p),p&&h&&(r[o].defaultSelected=!0)}else{for(o=""+Ve(o),a=null,p=0;p<r.length;p++){if(r[p].value===o){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function Ss(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function hn(r,a){var o=a.value;if(o==null){if(o=a.children,a=a.defaultValue,o!=null){if(a!=null)throw Error(t(92));if(Fn(o)){if(1<o.length)throw Error(t(93));o=o[0]}a=o}a==null&&(a=""),o=a}r._wrapperState={initialValue:Ve(o)}}function Cs(r,a){var o=Ve(a.value),h=Ve(a.defaultValue);o!=null&&(o=""+o,o!==r.value&&(r.value=o),a.defaultValue==null&&r.defaultValue!==o&&(r.defaultValue=o)),h!=null&&(r.defaultValue=""+h)}function Ra(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function We(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?We(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var nr,ja=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,o,h,p){MSApp.execUnsafeLocalFunction(function(){return r(a,o,h,p)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(nr=nr||document.createElement("div"),nr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=nr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function Tn(r,a){if(a){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=a;return}}r.textContent=a}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kr=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(r){kr.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),Gr[a]=Gr[r]})});function Kr(r,a,o){return a==null||typeof a=="boolean"||a===""?"":o||typeof a!="number"||a===0||Gr.hasOwnProperty(r)&&Gr[r]?(""+a).trim():a+"px"}function Un(r,a){r=r.style;for(var o in a)if(a.hasOwnProperty(o)){var h=o.indexOf("--")===0,p=Kr(o,a[o],h);o==="float"&&(o="cssFloat"),h?r.setProperty(o,p):r[o]=p}}var Ts=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(r,a){if(a){if(Ts[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Aa(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function Yr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xr=null,dn=null,fn=null;function sn(r){if(r=Jo(r)){if(typeof Xr!="function")throw Error(t(280));var a=r.stateNode;a&&(a=Lc(a),Xr(r.stateNode,r.type,a))}}function zn(r){dn?fn?fn.push(r):fn=[r]:dn=r}function Se(){if(dn){var r=dn,a=fn;if(fn=dn=null,sn(r),a)for(r=0;r<a.length;r++)sn(a[r])}}function Me(r,a){return r(a)}function Qe(){}var wt=!1;function Ft(r,a,o){if(wt)return r(a,o);wt=!0;try{return Me(r,a,o)}finally{wt=!1,(dn!==null||fn!==null)&&(Qe(),Se())}}function Ye(r,a){var o=r.stateNode;if(o===null)return null;var h=Lc(o);if(h===null)return null;o=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(t(231,a,typeof o));return o}var pn=!1;if(d)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){pn=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{pn=!1}function Gt(r,a,o,h,p,v,_,R,L){var $=Array.prototype.slice.call(arguments,3);try{a.apply(o,$)}catch(te){this.onError(te)}}var Pa=!1,yi=null,rr=!1,Ao=null,$h={onError:function(r){Pa=!0,yi=r}};function bi(r,a,o,h,p,v,_,R,L){Pa=!1,yi=null,Gt.apply($h,arguments)}function ac(r,a,o,h,p,v,_,R,L){if(bi.apply(this,arguments),Pa){if(Pa){var $=yi;Pa=!1,yi=null}else throw Error(t(198));rr||(rr=!0,Ao=$)}}function sr(r){var a=r,o=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(o=a.return),r=a.return;while(r)}return a.tag===3?o:null}function La(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function ar(r){if(sr(r)!==r)throw Error(t(188))}function ic(r){var a=r.alternate;if(!a){if(a=sr(r),a===null)throw Error(t(188));return a!==r?null:r}for(var o=r,h=a;;){var p=o.return;if(p===null)break;var v=p.alternate;if(v===null){if(h=p.return,h!==null){o=h;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===o)return ar(p),r;if(v===h)return ar(p),a;v=v.sibling}throw Error(t(188))}if(o.return!==h.return)o=p,h=v;else{for(var _=!1,R=p.child;R;){if(R===o){_=!0,o=p,h=v;break}if(R===h){_=!0,h=p,o=v;break}R=R.sibling}if(!_){for(R=v.child;R;){if(R===o){_=!0,o=v,h=p;break}if(R===h){_=!0,h=v,o=p;break}R=R.sibling}if(!_)throw Error(t(189))}}if(o.alternate!==h)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?r:a}function Po(r){return r=ic(r),r!==null?wi(r):null}function wi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=wi(r);if(a!==null)return a;r=r.sibling}return null}var xi=e.unstable_scheduleCallback,Lo=e.unstable_cancelCallback,oc=e.unstable_shouldYield,qh=e.unstable_requestPaint,rt=e.unstable_now,lc=e.unstable_getCurrentPriorityLevel,Da=e.unstable_ImmediatePriority,Is=e.unstable_UserBlockingPriority,Bn=e.unstable_NormalPriority,Do=e.unstable_LowPriority,cc=e.unstable_IdlePriority,Oa=null,In=null;function uc(r){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Oa,r,void 0,(r.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:dc,Oo=Math.log,hc=Math.LN2;function dc(r){return r>>>=0,r===0?32:31-(Oo(r)/hc|0)|0}var _i=64,ki=4194304;function Rs(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ma(r,a){var o=r.pendingLanes;if(o===0)return 0;var h=0,p=r.suspendedLanes,v=r.pingedLanes,_=o&268435455;if(_!==0){var R=_&~p;R!==0?h=Rs(R):(v&=_,v!==0&&(h=Rs(v)))}else _=o&~p,_!==0?h=Rs(_):v!==0&&(h=Rs(v));if(h===0)return 0;if(a!==0&&a!==h&&(a&p)===0&&(p=h&-h,v=a&-a,p>=v||p===16&&(v&4194240)!==0))return a;if((h&4)!==0&&(h|=o&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=h;0<a;)o=31-an(a),p=1<<o,h|=r[o],a&=~p;return h}function Wh(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jr(r,a){for(var o=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,v=r.pendingLanes;0<v;){var _=31-an(v),R=1<<_,L=p[_];L===-1?((R&o)===0||(R&h)!==0)&&(p[_]=Wh(R,a)):L<=a&&(r.expiredLanes|=R),v&=~R}}function Rn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Fa(){var r=_i;return _i<<=1,(_i&4194240)===0&&(_i=64),r}function js(r){for(var a=[],o=0;31>o;o++)a.push(r);return a}function As(r,a,o){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-an(a),r[a]=o}function et(r,a){var o=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<o;){var p=31-an(o),v=1<<p;a[p]=0,h[p]=-1,r[p]=-1,o&=~v}}function Ps(r,a){var o=r.entangledLanes|=a;for(r=r.entanglements;o;){var h=31-an(o),p=1<<h;p&a|r[h]&a&&(r[h]|=a),o&=~p}}var ze=0;function Ls(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var fc,Ei,pc,mc,gc,Mo=!1,Er=[],Ut=null,ir=null,or=null,Ds=new Map,Hn=new Map,Nr=[],Gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vc(r,a){switch(r){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":Ds.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(a.pointerId)}}function mn(r,a,o,h,p,v){return r===null||r.nativeEvent!==v?(r={blockedOn:a,domEventName:o,eventSystemFlags:h,nativeEvent:v,targetContainers:[p]},a!==null&&(a=Jo(a),a!==null&&Ei(a)),r):(r.eventSystemFlags|=h,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function Kh(r,a,o,h,p){switch(a){case"focusin":return Ut=mn(Ut,r,a,o,h,p),!0;case"dragenter":return ir=mn(ir,r,a,o,h,p),!0;case"mouseover":return or=mn(or,r,a,o,h,p),!0;case"pointerover":var v=p.pointerId;return Ds.set(v,mn(Ds.get(v)||null,r,a,o,h,p)),!0;case"gotpointercapture":return v=p.pointerId,Hn.set(v,mn(Hn.get(v)||null,r,a,o,h,p)),!0}return!1}function yc(r){var a=Ha(r.target);if(a!==null){var o=sr(a);if(o!==null){if(a=o.tag,a===13){if(a=La(o),a!==null){r.blockedOn=a,gc(r.priority,function(){pc(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Zr(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var o=Ni(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(o===null){o=r.nativeEvent;var h=new o.constructor(o.type,o);Qr=h,o.target.dispatchEvent(h),Qr=null}else return a=Jo(o),a!==null&&Ei(a),r.blockedOn=o,!1;a.shift()}return!0}function Ua(r,a,o){Zr(r)&&o.delete(a)}function bc(){Mo=!1,Ut!==null&&Zr(Ut)&&(Ut=null),ir!==null&&Zr(ir)&&(ir=null),or!==null&&Zr(or)&&(or=null),Ds.forEach(Ua),Hn.forEach(Ua)}function lr(r,a){r.blockedOn===a&&(r.blockedOn=null,Mo||(Mo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bc)))}function cr(r){function a(p){return lr(p,r)}if(0<Er.length){lr(Er[0],r);for(var o=1;o<Er.length;o++){var h=Er[o];h.blockedOn===r&&(h.blockedOn=null)}}for(Ut!==null&&lr(Ut,r),ir!==null&&lr(ir,r),or!==null&&lr(or,r),Ds.forEach(a),Hn.forEach(a),o=0;o<Nr.length;o++)h=Nr[o],h.blockedOn===r&&(h.blockedOn=null);for(;0<Nr.length&&(o=Nr[0],o.blockedOn===null);)yc(o),o.blockedOn===null&&Nr.shift()}var es=re.ReactCurrentBatchConfig,Os=!0;function ct(r,a,o,h){var p=ze,v=es.transition;es.transition=null;try{ze=1,Fo(r,a,o,h)}finally{ze=p,es.transition=v}}function Qh(r,a,o,h){var p=ze,v=es.transition;es.transition=null;try{ze=4,Fo(r,a,o,h)}finally{ze=p,es.transition=v}}function Fo(r,a,o,h){if(Os){var p=Ni(r,a,o,h);if(p===null)id(r,a,h,Va,o),vc(r,h);else if(Kh(p,r,a,o,h))h.stopPropagation();else if(vc(r,h),a&4&&-1<Gh.indexOf(r)){for(;p!==null;){var v=Jo(p);if(v!==null&&fc(v),v=Ni(r,a,o,h),v===null&&id(r,a,h,Va,o),v===p)break;p=v}p!==null&&h.stopPropagation()}else id(r,a,h,null,o)}}var Va=null;function Ni(r,a,o,h){if(Va=null,r=Yr(h),r=Ha(r),r!==null)if(a=sr(r),a===null)r=null;else if(o=a.tag,o===13){if(r=La(a),r!==null)return r;r=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return Va=r,null}function Uo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lc()){case Da:return 1;case Is:return 4;case Bn:case Do:return 16;case cc:return 536870912;default:return 16}default:return 16}}var jn=null,Si=null,gn=null;function Vo(){if(gn)return gn;var r,a=Si,o=a.length,h,p="value"in jn?jn.value:jn.textContent,v=p.length;for(r=0;r<o&&a[r]===p[r];r++);var _=o-r;for(h=1;h<=_&&a[o-h]===p[v-h];h++);return gn=p.slice(r,1<h?1-h:void 0)}function Ci(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Sr(){return!0}function zo(){return!1}function Vt(r){function a(o,h,p,v,_){this._reactName=o,this._targetInst=p,this.type=h,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Sr:zo,this.isPropagationStopped=zo,this}return oe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),a}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=Vt(ur),Cr=oe({},ur,{view:0,detail:0}),Yh=Vt(Cr),Ii,ts,Ms,za=oe({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ms&&(Ms&&r.type==="mousemove"?(Ii=r.screenX-Ms.screenX,ts=r.screenY-Ms.screenY):ts=Ii=0,Ms=r),Ii)},movementY:function(r){return"movementY"in r?r.movementY:ts}}),Ri=Vt(za),Bo=oe({},za,{dataTransfer:0}),wc=Vt(Bo),ji=oe({},Cr,{relatedTarget:0}),Ai=Vt(ji),xc=oe({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),ns=Vt(xc),_c=oe({},ur,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),kc=Vt(_c),Ec=oe({},ur,{data:0}),Ho=Vt(Ec),Pi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},on={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sc(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Nc[r])?!!a[r]:!1}function Tr(){return Sc}var c=oe({},Cr,{key:function(r){if(r.key){var a=Pi[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ci(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?on[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(r){return r.type==="keypress"?Ci(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ci(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=Vt(c),b=oe({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Vt(b),z=oe({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr}),W=Vt(z),ce=oe({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),tt=Vt(ce),Ct=oe({},za,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ke=Vt(Ct),At=[9,13,27,32],Pt=d&&"CompositionEvent"in window,$n=null;d&&"documentMode"in document&&($n=document.documentMode);var An=d&&"TextEvent"in window&&!$n,Ba=d&&(!Pt||$n&&8<$n&&11>=$n),Li=" ",Nm=!1;function Sm(r,a){switch(r){case"keyup":return At.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Di=!1;function e1(r,a){switch(r){case"compositionend":return Cm(a);case"keypress":return a.which!==32?null:(Nm=!0,Li);case"textInput":return r=a.data,r===Li&&Nm?null:r;default:return null}}function t1(r,a){if(Di)return r==="compositionend"||!Pt&&Sm(r,a)?(r=Vo(),gn=Si=jn=null,Di=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ba&&a.locale!=="ko"?null:a.data;default:return null}}var n1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!n1[r.type]:a==="textarea"}function Im(r,a,o,h){zn(h),a=jc(a,"onChange"),0<a.length&&(o=new Ti("onChange","change",null,o,h),r.push({event:o,listeners:a}))}var $o=null,qo=null;function r1(r){Gm(r,0)}function Cc(r){var a=Vi(r);if(_r(a))return r}function s1(r,a){if(r==="change")return a}var Rm=!1;if(d){var Xh;if(d){var Jh="oninput"in document;if(!Jh){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),Jh=typeof jm.oninput=="function"}Xh=Jh}else Xh=!1;Rm=Xh&&(!document.documentMode||9<document.documentMode)}function Am(){$o&&($o.detachEvent("onpropertychange",Pm),qo=$o=null)}function Pm(r){if(r.propertyName==="value"&&Cc(qo)){var a=[];Im(a,qo,r,Yr(r)),Ft(r1,a)}}function a1(r,a,o){r==="focusin"?(Am(),$o=a,qo=o,$o.attachEvent("onpropertychange",Pm)):r==="focusout"&&Am()}function i1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Cc(qo)}function o1(r,a){if(r==="click")return Cc(a)}function l1(r,a){if(r==="input"||r==="change")return Cc(a)}function c1(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var hr=typeof Object.is=="function"?Object.is:c1;function Wo(r,a){if(hr(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var o=Object.keys(r),h=Object.keys(a);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var p=o[h];if(!f.call(a,p)||!hr(r[p],a[p]))return!1}return!0}function Lm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Dm(r,a){var o=Lm(r);r=0;for(var h;o;){if(o.nodeType===3){if(h=r+o.textContent.length,r<=a&&h>=a)return{node:o,offset:a-r};r=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Lm(o)}}function Om(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Om(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Mm(){for(var r=window,a=tr();a instanceof r.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)r=a.contentWindow;else break;a=tr(r.document)}return a}function Zh(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function u1(r){var a=Mm(),o=r.focusedElem,h=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&Om(o.ownerDocument.documentElement,o)){if(h!==null&&Zh(o)){if(a=h.start,r=h.end,r===void 0&&(r=a),"selectionStart"in o)o.selectionStart=a,o.selectionEnd=Math.min(r,o.value.length);else if(r=(a=o.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var p=o.textContent.length,v=Math.min(h.start,p);h=h.end===void 0?v:Math.min(h.end,p),!r.extend&&v>h&&(p=h,h=v,v=p),p=Dm(o,v);var _=Dm(o,h);p&&_&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==_.node||r.focusOffset!==_.offset)&&(a=a.createRange(),a.setStart(p.node,p.offset),r.removeAllRanges(),v>h?(r.addRange(a),r.extend(_.node,_.offset)):(a.setEnd(_.node,_.offset),r.addRange(a)))}}for(a=[],r=o;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<a.length;o++)r=a[o],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var h1=d&&"documentMode"in document&&11>=document.documentMode,Oi=null,ed=null,Go=null,td=!1;function Fm(r,a,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;td||Oi==null||Oi!==tr(h)||(h=Oi,"selectionStart"in h&&Zh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Go&&Wo(Go,h)||(Go=h,h=jc(ed,"onSelect"),0<h.length&&(a=new Ti("onSelect","select",null,a,o),r.push({event:a,listeners:h}),a.target=Oi)))}function Tc(r,a){var o={};return o[r.toLowerCase()]=a.toLowerCase(),o["Webkit"+r]="webkit"+a,o["Moz"+r]="moz"+a,o}var Mi={animationend:Tc("Animation","AnimationEnd"),animationiteration:Tc("Animation","AnimationIteration"),animationstart:Tc("Animation","AnimationStart"),transitionend:Tc("Transition","TransitionEnd")},nd={},Um={};d&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Ic(r){if(nd[r])return nd[r];if(!Mi[r])return r;var a=Mi[r],o;for(o in a)if(a.hasOwnProperty(o)&&o in Um)return nd[r]=a[o];return r}var Vm=Ic("animationend"),zm=Ic("animationiteration"),Bm=Ic("animationstart"),Hm=Ic("transitionend"),$m=new Map,qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(r,a){$m.set(r,a),l(a,[r])}for(var rd=0;rd<qm.length;rd++){var sd=qm[rd],d1=sd.toLowerCase(),f1=sd[0].toUpperCase()+sd.slice(1);Fs(d1,"on"+f1)}Fs(Vm,"onAnimationEnd"),Fs(zm,"onAnimationIteration"),Fs(Bm,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(Hm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function Wm(r,a,o){var h=r.type||"unknown-event";r.currentTarget=o,ac(h,a,void 0,r),r.currentTarget=null}function Gm(r,a){a=(a&4)!==0;for(var o=0;o<r.length;o++){var h=r[o],p=h.event;h=h.listeners;e:{var v=void 0;if(a)for(var _=h.length-1;0<=_;_--){var R=h[_],L=R.instance,$=R.currentTarget;if(R=R.listener,L!==v&&p.isPropagationStopped())break e;Wm(p,R,$),v=L}else for(_=0;_<h.length;_++){if(R=h[_],L=R.instance,$=R.currentTarget,R=R.listener,L!==v&&p.isPropagationStopped())break e;Wm(p,R,$),v=L}}}if(rr)throw r=Ao,rr=!1,Ao=null,r}function it(r,a){var o=a[dd];o===void 0&&(o=a[dd]=new Set);var h=r+"__bubble";o.has(h)||(Km(a,r,2,!1),o.add(h))}function ad(r,a,o){var h=0;a&&(h|=4),Km(o,r,h,a)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Qo(r){if(!r[Rc]){r[Rc]=!0,s.forEach(function(o){o!=="selectionchange"&&(p1.has(o)||ad(o,!1,r),ad(o,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Rc]||(a[Rc]=!0,ad("selectionchange",!1,a))}}function Km(r,a,o,h){switch(Uo(a)){case 1:var p=ct;break;case 4:p=Qh;break;default:p=Fo}o=p.bind(null,a,o,r),p=void 0,!pn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(a,o,{capture:!0,passive:p}):r.addEventListener(a,o,!0):p!==void 0?r.addEventListener(a,o,{passive:p}):r.addEventListener(a,o,!1)}function id(r,a,o,h,p){var v=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var R=h.stateNode.containerInfo;if(R===p||R.nodeType===8&&R.parentNode===p)break;if(_===4)for(_=h.return;_!==null;){var L=_.tag;if((L===3||L===4)&&(L=_.stateNode.containerInfo,L===p||L.nodeType===8&&L.parentNode===p))return;_=_.return}for(;R!==null;){if(_=Ha(R),_===null)return;if(L=_.tag,L===5||L===6){h=v=_;continue e}R=R.parentNode}}h=h.return}Ft(function(){var $=v,te=Yr(o),ne=[];e:{var ee=$m.get(r);if(ee!==void 0){var de=Ti,ve=r;switch(r){case"keypress":if(Ci(o)===0)break e;case"keydown":case"keyup":de=g;break;case"focusin":ve="focus",de=Ai;break;case"focusout":ve="blur",de=Ai;break;case"beforeblur":case"afterblur":de=Ai;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=W;break;case Vm:case zm:case Bm:de=ns;break;case Hm:de=tt;break;case"scroll":de=Yh;break;case"wheel":de=Ke;break;case"copy":case"cut":case"paste":de=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=E}var be=(a&4)!==0,xt=!be&&r==="scroll",B=be?ee!==null?ee+"Capture":null:ee;be=[];for(var O=$,H;O!==null;){H=O;var ie=H.stateNode;if(H.tag===5&&ie!==null&&(H=ie,B!==null&&(ie=Ye(O,B),ie!=null&&be.push(Yo(O,ie,H)))),xt)break;O=O.return}0<be.length&&(ee=new de(ee,ve,null,o,te),ne.push({event:ee,listeners:be}))}}if((a&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",de=r==="mouseout"||r==="pointerout",ee&&o!==Qr&&(ve=o.relatedTarget||o.fromElement)&&(Ha(ve)||ve[rs]))break e;if((de||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,de?(ve=o.relatedTarget||o.toElement,de=$,ve=ve?Ha(ve):null,ve!==null&&(xt=sr(ve),ve!==xt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(de=null,ve=$),de!==ve)){if(be=Ri,ie="onMouseLeave",B="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(be=E,ie="onPointerLeave",B="onPointerEnter",O="pointer"),xt=de==null?ee:Vi(de),H=ve==null?ee:Vi(ve),ee=new be(ie,O+"leave",de,o,te),ee.target=xt,ee.relatedTarget=H,ie=null,Ha(te)===$&&(be=new be(B,O+"enter",ve,o,te),be.target=H,be.relatedTarget=xt,ie=be),xt=ie,de&&ve)t:{for(be=de,B=ve,O=0,H=be;H;H=Fi(H))O++;for(H=0,ie=B;ie;ie=Fi(ie))H++;for(;0<O-H;)be=Fi(be),O--;for(;0<H-O;)B=Fi(B),H--;for(;O--;){if(be===B||B!==null&&be===B.alternate)break t;be=Fi(be),B=Fi(B)}be=null}else be=null;de!==null&&Qm(ne,ee,de,be,!1),ve!==null&&xt!==null&&Qm(ne,xt,ve,be,!0)}}e:{if(ee=$?Vi($):window,de=ee.nodeName&&ee.nodeName.toLowerCase(),de==="select"||de==="input"&&ee.type==="file")var we=s1;else if(Tm(ee))if(Rm)we=l1;else{we=i1;var ke=a1}else(de=ee.nodeName)&&de.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(we=o1);if(we&&(we=we(r,$))){Im(ne,we,o,te);break e}ke&&ke(r,ee,$),r==="focusout"&&(ke=ee._wrapperState)&&ke.controlled&&ee.type==="number"&&Ns(ee,"number",ee.value)}switch(ke=$?Vi($):window,r){case"focusin":(Tm(ke)||ke.contentEditable==="true")&&(Oi=ke,ed=$,Go=null);break;case"focusout":Go=ed=Oi=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,Fm(ne,o,te);break;case"selectionchange":if(h1)break;case"keydown":case"keyup":Fm(ne,o,te)}var Ee;if(Pt)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Di?Sm(r,o)&&(Re="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(Ba&&o.locale!=="ko"&&(Di||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Di&&(Ee=Vo()):(jn=te,Si="value"in jn?jn.value:jn.textContent,Di=!0)),ke=jc($,Re),0<ke.length&&(Re=new Ho(Re,r,null,o,te),ne.push({event:Re,listeners:ke}),Ee?Re.data=Ee:(Ee=Cm(o),Ee!==null&&(Re.data=Ee)))),(Ee=An?e1(r,o):t1(r,o))&&($=jc($,"onBeforeInput"),0<$.length&&(te=new Ho("onBeforeInput","beforeinput",null,o,te),ne.push({event:te,listeners:$}),te.data=Ee))}Gm(ne,a)})}function Yo(r,a,o){return{instance:r,listener:a,currentTarget:o}}function jc(r,a){for(var o=a+"Capture",h=[];r!==null;){var p=r,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=Ye(r,o),v!=null&&h.unshift(Yo(r,v,p)),v=Ye(r,a),v!=null&&h.push(Yo(r,v,p))),r=r.return}return h}function Fi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Qm(r,a,o,h,p){for(var v=a._reactName,_=[];o!==null&&o!==h;){var R=o,L=R.alternate,$=R.stateNode;if(L!==null&&L===h)break;R.tag===5&&$!==null&&(R=$,p?(L=Ye(o,v),L!=null&&_.unshift(Yo(o,L,R))):p||(L=Ye(o,v),L!=null&&_.push(Yo(o,L,R)))),o=o.return}_.length!==0&&r.push({event:a,listeners:_})}var m1=/\r\n?/g,g1=/\u0000|\uFFFD/g;function Ym(r){return(typeof r=="string"?r:""+r).replace(m1,`
`).replace(g1,"")}function Ac(r,a,o){if(a=Ym(a),Ym(r)!==a&&o)throw Error(t(425))}function Pc(){}var od=null,ld=null;function cd(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,v1=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,y1=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(r){return Xm.resolve(null).then(r).catch(b1)}:ud;function b1(r){setTimeout(function(){throw r})}function hd(r,a){var o=a,h=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(h===0){r.removeChild(p),cr(a);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=p}while(o);cr(a)}function Us(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function Jm(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return r;a--}else o==="/$"&&a++}r=r.previousSibling}return null}var Ui=Math.random().toString(36).slice(2),Ir="__reactFiber$"+Ui,Xo="__reactProps$"+Ui,rs="__reactContainer$"+Ui,dd="__reactEvents$"+Ui,w1="__reactListeners$"+Ui,x1="__reactHandles$"+Ui;function Ha(r){var a=r[Ir];if(a)return a;for(var o=r.parentNode;o;){if(a=o[rs]||o[Ir]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(r=Jm(r);r!==null;){if(o=r[Ir])return o;r=Jm(r)}return a}r=o,o=r.parentNode}return null}function Jo(r){return r=r[Ir]||r[rs],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Vi(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Lc(r){return r[Xo]||null}var fd=[],zi=-1;function Vs(r){return{current:r}}function ot(r){0>zi||(r.current=fd[zi],fd[zi]=null,zi--)}function st(r,a){zi++,fd[zi]=r.current,r.current=a}var zs={},Kt=Vs(zs),vn=Vs(!1),$a=zs;function Bi(r,a){var o=r.type.contextTypes;if(!o)return zs;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in o)p[v]=a[v];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=p),p}function yn(r){return r=r.childContextTypes,r!=null}function Dc(){ot(vn),ot(Kt)}function Zm(r,a,o){if(Kt.current!==zs)throw Error(t(168));st(Kt,a),st(vn,o)}function eg(r,a,o){var h=r.stateNode;if(a=a.childContextTypes,typeof h.getChildContext!="function")return o;h=h.getChildContext();for(var p in h)if(!(p in a))throw Error(t(108,_e(r)||"Unknown",p));return oe({},o,h)}function Oc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||zs,$a=Kt.current,st(Kt,r),st(vn,vn.current),!0}function tg(r,a,o){var h=r.stateNode;if(!h)throw Error(t(169));o?(r=eg(r,a,$a),h.__reactInternalMemoizedMergedChildContext=r,ot(vn),ot(Kt),st(Kt,r)):ot(vn),st(vn,o)}var ss=null,Mc=!1,pd=!1;function ng(r){ss===null?ss=[r]:ss.push(r)}function _1(r){Mc=!0,ng(r)}function Bs(){if(!pd&&ss!==null){pd=!0;var r=0,a=ze;try{var o=ss;for(ze=1;r<o.length;r++){var h=o[r];do h=h(!0);while(h!==null)}ss=null,Mc=!1}catch(p){throw ss!==null&&(ss=ss.slice(r+1)),xi(Da,Bs),p}finally{ze=a,pd=!1}}return null}var Hi=[],$i=0,Fc=null,Uc=0,qn=[],Wn=0,qa=null,as=1,is="";function Wa(r,a){Hi[$i++]=Uc,Hi[$i++]=Fc,Fc=r,Uc=a}function rg(r,a,o){qn[Wn++]=as,qn[Wn++]=is,qn[Wn++]=qa,qa=r;var h=as;r=is;var p=32-an(h)-1;h&=~(1<<p),o+=1;var v=32-an(a)+p;if(30<v){var _=p-p%5;v=(h&(1<<_)-1).toString(32),h>>=_,p-=_,as=1<<32-an(a)+p|o<<p|h,is=v+r}else as=1<<v|o<<p|h,is=r}function md(r){r.return!==null&&(Wa(r,1),rg(r,1,0))}function gd(r){for(;r===Fc;)Fc=Hi[--$i],Hi[$i]=null,Uc=Hi[--$i],Hi[$i]=null;for(;r===qa;)qa=qn[--Wn],qn[Wn]=null,is=qn[--Wn],qn[Wn]=null,as=qn[--Wn],qn[Wn]=null}var Pn=null,Ln=null,ut=!1,dr=null;function sg(r,a){var o=Yn(5,null,null,0);o.elementType="DELETED",o.stateNode=a,o.return=r,a=r.deletions,a===null?(r.deletions=[o],r.flags|=16):a.push(o)}function ag(r,a){switch(r.tag){case 5:var o=r.type;return a=a.nodeType!==1||o.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,Pn=r,Ln=Us(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,Pn=r,Ln=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(o=qa!==null?{id:as,overflow:is}:null,r.memoizedState={dehydrated:a,treeContext:o,retryLane:1073741824},o=Yn(18,null,null,0),o.stateNode=a,o.return=r,r.child=o,Pn=r,Ln=null,!0):!1;default:return!1}}function vd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function yd(r){if(ut){var a=Ln;if(a){var o=a;if(!ag(r,a)){if(vd(r))throw Error(t(418));a=Us(o.nextSibling);var h=Pn;a&&ag(r,a)?sg(h,o):(r.flags=r.flags&-4097|2,ut=!1,Pn=r)}}else{if(vd(r))throw Error(t(418));r.flags=r.flags&-4097|2,ut=!1,Pn=r}}}function ig(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Pn=r}function Vc(r){if(r!==Pn)return!1;if(!ut)return ig(r),ut=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!cd(r.type,r.memoizedProps)),a&&(a=Ln)){if(vd(r))throw og(),Error(t(418));for(;a;)sg(r,a),a=Us(a.nextSibling)}if(ig(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"){if(a===0){Ln=Us(r.nextSibling);break e}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++}r=r.nextSibling}Ln=null}}else Ln=Pn?Us(r.stateNode.nextSibling):null;return!0}function og(){for(var r=Ln;r;)r=Us(r.nextSibling)}function qi(){Ln=Pn=null,ut=!1}function bd(r){dr===null?dr=[r]:dr.push(r)}var k1=re.ReactCurrentBatchConfig;function Zo(r,a,o){if(r=o.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var h=o.stateNode}if(!h)throw Error(t(147,r));var p=h,v=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(_){var R=p.refs;_===null?delete R[v]:R[v]=_},a._stringRef=v,a)}if(typeof r!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,r))}return r}function zc(r,a){throw r=Object.prototype.toString.call(a),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function lg(r){var a=r._init;return a(r._payload)}function cg(r){function a(B,O){if(r){var H=B.deletions;H===null?(B.deletions=[O],B.flags|=16):H.push(O)}}function o(B,O){if(!r)return null;for(;O!==null;)a(B,O),O=O.sibling;return null}function h(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function p(B,O){return B=Ys(B,O),B.index=0,B.sibling=null,B}function v(B,O,H){return B.index=H,r?(H=B.alternate,H!==null?(H=H.index,H<O?(B.flags|=2,O):H):(B.flags|=2,O)):(B.flags|=1048576,O)}function _(B){return r&&B.alternate===null&&(B.flags|=2),B}function R(B,O,H,ie){return O===null||O.tag!==6?(O=uf(H,B.mode,ie),O.return=B,O):(O=p(O,H),O.return=B,O)}function L(B,O,H,ie){var we=H.type;return we===A?te(B,O,H.props.children,ie,H.key):O!==null&&(O.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Ie&&lg(we)===O.type)?(ie=p(O,H.props),ie.ref=Zo(B,O,H),ie.return=B,ie):(ie=hu(H.type,H.key,H.props,null,B.mode,ie),ie.ref=Zo(B,O,H),ie.return=B,ie)}function $(B,O,H,ie){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=hf(H,B.mode,ie),O.return=B,O):(O=p(O,H.children||[]),O.return=B,O)}function te(B,O,H,ie,we){return O===null||O.tag!==7?(O=ei(H,B.mode,ie,we),O.return=B,O):(O=p(O,H),O.return=B,O)}function ne(B,O,H){if(typeof O=="string"&&O!==""||typeof O=="number")return O=uf(""+O,B.mode,H),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case fe:return H=hu(O.type,O.key,O.props,null,B.mode,H),H.ref=Zo(B,null,O),H.return=B,H;case Q:return O=hf(O,B.mode,H),O.return=B,O;case Ie:var ie=O._init;return ne(B,ie(O._payload),H)}if(Fn(O)||se(O))return O=ei(O,B.mode,H,null),O.return=B,O;zc(B,O)}return null}function ee(B,O,H,ie){var we=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return we!==null?null:R(B,O,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case fe:return H.key===we?L(B,O,H,ie):null;case Q:return H.key===we?$(B,O,H,ie):null;case Ie:return we=H._init,ee(B,O,we(H._payload),ie)}if(Fn(H)||se(H))return we!==null?null:te(B,O,H,ie,null);zc(B,H)}return null}function de(B,O,H,ie,we){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return B=B.get(H)||null,R(O,B,""+ie,we);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case fe:return B=B.get(ie.key===null?H:ie.key)||null,L(O,B,ie,we);case Q:return B=B.get(ie.key===null?H:ie.key)||null,$(O,B,ie,we);case Ie:var ke=ie._init;return de(B,O,H,ke(ie._payload),we)}if(Fn(ie)||se(ie))return B=B.get(H)||null,te(O,B,ie,we,null);zc(O,ie)}return null}function ve(B,O,H,ie){for(var we=null,ke=null,Ee=O,Re=O=0,Ot=null;Ee!==null&&Re<H.length;Re++){Ee.index>Re?(Ot=Ee,Ee=null):Ot=Ee.sibling;var Ge=ee(B,Ee,H[Re],ie);if(Ge===null){Ee===null&&(Ee=Ot);break}r&&Ee&&Ge.alternate===null&&a(B,Ee),O=v(Ge,O,Re),ke===null?we=Ge:ke.sibling=Ge,ke=Ge,Ee=Ot}if(Re===H.length)return o(B,Ee),ut&&Wa(B,Re),we;if(Ee===null){for(;Re<H.length;Re++)Ee=ne(B,H[Re],ie),Ee!==null&&(O=v(Ee,O,Re),ke===null?we=Ee:ke.sibling=Ee,ke=Ee);return ut&&Wa(B,Re),we}for(Ee=h(B,Ee);Re<H.length;Re++)Ot=de(Ee,B,Re,H[Re],ie),Ot!==null&&(r&&Ot.alternate!==null&&Ee.delete(Ot.key===null?Re:Ot.key),O=v(Ot,O,Re),ke===null?we=Ot:ke.sibling=Ot,ke=Ot);return r&&Ee.forEach(function(Xs){return a(B,Xs)}),ut&&Wa(B,Re),we}function be(B,O,H,ie){var we=se(H);if(typeof we!="function")throw Error(t(150));if(H=we.call(H),H==null)throw Error(t(151));for(var ke=we=null,Ee=O,Re=O=0,Ot=null,Ge=H.next();Ee!==null&&!Ge.done;Re++,Ge=H.next()){Ee.index>Re?(Ot=Ee,Ee=null):Ot=Ee.sibling;var Xs=ee(B,Ee,Ge.value,ie);if(Xs===null){Ee===null&&(Ee=Ot);break}r&&Ee&&Xs.alternate===null&&a(B,Ee),O=v(Xs,O,Re),ke===null?we=Xs:ke.sibling=Xs,ke=Xs,Ee=Ot}if(Ge.done)return o(B,Ee),ut&&Wa(B,Re),we;if(Ee===null){for(;!Ge.done;Re++,Ge=H.next())Ge=ne(B,Ge.value,ie),Ge!==null&&(O=v(Ge,O,Re),ke===null?we=Ge:ke.sibling=Ge,ke=Ge);return ut&&Wa(B,Re),we}for(Ee=h(B,Ee);!Ge.done;Re++,Ge=H.next())Ge=de(Ee,B,Re,Ge.value,ie),Ge!==null&&(r&&Ge.alternate!==null&&Ee.delete(Ge.key===null?Re:Ge.key),O=v(Ge,O,Re),ke===null?we=Ge:ke.sibling=Ge,ke=Ge);return r&&Ee.forEach(function(n_){return a(B,n_)}),ut&&Wa(B,Re),we}function xt(B,O,H,ie){if(typeof H=="object"&&H!==null&&H.type===A&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case fe:e:{for(var we=H.key,ke=O;ke!==null;){if(ke.key===we){if(we=H.type,we===A){if(ke.tag===7){o(B,ke.sibling),O=p(ke,H.props.children),O.return=B,B=O;break e}}else if(ke.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Ie&&lg(we)===ke.type){o(B,ke.sibling),O=p(ke,H.props),O.ref=Zo(B,ke,H),O.return=B,B=O;break e}o(B,ke);break}else a(B,ke);ke=ke.sibling}H.type===A?(O=ei(H.props.children,B.mode,ie,H.key),O.return=B,B=O):(ie=hu(H.type,H.key,H.props,null,B.mode,ie),ie.ref=Zo(B,O,H),ie.return=B,B=ie)}return _(B);case Q:e:{for(ke=H.key;O!==null;){if(O.key===ke)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){o(B,O.sibling),O=p(O,H.children||[]),O.return=B,B=O;break e}else{o(B,O);break}else a(B,O);O=O.sibling}O=hf(H,B.mode,ie),O.return=B,B=O}return _(B);case Ie:return ke=H._init,xt(B,O,ke(H._payload),ie)}if(Fn(H))return ve(B,O,H,ie);if(se(H))return be(B,O,H,ie);zc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,O!==null&&O.tag===6?(o(B,O.sibling),O=p(O,H),O.return=B,B=O):(o(B,O),O=uf(H,B.mode,ie),O.return=B,B=O),_(B)):o(B,O)}return xt}var Wi=cg(!0),ug=cg(!1),Bc=Vs(null),Hc=null,Gi=null,wd=null;function xd(){wd=Gi=Hc=null}function _d(r){var a=Bc.current;ot(Bc),r._currentValue=a}function kd(r,a,o){for(;r!==null;){var h=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),r===o)break;r=r.return}}function Ki(r,a){Hc=r,wd=Gi=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(bn=!0),r.firstContext=null)}function Gn(r){var a=r._currentValue;if(wd!==r)if(r={context:r,memoizedValue:a,next:null},Gi===null){if(Hc===null)throw Error(t(308));Gi=r,Hc.dependencies={lanes:0,firstContext:r}}else Gi=Gi.next=r;return a}var Ga=null;function Ed(r){Ga===null?Ga=[r]:Ga.push(r)}function hg(r,a,o,h){var p=a.interleaved;return p===null?(o.next=o,Ed(a)):(o.next=p.next,p.next=o),a.interleaved=o,os(r,h)}function os(r,a){r.lanes|=a;var o=r.alternate;for(o!==null&&(o.lanes|=a),o=r,r=r.return;r!==null;)r.childLanes|=a,o=r.alternate,o!==null&&(o.childLanes|=a),o=r,r=r.return;return o.tag===3?o.stateNode:null}var Hs=!1;function Nd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ls(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function $s(r,a,o){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,($e&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,os(r,o)}return p=h.interleaved,p===null?(a.next=a,Ed(h)):(a.next=p.next,p.next=a),h.interleaved=a,os(r,o)}function $c(r,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194240)!==0)){var h=a.lanes;h&=r.pendingLanes,o|=h,a.lanes=o,Ps(r,o)}}function fg(r,a){var o=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var p=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};v===null?p=v=_:v=v.next=_,o=o.next}while(o!==null);v===null?p=v=a:v=v.next=a}else p=v=a;o={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:h.shared,effects:h.effects},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=a:r.next=a,o.lastBaseUpdate=a}function qc(r,a,o,h){var p=r.updateQueue;Hs=!1;var v=p.firstBaseUpdate,_=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var L=R,$=L.next;L.next=null,_===null?v=$:_.next=$,_=L;var te=r.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==_&&(R===null?te.firstBaseUpdate=$:R.next=$,te.lastBaseUpdate=L))}if(v!==null){var ne=p.baseState;_=0,te=$=L=null,R=v;do{var ee=R.lane,de=R.eventTime;if((h&ee)===ee){te!==null&&(te=te.next={eventTime:de,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ve=r,be=R;switch(ee=a,de=o,be.tag){case 1:if(ve=be.payload,typeof ve=="function"){ne=ve.call(de,ne,ee);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=be.payload,ee=typeof ve=="function"?ve.call(de,ne,ee):ve,ee==null)break e;ne=oe({},ne,ee);break e;case 2:Hs=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,ee=p.effects,ee===null?p.effects=[R]:ee.push(R))}else de={eventTime:de,lane:ee,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?($=te=de,L=ne):te=te.next=de,_|=ee;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;ee=R,R=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);if(te===null&&(L=ne),p.baseState=L,p.firstBaseUpdate=$,p.lastBaseUpdate=te,a=p.shared.interleaved,a!==null){p=a;do _|=p.lane,p=p.next;while(p!==a)}else v===null&&(p.shared.lanes=0);Ya|=_,r.lanes=_,r.memoizedState=ne}}function pg(r,a,o){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var h=r[a],p=h.callback;if(p!==null){if(h.callback=null,h=o,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var el={},Rr=Vs(el),tl=Vs(el),nl=Vs(el);function Ka(r){if(r===el)throw Error(t(174));return r}function Sd(r,a){switch(st(nl,a),st(tl,r),st(Rr,el),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:nt(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=nt(a,r)}ot(Rr),st(Rr,a)}function Qi(){ot(Rr),ot(tl),ot(nl)}function mg(r){Ka(nl.current);var a=Ka(Rr.current),o=nt(a,r.type);a!==o&&(st(tl,r),st(Rr,o))}function Cd(r){tl.current===r&&(ot(Rr),ot(tl))}var ft=Vs(0);function Wc(r){for(var a=r;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Td=[];function Id(){for(var r=0;r<Td.length;r++)Td[r]._workInProgressVersionPrimary=null;Td.length=0}var Gc=re.ReactCurrentDispatcher,Rd=re.ReactCurrentBatchConfig,Qa=0,pt=null,Tt=null,Lt=null,Kc=!1,rl=!1,sl=0,E1=0;function Qt(){throw Error(t(321))}function jd(r,a){if(a===null)return!1;for(var o=0;o<a.length&&o<r.length;o++)if(!hr(r[o],a[o]))return!1;return!0}function Ad(r,a,o,h,p,v){if(Qa=v,pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Gc.current=r===null||r.memoizedState===null?T1:I1,r=o(h,p),rl){v=0;do{if(rl=!1,sl=0,25<=v)throw Error(t(301));v+=1,Lt=Tt=null,a.updateQueue=null,Gc.current=R1,r=o(h,p)}while(rl)}if(Gc.current=Xc,a=Tt!==null&&Tt.next!==null,Qa=0,Lt=Tt=pt=null,Kc=!1,a)throw Error(t(300));return r}function Pd(){var r=sl!==0;return sl=0,r}function jr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?pt.memoizedState=Lt=r:Lt=Lt.next=r,Lt}function Kn(){if(Tt===null){var r=pt.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var a=Lt===null?pt.memoizedState:Lt.next;if(a!==null)Lt=a,Tt=r;else{if(r===null)throw Error(t(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Lt===null?pt.memoizedState=Lt=r:Lt=Lt.next=r}return Lt}function al(r,a){return typeof a=="function"?a(r):a}function Ld(r){var a=Kn(),o=a.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=r;var h=Tt,p=h.baseQueue,v=o.pending;if(v!==null){if(p!==null){var _=p.next;p.next=v.next,v.next=_}h.baseQueue=p=v,o.pending=null}if(p!==null){v=p.next,h=h.baseState;var R=_=null,L=null,$=v;do{var te=$.lane;if((Qa&te)===te)L!==null&&(L=L.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var ne={lane:te,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};L===null?(R=L=ne,_=h):L=L.next=ne,pt.lanes|=te,Ya|=te}$=$.next}while($!==null&&$!==v);L===null?_=h:L.next=R,hr(h,a.memoizedState)||(bn=!0),a.memoizedState=h,a.baseState=_,a.baseQueue=L,o.lastRenderedState=h}if(r=o.interleaved,r!==null){p=r;do v=p.lane,pt.lanes|=v,Ya|=v,p=p.next;while(p!==r)}else p===null&&(o.lanes=0);return[a.memoizedState,o.dispatch]}function Dd(r){var a=Kn(),o=a.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=r;var h=o.dispatch,p=o.pending,v=a.memoizedState;if(p!==null){o.pending=null;var _=p=p.next;do v=r(v,_.action),_=_.next;while(_!==p);hr(v,a.memoizedState)||(bn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),o.lastRenderedState=v}return[v,h]}function gg(){}function vg(r,a){var o=pt,h=Kn(),p=a(),v=!hr(h.memoizedState,p);if(v&&(h.memoizedState=p,bn=!0),h=h.queue,Od(wg.bind(null,o,h,r),[r]),h.getSnapshot!==a||v||Lt!==null&&Lt.memoizedState.tag&1){if(o.flags|=2048,il(9,bg.bind(null,o,h,p,a),void 0,null),Dt===null)throw Error(t(349));(Qa&30)!==0||yg(o,a,p)}return p}function yg(r,a,o){r.flags|=16384,r={getSnapshot:a,value:o},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.stores=[r]):(o=a.stores,o===null?a.stores=[r]:o.push(r))}function bg(r,a,o,h){a.value=o,a.getSnapshot=h,xg(a)&&_g(r)}function wg(r,a,o){return o(function(){xg(a)&&_g(r)})}function xg(r){var a=r.getSnapshot;r=r.value;try{var o=a();return!hr(r,o)}catch{return!0}}function _g(r){var a=os(r,1);a!==null&&gr(a,r,1,-1)}function kg(r){var a=jr();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:r},a.queue=r,r=r.dispatch=C1.bind(null,pt,r),[a.memoizedState,r]}function il(r,a,o,h){return r={tag:r,create:a,destroy:o,deps:h,next:null},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.lastEffect=r.next=r):(o=a.lastEffect,o===null?a.lastEffect=r.next=r:(h=o.next,o.next=r,r.next=h,a.lastEffect=r)),r}function Eg(){return Kn().memoizedState}function Qc(r,a,o,h){var p=jr();pt.flags|=r,p.memoizedState=il(1|a,o,void 0,h===void 0?null:h)}function Yc(r,a,o,h){var p=Kn();h=h===void 0?null:h;var v=void 0;if(Tt!==null){var _=Tt.memoizedState;if(v=_.destroy,h!==null&&jd(h,_.deps)){p.memoizedState=il(a,o,v,h);return}}pt.flags|=r,p.memoizedState=il(1|a,o,v,h)}function Ng(r,a){return Qc(8390656,8,r,a)}function Od(r,a){return Yc(2048,8,r,a)}function Sg(r,a){return Yc(4,2,r,a)}function Cg(r,a){return Yc(4,4,r,a)}function Tg(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Ig(r,a,o){return o=o!=null?o.concat([r]):null,Yc(4,4,Tg.bind(null,a,r),o)}function Md(){}function Rg(r,a){var o=Kn();a=a===void 0?null:a;var h=o.memoizedState;return h!==null&&a!==null&&jd(a,h[1])?h[0]:(o.memoizedState=[r,a],r)}function jg(r,a){var o=Kn();a=a===void 0?null:a;var h=o.memoizedState;return h!==null&&a!==null&&jd(a,h[1])?h[0]:(r=r(),o.memoizedState=[r,a],r)}function Ag(r,a,o){return(Qa&21)===0?(r.baseState&&(r.baseState=!1,bn=!0),r.memoizedState=o):(hr(o,a)||(o=Fa(),pt.lanes|=o,Ya|=o,r.baseState=!0),a)}function N1(r,a){var o=ze;ze=o!==0&&4>o?o:4,r(!0);var h=Rd.transition;Rd.transition={};try{r(!1),a()}finally{ze=o,Rd.transition=h}}function Pg(){return Kn().memoizedState}function S1(r,a,o){var h=Ks(r);if(o={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null},Lg(r))Dg(a,o);else if(o=hg(r,a,o,h),o!==null){var p=cn();gr(o,r,h,p),Og(o,a,h)}}function C1(r,a,o){var h=Ks(r),p={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null};if(Lg(r))Dg(a,p);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var _=a.lastRenderedState,R=v(_,o);if(p.hasEagerState=!0,p.eagerState=R,hr(R,_)){var L=a.interleaved;L===null?(p.next=p,Ed(a)):(p.next=L.next,L.next=p),a.interleaved=p;return}}catch{}finally{}o=hg(r,a,p,h),o!==null&&(p=cn(),gr(o,r,h,p),Og(o,a,h))}}function Lg(r){var a=r.alternate;return r===pt||a!==null&&a===pt}function Dg(r,a){rl=Kc=!0;var o=r.pending;o===null?a.next=a:(a.next=o.next,o.next=a),r.pending=a}function Og(r,a,o){if((o&4194240)!==0){var h=a.lanes;h&=r.pendingLanes,o|=h,a.lanes=o,Ps(r,o)}}var Xc={readContext:Gn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},T1={readContext:Gn,useCallback:function(r,a){return jr().memoizedState=[r,a===void 0?null:a],r},useContext:Gn,useEffect:Ng,useImperativeHandle:function(r,a,o){return o=o!=null?o.concat([r]):null,Qc(4194308,4,Tg.bind(null,a,r),o)},useLayoutEffect:function(r,a){return Qc(4194308,4,r,a)},useInsertionEffect:function(r,a){return Qc(4,2,r,a)},useMemo:function(r,a){var o=jr();return a=a===void 0?null:a,r=r(),o.memoizedState=[r,a],r},useReducer:function(r,a,o){var h=jr();return a=o!==void 0?o(a):a,h.memoizedState=h.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},h.queue=r,r=r.dispatch=S1.bind(null,pt,r),[h.memoizedState,r]},useRef:function(r){var a=jr();return r={current:r},a.memoizedState=r},useState:kg,useDebugValue:Md,useDeferredValue:function(r){return jr().memoizedState=r},useTransition:function(){var r=kg(!1),a=r[0];return r=N1.bind(null,r[1]),jr().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,o){var h=pt,p=jr();if(ut){if(o===void 0)throw Error(t(407));o=o()}else{if(o=a(),Dt===null)throw Error(t(349));(Qa&30)!==0||yg(h,a,o)}p.memoizedState=o;var v={value:o,getSnapshot:a};return p.queue=v,Ng(wg.bind(null,h,v,r),[r]),h.flags|=2048,il(9,bg.bind(null,h,v,o,a),void 0,null),o},useId:function(){var r=jr(),a=Dt.identifierPrefix;if(ut){var o=is,h=as;o=(h&~(1<<32-an(h)-1)).toString(32)+o,a=":"+a+"R"+o,o=sl++,0<o&&(a+="H"+o.toString(32)),a+=":"}else o=E1++,a=":"+a+"r"+o.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},I1={readContext:Gn,useCallback:Rg,useContext:Gn,useEffect:Od,useImperativeHandle:Ig,useInsertionEffect:Sg,useLayoutEffect:Cg,useMemo:jg,useReducer:Ld,useRef:Eg,useState:function(){return Ld(al)},useDebugValue:Md,useDeferredValue:function(r){var a=Kn();return Ag(a,Tt.memoizedState,r)},useTransition:function(){var r=Ld(al)[0],a=Kn().memoizedState;return[r,a]},useMutableSource:gg,useSyncExternalStore:vg,useId:Pg,unstable_isNewReconciler:!1},R1={readContext:Gn,useCallback:Rg,useContext:Gn,useEffect:Od,useImperativeHandle:Ig,useInsertionEffect:Sg,useLayoutEffect:Cg,useMemo:jg,useReducer:Dd,useRef:Eg,useState:function(){return Dd(al)},useDebugValue:Md,useDeferredValue:function(r){var a=Kn();return Tt===null?a.memoizedState=r:Ag(a,Tt.memoizedState,r)},useTransition:function(){var r=Dd(al)[0],a=Kn().memoizedState;return[r,a]},useMutableSource:gg,useSyncExternalStore:vg,useId:Pg,unstable_isNewReconciler:!1};function fr(r,a){if(r&&r.defaultProps){a=oe({},a),r=r.defaultProps;for(var o in r)a[o]===void 0&&(a[o]=r[o]);return a}return a}function Fd(r,a,o,h){a=r.memoizedState,o=o(h,a),o=o==null?a:oe({},a,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Jc={isMounted:function(r){return(r=r._reactInternals)?sr(r)===r:!1},enqueueSetState:function(r,a,o){r=r._reactInternals;var h=cn(),p=Ks(r),v=ls(h,p);v.payload=a,o!=null&&(v.callback=o),a=$s(r,v,p),a!==null&&(gr(a,r,p,h),$c(a,r,p))},enqueueReplaceState:function(r,a,o){r=r._reactInternals;var h=cn(),p=Ks(r),v=ls(h,p);v.tag=1,v.payload=a,o!=null&&(v.callback=o),a=$s(r,v,p),a!==null&&(gr(a,r,p,h),$c(a,r,p))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var o=cn(),h=Ks(r),p=ls(o,h);p.tag=2,a!=null&&(p.callback=a),a=$s(r,p,h),a!==null&&(gr(a,r,h,o),$c(a,r,h))}};function Mg(r,a,o,h,p,v,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,v,_):a.prototype&&a.prototype.isPureReactComponent?!Wo(o,h)||!Wo(p,v):!0}function Fg(r,a,o){var h=!1,p=zs,v=a.contextType;return typeof v=="object"&&v!==null?v=Gn(v):(p=yn(a)?$a:Kt.current,h=a.contextTypes,v=(h=h!=null)?Bi(r,p):zs),a=new a(o,v),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Jc,r.stateNode=a,a._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=v),a}function Ug(r,a,o,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,h),a.state!==r&&Jc.enqueueReplaceState(a,a.state,null)}function Ud(r,a,o,h){var p=r.stateNode;p.props=o,p.state=r.memoizedState,p.refs={},Nd(r);var v=a.contextType;typeof v=="object"&&v!==null?p.context=Gn(v):(v=yn(a)?$a:Kt.current,p.context=Bi(r,v)),p.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Fd(r,a,v,o),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(a=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),a!==p.state&&Jc.enqueueReplaceState(p,p.state,null),qc(r,o,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Yi(r,a){try{var o="",h=a;do o+=Ne(h),h=h.return;while(h);var p=o}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:a,stack:p,digest:null}}function Vd(r,a,o){return{value:r,source:null,stack:o??null,digest:a??null}}function zd(r,a){try{console.error(a.value)}catch(o){setTimeout(function(){throw o})}}var j1=typeof WeakMap=="function"?WeakMap:Map;function Vg(r,a,o){o=ls(-1,o),o.tag=3,o.payload={element:null};var h=a.value;return o.callback=function(){au||(au=!0,tf=h),zd(r,a)},o}function zg(r,a,o){o=ls(-1,o),o.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=a.value;o.payload=function(){return h(p)},o.callback=function(){zd(r,a)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(o.callback=function(){zd(r,a),typeof h!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var _=a.stack;this.componentDidCatch(a.value,{componentStack:_!==null?_:""})}),o}function Bg(r,a,o){var h=r.pingCache;if(h===null){h=r.pingCache=new j1;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(o)||(p.add(o),r=q1.bind(null,r,a,o),a.then(r,r))}function Hg(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function $g(r,a,o,h,p){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(a=ls(-1,1),a.tag=2,$s(o,a,1))),o.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var A1=re.ReactCurrentOwner,bn=!1;function ln(r,a,o,h){a.child=r===null?ug(a,null,o,h):Wi(a,r.child,o,h)}function qg(r,a,o,h,p){o=o.render;var v=a.ref;return Ki(a,p),h=Ad(r,a,o,h,v,p),o=Pd(),r!==null&&!bn?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~p,cs(r,a,p)):(ut&&o&&md(a),a.flags|=1,ln(r,a,h,p),a.child)}function Wg(r,a,o,h,p){if(r===null){var v=o.type;return typeof v=="function"&&!cf(v)&&v.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(a.tag=15,a.type=v,Gg(r,a,v,h,p)):(r=hu(o.type,null,h,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(v=r.child,(r.lanes&p)===0){var _=v.memoizedProps;if(o=o.compare,o=o!==null?o:Wo,o(_,h)&&r.ref===a.ref)return cs(r,a,p)}return a.flags|=1,r=Ys(v,h),r.ref=a.ref,r.return=a,a.child=r}function Gg(r,a,o,h,p){if(r!==null){var v=r.memoizedProps;if(Wo(v,h)&&r.ref===a.ref)if(bn=!1,a.pendingProps=h=v,(r.lanes&p)!==0)(r.flags&131072)!==0&&(bn=!0);else return a.lanes=r.lanes,cs(r,a,p)}return Bd(r,a,o,h,p)}function Kg(r,a,o){var h=a.pendingProps,p=h.children,v=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Ji,Dn),Dn|=o;else{if((o&1073741824)===0)return r=v!==null?v.baseLanes|o:o,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,st(Ji,Dn),Dn|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:o,st(Ji,Dn),Dn|=h}else v!==null?(h=v.baseLanes|o,a.memoizedState=null):h=o,st(Ji,Dn),Dn|=h;return ln(r,a,p,o),a.child}function Qg(r,a){var o=a.ref;(r===null&&o!==null||r!==null&&r.ref!==o)&&(a.flags|=512,a.flags|=2097152)}function Bd(r,a,o,h,p){var v=yn(o)?$a:Kt.current;return v=Bi(a,v),Ki(a,p),o=Ad(r,a,o,h,v,p),h=Pd(),r!==null&&!bn?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~p,cs(r,a,p)):(ut&&h&&md(a),a.flags|=1,ln(r,a,o,p),a.child)}function Yg(r,a,o,h,p){if(yn(o)){var v=!0;Oc(a)}else v=!1;if(Ki(a,p),a.stateNode===null)eu(r,a),Fg(a,o,h),Ud(a,o,h,p),h=!0;else if(r===null){var _=a.stateNode,R=a.memoizedProps;_.props=R;var L=_.context,$=o.contextType;typeof $=="object"&&$!==null?$=Gn($):($=yn(o)?$a:Kt.current,$=Bi(a,$));var te=o.getDerivedStateFromProps,ne=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function";ne||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==h||L!==$)&&Ug(a,_,h,$),Hs=!1;var ee=a.memoizedState;_.state=ee,qc(a,h,_,p),L=a.memoizedState,R!==h||ee!==L||vn.current||Hs?(typeof te=="function"&&(Fd(a,o,te,h),L=a.memoizedState),(R=Hs||Mg(a,o,R,h,ee,L,$))?(ne||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=L),_.props=h,_.state=L,_.context=$,h=R):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,dg(r,a),R=a.memoizedProps,$=a.type===a.elementType?R:fr(a.type,R),_.props=$,ne=a.pendingProps,ee=_.context,L=o.contextType,typeof L=="object"&&L!==null?L=Gn(L):(L=yn(o)?$a:Kt.current,L=Bi(a,L));var de=o.getDerivedStateFromProps;(te=typeof de=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==ne||ee!==L)&&Ug(a,_,h,L),Hs=!1,ee=a.memoizedState,_.state=ee,qc(a,h,_,p);var ve=a.memoizedState;R!==ne||ee!==ve||vn.current||Hs?(typeof de=="function"&&(Fd(a,o,de,h),ve=a.memoizedState),($=Hs||Mg(a,o,$,h,ee,ve,L)||!1)?(te||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ve,L),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ve,L)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||R===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&ee===r.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ve),_.props=h,_.state=ve,_.context=L,h=$):(typeof _.componentDidUpdate!="function"||R===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&ee===r.memoizedState||(a.flags|=1024),h=!1)}return Hd(r,a,o,h,v,p)}function Hd(r,a,o,h,p,v){Qg(r,a);var _=(a.flags&128)!==0;if(!h&&!_)return p&&tg(a,o,!1),cs(r,a,v);h=a.stateNode,A1.current=a;var R=_&&typeof o.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,r!==null&&_?(a.child=Wi(a,r.child,null,v),a.child=Wi(a,null,R,v)):ln(r,a,R,v),a.memoizedState=h.state,p&&tg(a,o,!0),a.child}function Xg(r){var a=r.stateNode;a.pendingContext?Zm(r,a.pendingContext,a.pendingContext!==a.context):a.context&&Zm(r,a.context,!1),Sd(r,a.containerInfo)}function Jg(r,a,o,h,p){return qi(),bd(p),a.flags|=256,ln(r,a,o,h),a.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function qd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Zg(r,a,o){var h=a.pendingProps,p=ft.current,v=!1,_=(a.flags&128)!==0,R;if((R=_)||(R=r!==null&&r.memoizedState===null?!1:(p&2)!==0),R?(v=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),st(ft,p&1),r===null)return yd(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(_=h.children,r=h.fallback,v?(h=a.mode,v=a.child,_={mode:"hidden",children:_},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=_):v=du(_,h,0,null),r=ei(r,h,o,null),v.return=a,r.return=a,v.sibling=r,a.child=v,a.child.memoizedState=qd(o),a.memoizedState=$d,r):Wd(a,_));if(p=r.memoizedState,p!==null&&(R=p.dehydrated,R!==null))return P1(r,a,_,h,R,p,o);if(v){v=h.fallback,_=a.mode,p=r.child,R=p.sibling;var L={mode:"hidden",children:h.children};return(_&1)===0&&a.child!==p?(h=a.child,h.childLanes=0,h.pendingProps=L,a.deletions=null):(h=Ys(p,L),h.subtreeFlags=p.subtreeFlags&14680064),R!==null?v=Ys(R,v):(v=ei(v,_,o,null),v.flags|=2),v.return=a,h.return=a,h.sibling=v,a.child=h,h=v,v=a.child,_=r.child.memoizedState,_=_===null?qd(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},v.memoizedState=_,v.childLanes=r.childLanes&~o,a.memoizedState=$d,h}return v=r.child,r=v.sibling,h=Ys(v,{mode:"visible",children:h.children}),(a.mode&1)===0&&(h.lanes=o),h.return=a,h.sibling=null,r!==null&&(o=a.deletions,o===null?(a.deletions=[r],a.flags|=16):o.push(r)),a.child=h,a.memoizedState=null,h}function Wd(r,a){return a=du({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function Zc(r,a,o,h){return h!==null&&bd(h),Wi(a,r.child,null,o),r=Wd(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function P1(r,a,o,h,p,v,_){if(o)return a.flags&256?(a.flags&=-257,h=Vd(Error(t(422))),Zc(r,a,_,h)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(v=h.fallback,p=a.mode,h=du({mode:"visible",children:h.children},p,0,null),v=ei(v,p,_,null),v.flags|=2,h.return=a,v.return=a,h.sibling=v,a.child=h,(a.mode&1)!==0&&Wi(a,r.child,null,_),a.child.memoizedState=qd(_),a.memoizedState=$d,v);if((a.mode&1)===0)return Zc(r,a,_,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var R=h.dgst;return h=R,v=Error(t(419)),h=Vd(v,h,void 0),Zc(r,a,_,h)}if(R=(_&r.childLanes)!==0,bn||R){if(h=Dt,h!==null){switch(_&-_){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|_))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,os(r,p),gr(h,r,p,-1))}return lf(),h=Vd(Error(t(421))),Zc(r,a,_,h)}return p.data==="$?"?(a.flags|=128,a.child=r.child,a=W1.bind(null,r),p._reactRetry=a,null):(r=v.treeContext,Ln=Us(p.nextSibling),Pn=a,ut=!0,dr=null,r!==null&&(qn[Wn++]=as,qn[Wn++]=is,qn[Wn++]=qa,as=r.id,is=r.overflow,qa=a),a=Wd(a,h.children),a.flags|=4096,a)}function ev(r,a,o){r.lanes|=a;var h=r.alternate;h!==null&&(h.lanes|=a),kd(r.return,a,o)}function Gd(r,a,o,h,p){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=o,v.tailMode=p)}function tv(r,a,o){var h=a.pendingProps,p=h.revealOrder,v=h.tail;if(ln(r,a,h.children,o),h=ft.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ev(r,o,a);else if(r.tag===19)ev(r,o,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(st(ft,h),(a.mode&1)===0)a.memoizedState=null;else switch(p){case"forwards":for(o=a.child,p=null;o!==null;)r=o.alternate,r!==null&&Wc(r)===null&&(p=o),o=o.sibling;o=p,o===null?(p=a.child,a.child=null):(p=o.sibling,o.sibling=null),Gd(a,!1,p,o,v);break;case"backwards":for(o=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&Wc(r)===null){a.child=p;break}r=p.sibling,p.sibling=o,o=p,p=r}Gd(a,!0,o,null,v);break;case"together":Gd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function eu(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function cs(r,a,o){if(r!==null&&(a.dependencies=r.dependencies),Ya|=a.lanes,(o&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(t(153));if(a.child!==null){for(r=a.child,o=Ys(r,r.pendingProps),a.child=o,o.return=a;r.sibling!==null;)r=r.sibling,o=o.sibling=Ys(r,r.pendingProps),o.return=a;o.sibling=null}return a.child}function L1(r,a,o){switch(a.tag){case 3:Xg(a),qi();break;case 5:mg(a);break;case 1:yn(a.type)&&Oc(a);break;case 4:Sd(a,a.stateNode.containerInfo);break;case 10:var h=a.type._context,p=a.memoizedProps.value;st(Bc,h._currentValue),h._currentValue=p;break;case 13:if(h=a.memoizedState,h!==null)return h.dehydrated!==null?(st(ft,ft.current&1),a.flags|=128,null):(o&a.child.childLanes)!==0?Zg(r,a,o):(st(ft,ft.current&1),r=cs(r,a,o),r!==null?r.sibling:null);st(ft,ft.current&1);break;case 19:if(h=(o&a.childLanes)!==0,(r.flags&128)!==0){if(h)return tv(r,a,o);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),st(ft,ft.current),h)break;return null;case 22:case 23:return a.lanes=0,Kg(r,a,o)}return cs(r,a,o)}var nv,Kd,rv,sv;nv=function(r,a){for(var o=a.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Kd=function(){},rv=function(r,a,o,h){var p=r.memoizedProps;if(p!==h){r=a.stateNode,Ka(Rr.current);var v=null;switch(o){case"input":p=Wr(r,p),h=Wr(r,h),v=[];break;case"select":p=oe({},p,{value:void 0}),h=oe({},h,{value:void 0}),v=[];break;case"textarea":p=Ss(r,p),h=Ss(r,h),v=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Pc)}Vn(o,h);var _;o=null;for($ in p)if(!h.hasOwnProperty($)&&p.hasOwnProperty($)&&p[$]!=null)if($==="style"){var R=p[$];for(_ in R)R.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?v||(v=[]):(v=v||[]).push($,null));for($ in h){var L=h[$];if(R=p!=null?p[$]:void 0,h.hasOwnProperty($)&&L!==R&&(L!=null||R!=null))if($==="style")if(R){for(_ in R)!R.hasOwnProperty(_)||L&&L.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in L)L.hasOwnProperty(_)&&R[_]!==L[_]&&(o||(o={}),o[_]=L[_])}else o||(v||(v=[]),v.push($,o)),o=L;else $==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,R=R?R.__html:void 0,L!=null&&R!==L&&(v=v||[]).push($,L)):$==="children"?typeof L!="string"&&typeof L!="number"||(v=v||[]).push($,""+L):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(i.hasOwnProperty($)?(L!=null&&$==="onScroll"&&it("scroll",r),v||R===L||(v=[])):(v=v||[]).push($,L))}o&&(v=v||[]).push("style",o);var $=v;(a.updateQueue=$)&&(a.flags|=4)}},sv=function(r,a,o,h){o!==h&&(a.flags|=4)};function ol(r,a){if(!ut)switch(r.tailMode){case"hidden":a=r.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Yt(r){var a=r.alternate!==null&&r.alternate.child===r.child,o=0,h=0;if(a)for(var p=r.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=o,a}function D1(r,a,o){var h=a.pendingProps;switch(gd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(a),null;case 1:return yn(a.type)&&Dc(),Yt(a),null;case 3:return h=a.stateNode,Qi(),ot(vn),ot(Kt),Id(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Vc(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,dr!==null&&(sf(dr),dr=null))),Kd(r,a),Yt(a),null;case 5:Cd(a);var p=Ka(nl.current);if(o=a.type,r!==null&&a.stateNode!=null)rv(r,a,o,h,p),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!h){if(a.stateNode===null)throw Error(t(166));return Yt(a),null}if(r=Ka(Rr.current),Vc(a)){h=a.stateNode,o=a.type;var v=a.memoizedProps;switch(h[Ir]=a,h[Xo]=v,r=(a.mode&1)!==0,o){case"dialog":it("cancel",h),it("close",h);break;case"iframe":case"object":case"embed":it("load",h);break;case"video":case"audio":for(p=0;p<Ko.length;p++)it(Ko[p],h);break;case"source":it("error",h);break;case"img":case"image":case"link":it("error",h),it("load",h);break;case"details":it("toggle",h);break;case"input":_s(h,v),it("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},it("invalid",h);break;case"textarea":hn(h,v),it("invalid",h)}Vn(o,v),p=null;for(var _ in v)if(v.hasOwnProperty(_)){var R=v[_];_==="children"?typeof R=="string"?h.textContent!==R&&(v.suppressHydrationWarning!==!0&&Ac(h.textContent,R,r),p=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(v.suppressHydrationWarning!==!0&&Ac(h.textContent,R,r),p=["children",""+R]):i.hasOwnProperty(_)&&R!=null&&_==="onScroll"&&it("scroll",h)}switch(o){case"input":nn(h),Es(h,v,!0);break;case"textarea":nn(h),Ra(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Pc)}h=p,a.updateQueue=h,h!==null&&(a.flags|=4)}else{_=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=We(o)),r==="http://www.w3.org/1999/xhtml"?o==="script"?(r=_.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=_.createElement(o,{is:h.is}):(r=_.createElement(o),o==="select"&&(_=r,h.multiple?_.multiple=!0:h.size&&(_.size=h.size))):r=_.createElementNS(r,o),r[Ir]=a,r[Xo]=h,nv(r,a,!1,!1),a.stateNode=r;e:{switch(_=Aa(o,h),o){case"dialog":it("cancel",r),it("close",r),p=h;break;case"iframe":case"object":case"embed":it("load",r),p=h;break;case"video":case"audio":for(p=0;p<Ko.length;p++)it(Ko[p],r);p=h;break;case"source":it("error",r),p=h;break;case"img":case"image":case"link":it("error",r),it("load",r),p=h;break;case"details":it("toggle",r),p=h;break;case"input":_s(r,h),p=Wr(r,h),it("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=oe({},h,{value:void 0}),it("invalid",r);break;case"textarea":hn(r,h),p=Ss(r,h),it("invalid",r);break;default:p=h}Vn(o,p),R=p;for(v in R)if(R.hasOwnProperty(v)){var L=R[v];v==="style"?Un(r,L):v==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&ja(r,L)):v==="children"?typeof L=="string"?(o!=="textarea"||L!=="")&&Tn(r,L):typeof L=="number"&&Tn(r,""+L):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?L!=null&&v==="onScroll"&&it("scroll",r):L!=null&&G(r,v,L,_))}switch(o){case"input":nn(r),Es(r,h,!1);break;case"textarea":nn(r),Ra(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ve(h.value));break;case"select":r.multiple=!!h.multiple,v=h.value,v!=null?rn(r,!!h.multiple,v,!1):h.defaultValue!=null&&rn(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=Pc)}switch(o){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Yt(a),null;case 6:if(r&&a.stateNode!=null)sv(r,a,r.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(t(166));if(o=Ka(nl.current),Ka(Rr.current),Vc(a)){if(h=a.stateNode,o=a.memoizedProps,h[Ir]=a,(v=h.nodeValue!==o)&&(r=Pn,r!==null))switch(r.tag){case 3:Ac(h.nodeValue,o,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ac(h.nodeValue,o,(r.mode&1)!==0)}v&&(a.flags|=4)}else h=(o.nodeType===9?o:o.ownerDocument).createTextNode(h),h[Ir]=a,a.stateNode=h}return Yt(a),null;case 13:if(ot(ft),h=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ut&&Ln!==null&&(a.mode&1)!==0&&(a.flags&128)===0)og(),qi(),a.flags|=98560,v=!1;else if(v=Vc(a),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(t(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Ir]=a}else qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Yt(a),v=!1}else dr!==null&&(sf(dr),dr=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=o,a):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(ft.current&1)!==0?It===0&&(It=3):lf())),a.updateQueue!==null&&(a.flags|=4),Yt(a),null);case 4:return Qi(),Kd(r,a),r===null&&Qo(a.stateNode.containerInfo),Yt(a),null;case 10:return _d(a.type._context),Yt(a),null;case 17:return yn(a.type)&&Dc(),Yt(a),null;case 19:if(ot(ft),v=a.memoizedState,v===null)return Yt(a),null;if(h=(a.flags&128)!==0,_=v.rendering,_===null)if(h)ol(v,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(_=Wc(r),_!==null){for(a.flags|=128,ol(v,!1),h=_.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),a.subtreeFlags=0,h=o,o=a.child;o!==null;)v=o,r=h,v.flags&=14680066,_=v.alternate,_===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=_.childLanes,v.lanes=_.lanes,v.child=_.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=_.memoizedProps,v.memoizedState=_.memoizedState,v.updateQueue=_.updateQueue,v.type=_.type,r=_.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o=o.sibling;return st(ft,ft.current&1|2),a.child}r=r.sibling}v.tail!==null&&rt()>Zi&&(a.flags|=128,h=!0,ol(v,!1),a.lanes=4194304)}else{if(!h)if(r=Wc(_),r!==null){if(a.flags|=128,h=!0,o=r.updateQueue,o!==null&&(a.updateQueue=o,a.flags|=4),ol(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!ut)return Yt(a),null}else 2*rt()-v.renderingStartTime>Zi&&o!==1073741824&&(a.flags|=128,h=!0,ol(v,!1),a.lanes=4194304);v.isBackwards?(_.sibling=a.child,a.child=_):(o=v.last,o!==null?o.sibling=_:a.child=_,v.last=_)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=rt(),a.sibling=null,o=ft.current,st(ft,h?o&1|2:o&1),a):(Yt(a),null);case 22:case 23:return of(),h=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(a.flags|=8192),h&&(a.mode&1)!==0?(Dn&1073741824)!==0&&(Yt(a),a.subtreeFlags&6&&(a.flags|=8192)):Yt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function O1(r,a){switch(gd(a),a.tag){case 1:return yn(a.type)&&Dc(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Qi(),ot(vn),ot(Kt),Id(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return Cd(a),null;case 13:if(ot(ft),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(t(340));qi()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ot(ft),null;case 4:return Qi(),null;case 10:return _d(a.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var tu=!1,Xt=!1,M1=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Xi(r,a){var o=r.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(h){bt(r,a,h)}else o.current=null}function av(r,a,o){try{o()}catch(h){bt(r,a,h)}}var iv=!1;function F1(r,a){if(od=Os,r=Mm(),Zh(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var p=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var _=0,R=-1,L=-1,$=0,te=0,ne=r,ee=null;t:for(;;){for(var de;ne!==o||p!==0&&ne.nodeType!==3||(R=_+p),ne!==v||h!==0&&ne.nodeType!==3||(L=_+h),ne.nodeType===3&&(_+=ne.nodeValue.length),(de=ne.firstChild)!==null;)ee=ne,ne=de;for(;;){if(ne===r)break t;if(ee===o&&++$===p&&(R=_),ee===v&&++te===h&&(L=_),(de=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=de}o=R===-1||L===-1?null:{start:R,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(ld={focusedElem:r,selectionRange:o},Os=!1,ge=a;ge!==null;)if(a=ge,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,ge=r;else for(;ge!==null;){a=ge;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var be=ve.memoizedProps,xt=ve.memoizedState,B=a.stateNode,O=B.getSnapshotBeforeUpdate(a.elementType===a.type?be:fr(a.type,be),xt);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var H=a.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){bt(a,a.return,ie)}if(r=a.sibling,r!==null){r.return=a.return,ge=r;break}ge=a.return}return ve=iv,iv=!1,ve}function ll(r,a,o){var h=a.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var v=p.destroy;p.destroy=void 0,v!==void 0&&av(a,o,v)}p=p.next}while(p!==h)}}function nu(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&r)===r){var h=o.create;o.destroy=h()}o=o.next}while(o!==a)}}function Qd(r){var a=r.ref;if(a!==null){var o=r.stateNode;switch(r.tag){case 5:r=o;break;default:r=o}typeof a=="function"?a(r):a.current=r}}function ov(r){var a=r.alternate;a!==null&&(r.alternate=null,ov(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[Ir],delete a[Xo],delete a[dd],delete a[w1],delete a[x1])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function lv(r){return r.tag===5||r.tag===3||r.tag===4}function cv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||lv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Yd(r,a,o){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?o.nodeType===8?o.parentNode.insertBefore(r,a):o.insertBefore(r,a):(o.nodeType===8?(a=o.parentNode,a.insertBefore(r,o)):(a=o,a.appendChild(r)),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Pc));else if(h!==4&&(r=r.child,r!==null))for(Yd(r,a,o),r=r.sibling;r!==null;)Yd(r,a,o),r=r.sibling}function Xd(r,a,o){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?o.insertBefore(r,a):o.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Xd(r,a,o),r=r.sibling;r!==null;)Xd(r,a,o),r=r.sibling}var zt=null,pr=!1;function qs(r,a,o){for(o=o.child;o!==null;)uv(r,a,o),o=o.sibling}function uv(r,a,o){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Oa,o)}catch{}switch(o.tag){case 5:Xt||Xi(o,a);case 6:var h=zt,p=pr;zt=null,qs(r,a,o),zt=h,pr=p,zt!==null&&(pr?(r=zt,o=o.stateNode,r.nodeType===8?r.parentNode.removeChild(o):r.removeChild(o)):zt.removeChild(o.stateNode));break;case 18:zt!==null&&(pr?(r=zt,o=o.stateNode,r.nodeType===8?hd(r.parentNode,o):r.nodeType===1&&hd(r,o),cr(r)):hd(zt,o.stateNode));break;case 4:h=zt,p=pr,zt=o.stateNode.containerInfo,pr=!0,qs(r,a,o),zt=h,pr=p;break;case 0:case 11:case 14:case 15:if(!Xt&&(h=o.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var v=p,_=v.destroy;v=v.tag,_!==void 0&&((v&2)!==0||(v&4)!==0)&&av(o,a,_),p=p.next}while(p!==h)}qs(r,a,o);break;case 1:if(!Xt&&(Xi(o,a),h=o.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=o.memoizedProps,h.state=o.memoizedState,h.componentWillUnmount()}catch(R){bt(o,a,R)}qs(r,a,o);break;case 21:qs(r,a,o);break;case 22:o.mode&1?(Xt=(h=Xt)||o.memoizedState!==null,qs(r,a,o),Xt=h):qs(r,a,o);break;default:qs(r,a,o)}}function hv(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var o=r.stateNode;o===null&&(o=r.stateNode=new M1),a.forEach(function(h){var p=G1.bind(null,r,h);o.has(h)||(o.add(h),h.then(p,p))})}}function mr(r,a){var o=a.deletions;if(o!==null)for(var h=0;h<o.length;h++){var p=o[h];try{var v=r,_=a,R=_;e:for(;R!==null;){switch(R.tag){case 5:zt=R.stateNode,pr=!1;break e;case 3:zt=R.stateNode.containerInfo,pr=!0;break e;case 4:zt=R.stateNode.containerInfo,pr=!0;break e}R=R.return}if(zt===null)throw Error(t(160));uv(v,_,p),zt=null,pr=!1;var L=p.alternate;L!==null&&(L.return=null),p.return=null}catch($){bt(p,a,$)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)dv(a,r),a=a.sibling}function dv(r,a){var o=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(mr(a,r),Ar(r),h&4){try{ll(3,r,r.return),nu(3,r)}catch(be){bt(r,r.return,be)}try{ll(5,r,r.return)}catch(be){bt(r,r.return,be)}}break;case 1:mr(a,r),Ar(r),h&512&&o!==null&&Xi(o,o.return);break;case 5:if(mr(a,r),Ar(r),h&512&&o!==null&&Xi(o,o.return),r.flags&32){var p=r.stateNode;try{Tn(p,"")}catch(be){bt(r,r.return,be)}}if(h&4&&(p=r.stateNode,p!=null)){var v=r.memoizedProps,_=o!==null?o.memoizedProps:v,R=r.type,L=r.updateQueue;if(r.updateQueue=null,L!==null)try{R==="input"&&v.type==="radio"&&v.name!=null&&ks(p,v),Aa(R,_);var $=Aa(R,v);for(_=0;_<L.length;_+=2){var te=L[_],ne=L[_+1];te==="style"?Un(p,ne):te==="dangerouslySetInnerHTML"?ja(p,ne):te==="children"?Tn(p,ne):G(p,te,ne,$)}switch(R){case"input":Ia(p,v);break;case"textarea":Cs(p,v);break;case"select":var ee=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var de=v.value;de!=null?rn(p,!!v.multiple,de,!1):ee!==!!v.multiple&&(v.defaultValue!=null?rn(p,!!v.multiple,v.defaultValue,!0):rn(p,!!v.multiple,v.multiple?[]:"",!1))}p[Xo]=v}catch(be){bt(r,r.return,be)}}break;case 6:if(mr(a,r),Ar(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,v=r.memoizedProps;try{p.nodeValue=v}catch(be){bt(r,r.return,be)}}break;case 3:if(mr(a,r),Ar(r),h&4&&o!==null&&o.memoizedState.isDehydrated)try{cr(a.containerInfo)}catch(be){bt(r,r.return,be)}break;case 4:mr(a,r),Ar(r);break;case 13:mr(a,r),Ar(r),p=r.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(ef=rt())),h&4&&hv(r);break;case 22:if(te=o!==null&&o.memoizedState!==null,r.mode&1?(Xt=($=Xt)||te,mr(a,r),Xt=$):mr(a,r),Ar(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!te&&(r.mode&1)!==0)for(ge=r,te=r.child;te!==null;){for(ne=ge=te;ge!==null;){switch(ee=ge,de=ee.child,ee.tag){case 0:case 11:case 14:case 15:ll(4,ee,ee.return);break;case 1:Xi(ee,ee.return);var ve=ee.stateNode;if(typeof ve.componentWillUnmount=="function"){h=ee,o=ee.return;try{a=h,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(be){bt(h,o,be)}}break;case 5:Xi(ee,ee.return);break;case 22:if(ee.memoizedState!==null){mv(ne);continue}}de!==null?(de.return=ee,ge=de):mv(ne)}te=te.sibling}e:for(te=null,ne=r;;){if(ne.tag===5){if(te===null){te=ne;try{p=ne.stateNode,$?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(R=ne.stateNode,L=ne.memoizedProps.style,_=L!=null&&L.hasOwnProperty("display")?L.display:null,R.style.display=Kr("display",_))}catch(be){bt(r,r.return,be)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=$?"":ne.memoizedProps}catch(be){bt(r,r.return,be)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===r)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===r)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===r)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:mr(a,r),Ar(r),h&4&&hv(r);break;case 21:break;default:mr(a,r),Ar(r)}}function Ar(r){var a=r.flags;if(a&2){try{e:{for(var o=r.return;o!==null;){if(lv(o)){var h=o;break e}o=o.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Tn(p,""),h.flags&=-33);var v=cv(r);Xd(r,v,p);break;case 3:case 4:var _=h.stateNode.containerInfo,R=cv(r);Yd(r,R,_);break;default:throw Error(t(161))}}catch(L){bt(r,r.return,L)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function U1(r,a,o){ge=r,fv(r)}function fv(r,a,o){for(var h=(r.mode&1)!==0;ge!==null;){var p=ge,v=p.child;if(p.tag===22&&h){var _=p.memoizedState!==null||tu;if(!_){var R=p.alternate,L=R!==null&&R.memoizedState!==null||Xt;R=tu;var $=Xt;if(tu=_,(Xt=L)&&!$)for(ge=p;ge!==null;)_=ge,L=_.child,_.tag===22&&_.memoizedState!==null?gv(p):L!==null?(L.return=_,ge=L):gv(p);for(;v!==null;)ge=v,fv(v),v=v.sibling;ge=p,tu=R,Xt=$}pv(r)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ge=v):pv(r)}}function pv(r){for(;ge!==null;){var a=ge;if((a.flags&8772)!==0){var o=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Xt||nu(5,a);break;case 1:var h=a.stateNode;if(a.flags&4&&!Xt)if(o===null)h.componentDidMount();else{var p=a.elementType===a.type?o.memoizedProps:fr(a.type,o.memoizedProps);h.componentDidUpdate(p,o.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&pg(a,v,h);break;case 3:var _=a.updateQueue;if(_!==null){if(o=null,a.child!==null)switch(a.child.tag){case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}pg(a,_,o)}break;case 5:var R=a.stateNode;if(o===null&&a.flags&4){o=R;var L=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&o.focus();break;case"img":L.src&&(o.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var $=a.alternate;if($!==null){var te=$.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&cr(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Xt||a.flags&512&&Qd(a)}catch(ee){bt(a,a.return,ee)}}if(a===r){ge=null;break}if(o=a.sibling,o!==null){o.return=a.return,ge=o;break}ge=a.return}}function mv(r){for(;ge!==null;){var a=ge;if(a===r){ge=null;break}var o=a.sibling;if(o!==null){o.return=a.return,ge=o;break}ge=a.return}}function gv(r){for(;ge!==null;){var a=ge;try{switch(a.tag){case 0:case 11:case 15:var o=a.return;try{nu(4,a)}catch(L){bt(a,o,L)}break;case 1:var h=a.stateNode;if(typeof h.componentDidMount=="function"){var p=a.return;try{h.componentDidMount()}catch(L){bt(a,p,L)}}var v=a.return;try{Qd(a)}catch(L){bt(a,v,L)}break;case 5:var _=a.return;try{Qd(a)}catch(L){bt(a,_,L)}}}catch(L){bt(a,a.return,L)}if(a===r){ge=null;break}var R=a.sibling;if(R!==null){R.return=a.return,ge=R;break}ge=a.return}}var V1=Math.ceil,ru=re.ReactCurrentDispatcher,Jd=re.ReactCurrentOwner,Qn=re.ReactCurrentBatchConfig,$e=0,Dt=null,kt=null,Bt=0,Dn=0,Ji=Vs(0),It=0,cl=null,Ya=0,su=0,Zd=0,ul=null,wn=null,ef=0,Zi=1/0,us=null,au=!1,tf=null,Ws=null,iu=!1,Gs=null,ou=0,hl=0,nf=null,lu=-1,cu=0;function cn(){return($e&6)!==0?rt():lu!==-1?lu:lu=rt()}function Ks(r){return(r.mode&1)===0?1:($e&2)!==0&&Bt!==0?Bt&-Bt:k1.transition!==null?(cu===0&&(cu=Fa()),cu):(r=ze,r!==0||(r=window.event,r=r===void 0?16:Uo(r.type)),r)}function gr(r,a,o,h){if(50<hl)throw hl=0,nf=null,Error(t(185));As(r,o,h),(($e&2)===0||r!==Dt)&&(r===Dt&&(($e&2)===0&&(su|=o),It===4&&Qs(r,Bt)),xn(r,h),o===1&&$e===0&&(a.mode&1)===0&&(Zi=rt()+500,Mc&&Bs()))}function xn(r,a){var o=r.callbackNode;Jr(r,a);var h=Ma(r,r===Dt?Bt:0);if(h===0)o!==null&&Lo(o),r.callbackNode=null,r.callbackPriority=0;else if(a=h&-h,r.callbackPriority!==a){if(o!=null&&Lo(o),a===1)r.tag===0?_1(yv.bind(null,r)):ng(yv.bind(null,r)),y1(function(){($e&6)===0&&Bs()}),o=null;else{switch(Ls(h)){case 1:o=Da;break;case 4:o=Is;break;case 16:o=Bn;break;case 536870912:o=cc;break;default:o=Bn}o=Sv(o,vv.bind(null,r))}r.callbackPriority=a,r.callbackNode=o}}function vv(r,a){if(lu=-1,cu=0,($e&6)!==0)throw Error(t(327));var o=r.callbackNode;if(eo()&&r.callbackNode!==o)return null;var h=Ma(r,r===Dt?Bt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||a)a=uu(r,h);else{a=h;var p=$e;$e|=2;var v=wv();(Dt!==r||Bt!==a)&&(us=null,Zi=rt()+500,Ja(r,a));do try{H1();break}catch(R){bv(r,R)}while(!0);xd(),ru.current=v,$e=p,kt!==null?a=0:(Dt=null,Bt=0,a=It)}if(a!==0){if(a===2&&(p=Rn(r),p!==0&&(h=p,a=rf(r,p))),a===1)throw o=cl,Ja(r,0),Qs(r,h),xn(r,rt()),o;if(a===6)Qs(r,h);else{if(p=r.current.alternate,(h&30)===0&&!z1(p)&&(a=uu(r,h),a===2&&(v=Rn(r),v!==0&&(h=v,a=rf(r,v))),a===1))throw o=cl,Ja(r,0),Qs(r,h),xn(r,rt()),o;switch(r.finishedWork=p,r.finishedLanes=h,a){case 0:case 1:throw Error(t(345));case 2:Za(r,wn,us);break;case 3:if(Qs(r,h),(h&130023424)===h&&(a=ef+500-rt(),10<a)){if(Ma(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){cn(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=ud(Za.bind(null,r,wn,us),a);break}Za(r,wn,us);break;case 4:if(Qs(r,h),(h&4194240)===h)break;for(a=r.eventTimes,p=-1;0<h;){var _=31-an(h);v=1<<_,_=a[_],_>p&&(p=_),h&=~v}if(h=p,h=rt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*V1(h/1960))-h,10<h){r.timeoutHandle=ud(Za.bind(null,r,wn,us),h);break}Za(r,wn,us);break;case 5:Za(r,wn,us);break;default:throw Error(t(329))}}}return xn(r,rt()),r.callbackNode===o?vv.bind(null,r):null}function rf(r,a){var o=ul;return r.current.memoizedState.isDehydrated&&(Ja(r,a).flags|=256),r=uu(r,a),r!==2&&(a=wn,wn=o,a!==null&&sf(a)),r}function sf(r){wn===null?wn=r:wn.push.apply(wn,r)}function z1(r){for(var a=r;;){if(a.flags&16384){var o=a.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var h=0;h<o.length;h++){var p=o[h],v=p.getSnapshot;p=p.value;try{if(!hr(v(),p))return!1}catch{return!1}}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qs(r,a){for(a&=~Zd,a&=~su,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var o=31-an(a),h=1<<o;r[o]=-1,a&=~h}}function yv(r){if(($e&6)!==0)throw Error(t(327));eo();var a=Ma(r,0);if((a&1)===0)return xn(r,rt()),null;var o=uu(r,a);if(r.tag!==0&&o===2){var h=Rn(r);h!==0&&(a=h,o=rf(r,h))}if(o===1)throw o=cl,Ja(r,0),Qs(r,a),xn(r,rt()),o;if(o===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,Za(r,wn,us),xn(r,rt()),null}function af(r,a){var o=$e;$e|=1;try{return r(a)}finally{$e=o,$e===0&&(Zi=rt()+500,Mc&&Bs())}}function Xa(r){Gs!==null&&Gs.tag===0&&($e&6)===0&&eo();var a=$e;$e|=1;var o=Qn.transition,h=ze;try{if(Qn.transition=null,ze=1,r)return r()}finally{ze=h,Qn.transition=o,$e=a,($e&6)===0&&Bs()}}function of(){Dn=Ji.current,ot(Ji)}function Ja(r,a){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;if(o!==-1&&(r.timeoutHandle=-1,v1(o)),kt!==null)for(o=kt.return;o!==null;){var h=o;switch(gd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Dc();break;case 3:Qi(),ot(vn),ot(Kt),Id();break;case 5:Cd(h);break;case 4:Qi();break;case 13:ot(ft);break;case 19:ot(ft);break;case 10:_d(h.type._context);break;case 22:case 23:of()}o=o.return}if(Dt=r,kt=r=Ys(r.current,null),Bt=Dn=a,It=0,cl=null,Zd=su=Ya=0,wn=ul=null,Ga!==null){for(a=0;a<Ga.length;a++)if(o=Ga[a],h=o.interleaved,h!==null){o.interleaved=null;var p=h.next,v=o.pending;if(v!==null){var _=v.next;v.next=p,h.next=_}o.pending=h}Ga=null}return r}function bv(r,a){do{var o=kt;try{if(xd(),Gc.current=Xc,Kc){for(var h=pt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Kc=!1}if(Qa=0,Lt=Tt=pt=null,rl=!1,sl=0,Jd.current=null,o===null||o.return===null){It=1,cl=a,kt=null;break}e:{var v=r,_=o.return,R=o,L=a;if(a=Bt,R.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var $=L,te=R,ne=te.tag;if((te.mode&1)===0&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var de=Hg(_);if(de!==null){de.flags&=-257,$g(de,_,R,v,a),de.mode&1&&Bg(v,$,a),a=de,L=$;var ve=a.updateQueue;if(ve===null){var be=new Set;be.add(L),a.updateQueue=be}else ve.add(L);break e}else{if((a&1)===0){Bg(v,$,a),lf();break e}L=Error(t(426))}}else if(ut&&R.mode&1){var xt=Hg(_);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),$g(xt,_,R,v,a),bd(Yi(L,R));break e}}v=L=Yi(L,R),It!==4&&(It=2),ul===null?ul=[v]:ul.push(v),v=_;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var B=Vg(v,L,a);fg(v,B);break e;case 1:R=L;var O=v.type,H=v.stateNode;if((v.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ws===null||!Ws.has(H)))){v.flags|=65536,a&=-a,v.lanes|=a;var ie=zg(v,R,a);fg(v,ie);break e}}v=v.return}while(v!==null)}_v(o)}catch(we){a=we,kt===o&&o!==null&&(kt=o=o.return);continue}break}while(!0)}function wv(){var r=ru.current;return ru.current=Xc,r===null?Xc:r}function lf(){(It===0||It===3||It===2)&&(It=4),Dt===null||(Ya&268435455)===0&&(su&268435455)===0||Qs(Dt,Bt)}function uu(r,a){var o=$e;$e|=2;var h=wv();(Dt!==r||Bt!==a)&&(us=null,Ja(r,a));do try{B1();break}catch(p){bv(r,p)}while(!0);if(xd(),$e=o,ru.current=h,kt!==null)throw Error(t(261));return Dt=null,Bt=0,It}function B1(){for(;kt!==null;)xv(kt)}function H1(){for(;kt!==null&&!oc();)xv(kt)}function xv(r){var a=Nv(r.alternate,r,Dn);r.memoizedProps=r.pendingProps,a===null?_v(r):kt=a,Jd.current=null}function _v(r){var a=r;do{var o=a.alternate;if(r=a.return,(a.flags&32768)===0){if(o=D1(o,a,Dn),o!==null){kt=o;return}}else{if(o=O1(o,a),o!==null){o.flags&=32767,kt=o;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{It=6,kt=null;return}}if(a=a.sibling,a!==null){kt=a;return}kt=a=r}while(a!==null);It===0&&(It=5)}function Za(r,a,o){var h=ze,p=Qn.transition;try{Qn.transition=null,ze=1,$1(r,a,o,h)}finally{Qn.transition=p,ze=h}return null}function $1(r,a,o,h){do eo();while(Gs!==null);if(($e&6)!==0)throw Error(t(327));o=r.finishedWork;var p=r.finishedLanes;if(o===null)return null;if(r.finishedWork=null,r.finishedLanes=0,o===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var v=o.lanes|o.childLanes;if(et(r,v),r===Dt&&(kt=Dt=null,Bt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||iu||(iu=!0,Sv(Bn,function(){return eo(),null})),v=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||v){v=Qn.transition,Qn.transition=null;var _=ze;ze=1;var R=$e;$e|=4,Jd.current=null,F1(r,o),dv(o,r),u1(ld),Os=!!od,ld=od=null,r.current=o,U1(o),qh(),$e=R,ze=_,Qn.transition=v}else r.current=o;if(iu&&(iu=!1,Gs=r,ou=p),v=r.pendingLanes,v===0&&(Ws=null),uc(o.stateNode),xn(r,rt()),a!==null)for(h=r.onRecoverableError,o=0;o<a.length;o++)p=a[o],h(p.value,{componentStack:p.stack,digest:p.digest});if(au)throw au=!1,r=tf,tf=null,r;return(ou&1)!==0&&r.tag!==0&&eo(),v=r.pendingLanes,(v&1)!==0?r===nf?hl++:(hl=0,nf=r):hl=0,Bs(),null}function eo(){if(Gs!==null){var r=Ls(ou),a=Qn.transition,o=ze;try{if(Qn.transition=null,ze=16>r?16:r,Gs===null)var h=!1;else{if(r=Gs,Gs=null,ou=0,($e&6)!==0)throw Error(t(331));var p=$e;for($e|=4,ge=r.current;ge!==null;){var v=ge,_=v.child;if((ge.flags&16)!==0){var R=v.deletions;if(R!==null){for(var L=0;L<R.length;L++){var $=R[L];for(ge=$;ge!==null;){var te=ge;switch(te.tag){case 0:case 11:case 15:ll(8,te,v)}var ne=te.child;if(ne!==null)ne.return=te,ge=ne;else for(;ge!==null;){te=ge;var ee=te.sibling,de=te.return;if(ov(te),te===$){ge=null;break}if(ee!==null){ee.return=de,ge=ee;break}ge=de}}}var ve=v.alternate;if(ve!==null){var be=ve.child;if(be!==null){ve.child=null;do{var xt=be.sibling;be.sibling=null,be=xt}while(be!==null)}}ge=v}}if((v.subtreeFlags&2064)!==0&&_!==null)_.return=v,ge=_;else e:for(;ge!==null;){if(v=ge,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ll(9,v,v.return)}var B=v.sibling;if(B!==null){B.return=v.return,ge=B;break e}ge=v.return}}var O=r.current;for(ge=O;ge!==null;){_=ge;var H=_.child;if((_.subtreeFlags&2064)!==0&&H!==null)H.return=_,ge=H;else e:for(_=O;ge!==null;){if(R=ge,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:nu(9,R)}}catch(we){bt(R,R.return,we)}if(R===_){ge=null;break e}var ie=R.sibling;if(ie!==null){ie.return=R.return,ge=ie;break e}ge=R.return}}if($e=p,Bs(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Oa,r)}catch{}h=!0}return h}finally{ze=o,Qn.transition=a}}return!1}function kv(r,a,o){a=Yi(o,a),a=Vg(r,a,1),r=$s(r,a,1),a=cn(),r!==null&&(As(r,1,a),xn(r,a))}function bt(r,a,o){if(r.tag===3)kv(r,r,o);else for(;a!==null;){if(a.tag===3){kv(a,r,o);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ws===null||!Ws.has(h))){r=Yi(o,r),r=zg(a,r,1),a=$s(a,r,1),r=cn(),a!==null&&(As(a,1,r),xn(a,r));break}}a=a.return}}function q1(r,a,o){var h=r.pingCache;h!==null&&h.delete(a),a=cn(),r.pingedLanes|=r.suspendedLanes&o,Dt===r&&(Bt&o)===o&&(It===4||It===3&&(Bt&130023424)===Bt&&500>rt()-ef?Ja(r,0):Zd|=o),xn(r,a)}function Ev(r,a){a===0&&((r.mode&1)===0?a=1:(a=ki,ki<<=1,(ki&130023424)===0&&(ki=4194304)));var o=cn();r=os(r,a),r!==null&&(As(r,a,o),xn(r,o))}function W1(r){var a=r.memoizedState,o=0;a!==null&&(o=a.retryLane),Ev(r,o)}function G1(r,a){var o=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(o=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(a),Ev(r,o)}var Nv;Nv=function(r,a,o){if(r!==null)if(r.memoizedProps!==a.pendingProps||vn.current)bn=!0;else{if((r.lanes&o)===0&&(a.flags&128)===0)return bn=!1,L1(r,a,o);bn=(r.flags&131072)!==0}else bn=!1,ut&&(a.flags&1048576)!==0&&rg(a,Uc,a.index);switch(a.lanes=0,a.tag){case 2:var h=a.type;eu(r,a),r=a.pendingProps;var p=Bi(a,Kt.current);Ki(a,o),p=Ad(null,a,h,r,p,o);var v=Pd();return a.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,yn(h)?(v=!0,Oc(a)):v=!1,a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Nd(a),p.updater=Jc,a.stateNode=p,p._reactInternals=a,Ud(a,h,r,o),a=Hd(null,a,h,!0,v,o)):(a.tag=0,ut&&v&&md(a),ln(null,a,p,o),a=a.child),a;case 16:h=a.elementType;e:{switch(eu(r,a),r=a.pendingProps,p=h._init,h=p(h._payload),a.type=h,p=a.tag=Q1(h),r=fr(h,r),p){case 0:a=Bd(null,a,h,r,o);break e;case 1:a=Yg(null,a,h,r,o);break e;case 11:a=qg(null,a,h,r,o);break e;case 14:a=Wg(null,a,h,fr(h.type,r),o);break e}throw Error(t(306,h,""))}return a;case 0:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:fr(h,p),Bd(r,a,h,p,o);case 1:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:fr(h,p),Yg(r,a,h,p,o);case 3:e:{if(Xg(a),r===null)throw Error(t(387));h=a.pendingProps,v=a.memoizedState,p=v.element,dg(r,a),qc(a,h,null,o);var _=a.memoizedState;if(h=_.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){p=Yi(Error(t(423)),a),a=Jg(r,a,h,o,p);break e}else if(h!==p){p=Yi(Error(t(424)),a),a=Jg(r,a,h,o,p);break e}else for(Ln=Us(a.stateNode.containerInfo.firstChild),Pn=a,ut=!0,dr=null,o=ug(a,null,h,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(qi(),h===p){a=cs(r,a,o);break e}ln(r,a,h,o)}a=a.child}return a;case 5:return mg(a),r===null&&yd(a),h=a.type,p=a.pendingProps,v=r!==null?r.memoizedProps:null,_=p.children,cd(h,p)?_=null:v!==null&&cd(h,v)&&(a.flags|=32),Qg(r,a),ln(r,a,_,o),a.child;case 6:return r===null&&yd(a),null;case 13:return Zg(r,a,o);case 4:return Sd(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=Wi(a,null,h,o):ln(r,a,h,o),a.child;case 11:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:fr(h,p),qg(r,a,h,p,o);case 7:return ln(r,a,a.pendingProps,o),a.child;case 8:return ln(r,a,a.pendingProps.children,o),a.child;case 12:return ln(r,a,a.pendingProps.children,o),a.child;case 10:e:{if(h=a.type._context,p=a.pendingProps,v=a.memoizedProps,_=p.value,st(Bc,h._currentValue),h._currentValue=_,v!==null)if(hr(v.value,_)){if(v.children===p.children&&!vn.current){a=cs(r,a,o);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var R=v.dependencies;if(R!==null){_=v.child;for(var L=R.firstContext;L!==null;){if(L.context===h){if(v.tag===1){L=ls(-1,o&-o),L.tag=2;var $=v.updateQueue;if($!==null){$=$.shared;var te=$.pending;te===null?L.next=L:(L.next=te.next,te.next=L),$.pending=L}}v.lanes|=o,L=v.alternate,L!==null&&(L.lanes|=o),kd(v.return,o,a),R.lanes|=o;break}L=L.next}}else if(v.tag===10)_=v.type===a.type?null:v.child;else if(v.tag===18){if(_=v.return,_===null)throw Error(t(341));_.lanes|=o,R=_.alternate,R!==null&&(R.lanes|=o),kd(_,o,a),_=v.sibling}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===a){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}ln(r,a,p.children,o),a=a.child}return a;case 9:return p=a.type,h=a.pendingProps.children,Ki(a,o),p=Gn(p),h=h(p),a.flags|=1,ln(r,a,h,o),a.child;case 14:return h=a.type,p=fr(h,a.pendingProps),p=fr(h.type,p),Wg(r,a,h,p,o);case 15:return Gg(r,a,a.type,a.pendingProps,o);case 17:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:fr(h,p),eu(r,a),a.tag=1,yn(h)?(r=!0,Oc(a)):r=!1,Ki(a,o),Fg(a,h,p),Ud(a,h,p,o),Hd(null,a,h,!0,r,o);case 19:return tv(r,a,o);case 22:return Kg(r,a,o)}throw Error(t(156,a.tag))};function Sv(r,a){return xi(r,a)}function K1(r,a,o,h){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(r,a,o,h){return new K1(r,a,o,h)}function cf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Q1(r){if(typeof r=="function")return cf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===Z)return 14}return 2}function Ys(r,a){var o=r.alternate;return o===null?(o=Yn(r.tag,a,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=a,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&14680064,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,a=r.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o}function hu(r,a,o,h,p,v){var _=2;if(h=r,typeof r=="function")cf(r)&&(_=1);else if(typeof r=="string")_=5;else e:switch(r){case A:return ei(o.children,p,v,a);case k:_=8,p|=8;break;case C:return r=Yn(12,o,a,p|2),r.elementType=C,r.lanes=v,r;case I:return r=Yn(13,o,a,p),r.elementType=I,r.lanes=v,r;case Le:return r=Yn(19,o,a,p),r.elementType=Le,r.lanes=v,r;case me:return du(o,p,v,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:_=10;break e;case T:_=9;break e;case D:_=11;break e;case Z:_=14;break e;case Ie:_=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return a=Yn(_,o,a,p),a.elementType=r,a.type=h,a.lanes=v,a}function ei(r,a,o,h){return r=Yn(7,r,h,a),r.lanes=o,r}function du(r,a,o,h){return r=Yn(22,r,h,a),r.elementType=me,r.lanes=o,r.stateNode={isHidden:!1},r}function uf(r,a,o){return r=Yn(6,r,null,a),r.lanes=o,r}function hf(r,a,o){return a=Yn(4,r.children!==null?r.children:[],r.key,a),a.lanes=o,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function Y1(r,a,o,h,p){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=js(0),this.expirationTimes=js(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function df(r,a,o,h,p,v,_,R,L){return r=new Y1(r,a,o,R,L),a===1?(a=1,v===!0&&(a|=8)):a=0,v=Yn(3,null,null,a),r.current=v,v.stateNode=r,v.memoizedState={element:h,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(v),r}function X1(r,a,o){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:h==null?null:""+h,children:r,containerInfo:a,implementation:o}}function Cv(r){if(!r)return zs;r=r._reactInternals;e:{if(sr(r)!==r||r.tag!==1)throw Error(t(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(yn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(r.tag===1){var o=r.type;if(yn(o))return eg(r,o,a)}return a}function Tv(r,a,o,h,p,v,_,R,L){return r=df(o,h,!0,r,p,v,_,R,L),r.context=Cv(null),o=r.current,h=cn(),p=Ks(o),v=ls(h,p),v.callback=a??null,$s(o,v,p),r.current.lanes=p,As(r,p,h),xn(r,h),r}function fu(r,a,o,h){var p=a.current,v=cn(),_=Ks(p);return o=Cv(o),a.context===null?a.context=o:a.pendingContext=o,a=ls(v,_),a.payload={element:r},h=h===void 0?null:h,h!==null&&(a.callback=h),r=$s(p,a,_),r!==null&&(gr(r,p,_,v),$c(r,p,_)),_}function pu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Iv(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<a?o:a}}function ff(r,a){Iv(r,a),(r=r.alternate)&&Iv(r,a)}function J1(){return null}var Rv=typeof reportError=="function"?reportError:function(r){console.error(r)};function pf(r){this._internalRoot=r}mu.prototype.render=pf.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(t(409));fu(r,a,null,null)},mu.prototype.unmount=pf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Xa(function(){fu(null,r,null,null)}),a[rs]=null}};function mu(r){this._internalRoot=r}mu.prototype.unstable_scheduleHydration=function(r){if(r){var a=mc();r={blockedOn:null,target:r,priority:a};for(var o=0;o<Nr.length&&a!==0&&a<Nr[o].priority;o++);Nr.splice(o,0,r),o===0&&yc(r)}};function mf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function gu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function jv(){}function Z1(r,a,o,h,p){if(p){if(typeof h=="function"){var v=h;h=function(){var $=pu(_);v.call($)}}var _=Tv(a,h,r,0,null,!1,!1,"",jv);return r._reactRootContainer=_,r[rs]=_.current,Qo(r.nodeType===8?r.parentNode:r),Xa(),_}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var R=h;h=function(){var $=pu(L);R.call($)}}var L=df(r,0,!1,null,null,!1,!1,"",jv);return r._reactRootContainer=L,r[rs]=L.current,Qo(r.nodeType===8?r.parentNode:r),Xa(function(){fu(a,L,o,h)}),L}function vu(r,a,o,h,p){var v=o._reactRootContainer;if(v){var _=v;if(typeof p=="function"){var R=p;p=function(){var L=pu(_);R.call(L)}}fu(a,_,r,p)}else _=Z1(o,a,r,p,h);return pu(_)}fc=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var o=Rs(a.pendingLanes);o!==0&&(Ps(a,o|1),xn(a,rt()),($e&6)===0&&(Zi=rt()+500,Bs()))}break;case 13:Xa(function(){var h=os(r,1);if(h!==null){var p=cn();gr(h,r,1,p)}}),ff(r,1)}},Ei=function(r){if(r.tag===13){var a=os(r,134217728);if(a!==null){var o=cn();gr(a,r,134217728,o)}ff(r,134217728)}},pc=function(r){if(r.tag===13){var a=Ks(r),o=os(r,a);if(o!==null){var h=cn();gr(o,r,a,h)}ff(r,a)}},mc=function(){return ze},gc=function(r,a){var o=ze;try{return ze=r,a()}finally{ze=o}},Xr=function(r,a,o){switch(a){case"input":if(Ia(r,o),a=o.name,o.type==="radio"&&a!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<o.length;a++){var h=o[a];if(h!==r&&h.form===r.form){var p=Lc(h);if(!p)throw Error(t(90));_r(h),Ia(h,p)}}}break;case"textarea":Cs(r,o);break;case"select":a=o.value,a!=null&&rn(r,!!o.multiple,a,!1)}},Me=af,Qe=Xa;var e_={usingClientEntryPoint:!1,Events:[Jo,Vi,Lc,zn,Se,af]},dl={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t_={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Po(r),r===null?null:r.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||J1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{Oa=yu.inject(t_),In=yu}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e_,_n.createPortal=function(r,a){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(a))throw Error(t(200));return X1(r,a,null,o)},_n.createRoot=function(r,a){if(!mf(r))throw Error(t(299));var o=!1,h="",p=Rv;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(p=a.onRecoverableError)),a=df(r,1,!1,null,null,o,!1,h,p),r[rs]=a.current,Qo(r.nodeType===8?r.parentNode:r),new pf(a)},_n.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Po(a),r=r===null?null:r.stateNode,r},_n.flushSync=function(r){return Xa(r)},_n.hydrate=function(r,a,o){if(!gu(a))throw Error(t(200));return vu(null,r,a,!0,o)},_n.hydrateRoot=function(r,a,o){if(!mf(r))throw Error(t(405));var h=o!=null&&o.hydratedSources||null,p=!1,v="",_=Rv;if(o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(v=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),a=Tv(a,null,r,1,o??null,p,!1,v,_),r[rs]=a.current,Qo(r),h)for(r=0;r<h.length;r++)o=h[r],p=o._getVersion,p=p(o._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[o,p]:a.mutableSourceEagerHydrationData.push(o,p);return new mu(a)},_n.render=function(r,a,o){if(!gu(a))throw Error(t(200));return vu(null,r,a,!1,o)},_n.unmountComponentAtNode=function(r){if(!gu(r))throw Error(t(40));return r._reactRootContainer?(Xa(function(){vu(null,null,r,!1,function(){r._reactRootContainer=null,r[rs]=null})}),!0):!1},_n.unstable_batchedUpdates=af,_n.unstable_renderSubtreeIntoContainer=function(r,a,o,h){if(!gu(o))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return vu(r,a,o,!1,h)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var Hv;function Bb(){if(Hv)return gf.exports;Hv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gf.exports=l_(),gf.exports}var $v;function c_(){if($v)return bu;$v=1;var n=Bb();return bu.createRoot=n.createRoot,bu.hydrateRoot=n.hydrateRoot,bu}var u_=c_();const h_=fp(u_);/**
* react-router v7.13.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/var qv="popstate";function d_(n={}){function e(s,i){let{pathname:l,search:u,hash:d}=s.location;return Lf("",{pathname:l,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:Tl(i)}return p_(e,t,null,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Br(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f_(){return Math.random().toString(36).substring(2,10)}function Wv(n,e){return{usr:n.state,key:n.key,idx:e}}function Lf(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:t,key:e&&e.key||s||f_()}}function Tl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function _o(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function p_(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:l=!1}=s,u=i.history,d="POP",f=null,y=w();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function w(){return(u.state||{idx:null}).idx}function x(){d="POP";let M=w(),X=M==null?null:M-y;y=M,f&&f({action:d,location:U.location,delta:X})}function S(M,X){d="PUSH";let K=Lf(U.location,M,X);y=w()+1;let G=Wv(K,y),re=U.createHref(K);try{u.pushState(G,"",re)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;i.location.assign(re)}l&&f&&f({action:d,location:U.location,delta:1})}function N(M,X){d="REPLACE";let K=Lf(U.location,M,X);y=w();let G=Wv(K,y),re=U.createHref(K);u.replaceState(G,"",re),l&&f&&f({action:d,location:U.location,delta:0})}function V(M){return m_(M)}let U={get action(){return d},get location(){return n(i,u)},listen(M){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(qv,x),f=M,()=>{i.removeEventListener(qv,x),f=null}},createHref(M){return e(i,M)},createURL:V,encodeLocation(M){let X=V(M);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:S,replace:N,go(M){return u.go(M)}};return U}function m_(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Tl(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Hb(n,e,t="/"){return g_(n,e,t,!1)}function g_(n,e,t,s){let i=typeof e=="string"?_o(e):e,l=gs(i.pathname||"/",t);if(l==null)return null;let u=$b(n);v_(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let y=T_(l);d=S_(u[f],y,s)}return d}function $b(n,e=[],t=[],s="",i=!1){let l=(u,d,f=i,y)=>{let w={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(s)&&f)return;mt(w.relativePath.startsWith(s),`Absolute route path "${w.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(s.length)}let x=ps([s,w.relativePath]),S=t.concat(w);u.children&&u.children.length>0&&(mt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),$b(u.children,e,S,x,f)),!(u.path==null&&!u.index)&&e.push({path:x,score:E_(x,u.index),routesMeta:S})};return n.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))l(u,d);else for(let y of qb(u.path))l(u,d,!0,y)}),e}function qb(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return i?[l,""]:[l];let u=qb(s.join("/")),d=[];return d.push(...u.map(f=>f===""?l:[l,f].join("/"))),i&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function v_(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:N_(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var y_=/^:[\w-]+$/,b_=3,w_=2,x_=1,__=10,k_=-2,Gv=n=>n==="*";function E_(n,e){let t=n.split("/"),s=t.length;return t.some(Gv)&&(s+=k_),e&&(s+=w_),t.filter(i=>!Gv(i)).reduce((i,l)=>i+(y_.test(l)?b_:l===""?x_:__),s)}function N_(n,e){return n.length===e.length&&n.slice(0,-1).every((t,s)=>t===e[s])?n[n.length-1]-e[e.length-1]:0}function S_(n,e,t=!1){let{routesMeta:s}=n,i={},l="/",u=[];for(let d=0;d<s.length;++d){let f=s[d],y=d===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",x=Hu({path:f.relativePath,caseSensitive:f.caseSensitive,end:y},w),S=f.route;if(!x&&y&&t&&!s[s.length-1].route.index&&(x=Hu({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},w)),!x)return null;Object.assign(i,x.params),u.push({params:i,pathname:ps([l,x.pathname]),pathnameBase:A_(ps([l,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(l=ps([l,x.pathnameBase]))}return u}function Hu(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=C_(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let l=i[0],u=l.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:s.reduce((f,{paramName:y,isOptional:w},x)=>{if(y==="*"){let N=d[x]||"";u=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const S=d[x];return w&&!S?f[y]=void 0:f[y]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:u,pattern:n}}function C_(n,e=!1,t=!0){Br(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function T_(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function gs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var I_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function R_(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?_o(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Kv(t.substring(1),"/"):l=Kv(t,e)):l=e,{pathname:l,search:P_(s),hash:L_(i)}}function Kv(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vf(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wb(n){let e=j_(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Gb(n,e,t,s=!1){let i;typeof n=="string"?i=_o(n):(i={...n},mt(!i.pathname||!i.pathname.includes("?"),vf("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),vf("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),vf("#","search","hash",i)));let l=n===""||i.pathname==="",u=l?"/":i.pathname,d;if(u==null)d=t;else{let x=e.length-1;if(!s&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),x-=1;i.pathname=S.join("/")}d=x>=0?e[x]:"/"}let f=R_(i,d),y=u&&u!=="/"&&u.endsWith("/"),w=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(y||w)&&(f.pathname+="/"),f}var ps=n=>n.join("/").replace(/\/\/+/g,"/"),A_=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),P_=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,L_=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,D_=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function O_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function M_(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Kb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qb(n,e){let t=n;if(typeof t!="string"||!I_.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(Kb)try{let l=new URL(window.location.href),u=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=gs(u.pathname,e);u.origin===l.origin&&d!=null?t=d+u.search+u.hash:i=!0}catch{Br(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Yb=["POST","PUT","PATCH","DELETE"];new Set(Yb);var F_=["GET",...Yb];new Set(F_);var ko=j.createContext(null);ko.displayName="DataRouter";var fh=j.createContext(null);fh.displayName="DataRouterState";var U_=j.createContext(!1),Xb=j.createContext({isTransitioning:!1});Xb.displayName="ViewTransition";var V_=j.createContext(new Map);V_.displayName="Fetchers";var z_=j.createContext(null);z_.displayName="Await";var er=j.createContext(null);er.displayName="Navigation";var Bl=j.createContext(null);Bl.displayName="Location";var xs=j.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var mp=j.createContext(null);mp.displayName="RouteError";var Jb="REACT_ROUTER_ERROR",B_="REDIRECT",H_="ROUTE_ERROR_RESPONSE";function $_(n){if(n.startsWith(`${Jb}:${B_}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function q_(n){if(n.startsWith(`${Jb}:${H_}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new D_(e.status,e.statusText,e.data)}catch{}}function W_(n,{relative:e}={}){mt(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=j.useContext(er),{hash:i,pathname:l,search:u}=$l(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:ps([t,l])),s.createHref({pathname:d,search:u,hash:i})}function Hl(){return j.useContext(Bl)!=null}function $r(){return mt(Hl(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Bl).location}var Zb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function e0(n){j.useContext(er).static||j.useLayoutEffect(n)}function ph(){let{isDataRoute:n}=j.useContext(xs);return n?ak():G_()}function G_(){mt(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(ko),{basename:e,navigator:t}=j.useContext(er),{matches:s}=j.useContext(xs),{pathname:i}=$r(),l=JSON.stringify(Wb(s)),u=j.useRef(!1);return e0(()=>{u.current=!0}),j.useCallback((d,f={})=>{if(Br(u.current,Zb),!u.current)return;if(typeof d=="number"){t.go(d);return}let y=Gb(d,JSON.parse(l),i,f.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ps([e,y.pathname])),(f.replace?t.replace:t.push)(y,f.state,f)},[e,t,l,i,n])}j.createContext(null);function $l(n,{relative:e}={}){let{matches:t}=j.useContext(xs),{pathname:s}=$r(),i=JSON.stringify(Wb(t));return j.useMemo(()=>Gb(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function K_(n,e){return t0(n,e)}function t0(n,e,t,s,i){var l;mt(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(er),{matches:d}=j.useContext(xs),f=d[d.length-1],y=f?f.params:{},w=f?f.pathname:"/",x=f?f.pathnameBase:"/",S=f&&f.route;{let G=S&&S.path||"";r0(w,!S||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let N=$r(),V;if(e){let G=typeof e=="string"?_o(e):e;mt(x==="/"||((l=G.pathname)==null?void 0:l.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${G.pathname}" was given in the \`location\` prop.`),V=G}else V=N;let U=V.pathname||"/",M=U;if(x!=="/"){let G=x.replace(/^\//,"").split("/");M="/"+U.replace(/^\//,"").split("/").slice(G.length).join("/")}let X=Hb(n,{pathname:M});Br(S||X!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),Br(X==null||X[X.length-1].route.element!==void 0||X[X.length-1].route.Component!==void 0||X[X.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=Z_(X&&X.map(G=>Object.assign({},G,{params:Object.assign({},y,G.params),pathname:ps([x,u.encodeLocation?u.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?x:ps([x,u.encodeLocation?u.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),d,t,s,i);return e&&K?j.createElement(Bl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},K):K}function Q_(){let n=sk(),e=O_(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:i},t):null,u)}var Y_=j.createElement(Q_,null),n0=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=q_(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(xs.Provider,{value:this.props.routeContext},j.createElement(mp.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(X_,{error:n},e):e}};n0.contextType=U_;var yf=new WeakMap;function X_({children:n,error:e}){let{basename:t}=j.useContext(er);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=$_(e.digest);if(s){let i=yf.get(e);if(i)throw i;let l=Qb(s.location,t);if(Kb&&!yf.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw yf.set(e,u),u}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function J_({routeContext:n,match:e,children:t}){let s=j.useContext(ko);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(xs.Provider,{value:n},t)}function Z_(n,e=[],t=null,s=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=t==null?void 0:t.errors;if(u!=null){let w=l.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id])!==void 0);mt(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,w+1))}let d=!1,f=-1;if(t)for(let w=0;w<l.length;w++){let x=l[w];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=w),x.route.id){let{loaderData:S,errors:N}=t,V=x.route.loader&&!S.hasOwnProperty(x.route.id)&&(!N||N[x.route.id]===void 0);if(x.route.lazy||V){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}let y=t&&s?(w,x)=>{var S,N;s(w,{location:t.location,params:((N=(S=t.matches)==null?void 0:S[0])==null?void 0:N.params)??{},unstable_pattern:M_(t.matches),errorInfo:x})}:void 0;return l.reduceRight((w,x,S)=>{let N,V=!1,U=null,M=null;t&&(N=u&&x.route.id?u[x.route.id]:void 0,U=x.route.errorElement||Y_,d&&(f<0&&S===0?(r0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,M=null):f===S&&(V=!0,M=x.route.hydrateFallbackElement||null)));let X=e.concat(l.slice(0,S+1)),K=()=>{let G;return N?G=U:V?G=M:x.route.Component?G=j.createElement(x.route.Component,null):x.route.element?G=x.route.element:G=w,j.createElement(J_,{match:x,routeContext:{outlet:w,matches:X,isDataRoute:t!=null},children:G})};return t&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?j.createElement(n0,{location:t.location,revalidation:t.revalidation,component:U,error:N,children:K(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:y}):K()},null)}function gp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ek(n){let e=j.useContext(ko);return mt(e,gp(n)),e}function tk(n){let e=j.useContext(fh);return mt(e,gp(n)),e}function nk(n){let e=j.useContext(xs);return mt(e,gp(n)),e}function vp(n){let e=nk(n),t=e.matches[e.matches.length-1];return mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function rk(){return vp("useRouteId")}function sk(){var n;let e=j.useContext(mp),t=tk("useRouteError"),s=vp("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function ak(){let{router:n}=ek("useNavigate"),e=vp("useNavigate"),t=j.useRef(!1);return e0(()=>{t.current=!0}),j.useCallback(async(s,i={})=>{Br(t.current,Zb),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...i}))},[n,e])}var Qv={};function r0(n,e,t){!e&&!Qv[n]&&(Qv[n]=!0,Br(!1,t))}j.memo(ik);function ik({routes:n,future:e,state:t,onError:s}){return t0(n,void 0,t,s,e)}function hs(n){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ok({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:l=!1,unstable_useTransitions:u}){mt(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:d,navigator:i,static:l,unstable_useTransitions:u,future:{}}),[d,i,l,u]);typeof t=="string"&&(t=_o(t));let{pathname:y="/",search:w="",hash:x="",state:S=null,key:N="default"}=t,V=j.useMemo(()=>{let U=gs(y,d);return U==null?null:{location:{pathname:U,search:w,hash:x,state:S,key:N},navigationType:s}},[d,y,w,x,S,N,s]);return Br(V!=null,`<Router basename="${d}"> is not able to match the URL "${y}${w}${x}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:j.createElement(er.Provider,{value:f},j.createElement(Bl.Provider,{children:e,value:V}))}function lk({children:n,location:e}){return K_(Df(n),e)}function Df(n,e=[]){let t=[];return j.Children.forEach(n,(s,i)=>{if(!j.isValidElement(s))return;let l=[...e,i];if(s.type===j.Fragment){t.push.apply(t,Df(s.props.children,l));return}mt(s.type===hs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Df(s.props.children,l)),t.push(u)}),t}var ju="get",Au="application/x-www-form-urlencoded";function mh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ck(n){return mh(n)&&n.tagName.toLowerCase()==="button"}function uk(n){return mh(n)&&n.tagName.toLowerCase()==="form"}function hk(n){return mh(n)&&n.tagName.toLowerCase()==="input"}function dk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function fk(n,e){return n.button===0&&(!e||e==="_self")&&!dk(n)}var wu=null;function pk(){if(wu===null)try{new FormData(document.createElement("form"),0),wu=!1}catch{wu=!0}return wu}var mk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bf(n){return n!=null&&!mk.has(n)?(Br(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Au}"`),null):n}function gk(n,e){let t,s,i,l,u;if(uk(n)){let d=n.getAttribute("action");s=d?gs(d,e):null,t=n.getAttribute("method")||ju,i=bf(n.getAttribute("enctype"))||Au,l=new FormData(n)}else if(ck(n)||hk(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(s=f?gs(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||ju,i=bf(n.getAttribute("formenctype"))||bf(d.getAttribute("enctype"))||Au,l=new FormData(d,n),!pk()){let{name:y,type:w,value:x}=n;if(w==="image"){let S=y?`${y}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else y&&l.append(y,x)}}else{if(mh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ju,s=null,i=Au,u=n}return l&&i==="text/plain"&&(u=l,l=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vk(n,e,t,s){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${s}`:i.pathname=`${i.pathname}.${s}`:i.pathname==="/"?i.pathname=`_root.${s}`:e&&gs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function yk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bk(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function wk(n,e,t){let s=await Promise.all(n.map(async i=>{let l=e.routes[i.route.id];if(l){let u=await yk(l,t);return u.links?u.links():[]}return[]}));return Ek(s.flat(1).filter(bk).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Yv(n,e,t,s,i,l){let u=(f,y)=>t[y]?f.route.id!==t[y].route.id:!0,d=(f,y)=>{var w;return t[y].pathname!==f.pathname||((w=t[y].route.path)==null?void 0:w.endsWith("*"))&&t[y].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,y)=>u(f,y)||d(f,y)):l==="data"?e.filter((f,y)=>{var w;let x=s.routes[f.route.id];if(!x||!x.hasLoader)return!1;if(u(f,y)||d(f,y))return!0;if(f.route.shouldRevalidate){let S=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function xk(n,e,{includeHydrateFallback:t}={}){return _k(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function _k(n){return[...new Set(n)]}function kk(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function Ek(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let l=JSON.stringify(kk(i));return t.has(l)||(t.add(l),s.push({key:l,link:i})),s},[])}function s0(){let n=j.useContext(ko);return yp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Nk(){let n=j.useContext(fh);return yp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var bp=j.createContext(void 0);bp.displayName="FrameworkContext";function a0(){let n=j.useContext(bp);return yp(n,"You must render this element inside a <HydratedRouter> element"),n}function Sk(n,e){let t=j.useContext(bp),[s,i]=j.useState(!1),[l,u]=j.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:y,onMouseLeave:w,onTouchStart:x}=e,S=j.useRef(null);j.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let U=X=>{X.forEach(K=>{u(K.isIntersecting)})},M=new IntersectionObserver(U,{threshold:.5});return S.current&&M.observe(S.current),()=>{M.disconnect()}}},[n]),j.useEffect(()=>{if(s){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[s]);let N=()=>{i(!0)},V=()=>{i(!1),u(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:pl(d,N),onBlur:pl(f,V),onMouseEnter:pl(y,N),onMouseLeave:pl(w,V),onTouchStart:pl(x,N)}]:[!1,S,{}]}function pl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Ck({page:n,...e}){let{router:t}=s0(),s=j.useMemo(()=>Hb(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?j.createElement(Ik,{page:n,matches:s,...e}):null}function Tk(n){let{manifest:e,routeModules:t}=a0(),[s,i]=j.useState([]);return j.useEffect(()=>{let l=!1;return wk(n,e,t).then(u=>{l||i(u)}),()=>{l=!0}},[n,e,t]),s}function Ik({page:n,matches:e,...t}){let s=$r(),{future:i,manifest:l,routeModules:u}=a0(),{basename:d}=s0(),{loaderData:f,matches:y}=Nk(),w=j.useMemo(()=>Yv(n,e,y,l,s,"data"),[n,e,y,l,s]),x=j.useMemo(()=>Yv(n,e,y,l,s,"assets"),[n,e,y,l,s]),S=j.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let U=new Set,M=!1;if(e.forEach(K=>{var G;let re=l.routes[K.route.id];!re||!re.hasLoader||(!w.some(fe=>fe.route.id===K.route.id)&&K.route.id in f&&(G=u[K.route.id])!=null&&G.shouldRevalidate||re.hasClientLoader?M=!0:U.add(K.route.id))}),U.size===0)return[];let X=vk(n,d,i.unstable_trailingSlashAwareDataRequests,"data");return M&&U.size>0&&X.searchParams.set("_routes",e.filter(K=>U.has(K.route.id)).map(K=>K.route.id).join(",")),[X.pathname+X.search]},[d,i.unstable_trailingSlashAwareDataRequests,f,s,l,w,e,n,u]),N=j.useMemo(()=>xk(x,l),[x,l]),V=Tk(x);return j.createElement(j.Fragment,null,S.map(U=>j.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),N.map(U=>j.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),V.map(({key:U,link:M})=>j.createElement("link",{key:U,nonce:t.nonce,...M,crossOrigin:M.crossOrigin??t.crossOrigin})))}function Rk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jk&&(window.__reactRouterVersion="7.13.0")}catch{}function Ak({basename:n,children:e,unstable_useTransitions:t,window:s}){let i=j.useRef();i.current==null&&(i.current=d_({window:s,v5Compat:!0}));let l=i.current,[u,d]=j.useState({action:l.action,location:l.location}),f=j.useCallback(y=>{t===!1?d(y):j.startTransition(()=>d(y))},[t]);return j.useLayoutEffect(()=>l.listen(f),[l,f]),j.createElement(ok,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:t})}var i0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oo=j.forwardRef(function({onClick:n,discover:e="render",prefetch:t="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:f,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:x,...S},N){let{basename:V,unstable_useTransitions:U}=j.useContext(er),M=typeof f=="string"&&i0.test(f),X=Qb(f,V);f=X.to;let K=W_(f,{relative:s}),[G,re,fe]=Sk(t,S),Q=Ok(f,{replace:l,state:u,target:d,preventScrollReset:y,relative:s,viewTransition:w,unstable_defaultShouldRevalidate:x,unstable_useTransitions:U});function A(C){n&&n(C),C.defaultPrevented||Q(C)}let k=j.createElement("a",{...S,...fe,href:X.absoluteURL||K,onClick:X.isExternal||i?n:A,ref:Rk(N,re),target:d,"data-discover":!M&&e==="render"?"true":void 0});return G&&!M?j.createElement(j.Fragment,null,k,j.createElement(Ck,{page:K})):k});oo.displayName="Link";var Pk=j.forwardRef(function({"aria-current":n="page",caseSensitive:e=!1,className:t="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...f},y){let w=$l(l,{relative:f.relative}),x=$r(),S=j.useContext(fh),{navigator:N,basename:V}=j.useContext(er),U=S!=null&&zk(w)&&u===!0,M=N.encodeLocation?N.encodeLocation(w).pathname:w.pathname,X=x.pathname,K=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;e||(X=X.toLowerCase(),K=K?K.toLowerCase():null,M=M.toLowerCase()),K&&V&&(K=gs(K,V)||K);const G=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let re=X===M||!s&&X.startsWith(M)&&X.charAt(G)==="/",fe=K!=null&&(K===M||!s&&K.startsWith(M)&&K.charAt(M.length)==="/"),Q={isActive:re,isPending:fe,isTransitioning:U},A=re?n:void 0,k;typeof t=="function"?k=t(Q):k=[t,re?"active":null,fe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(Q):i;return j.createElement(oo,{...f,"aria-current":A,className:k,ref:y,style:C,to:l,viewTransition:u},typeof d=="function"?d(Q):d)});Pk.displayName="NavLink";var Lk=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:l,method:u=ju,action:d,onSubmit:f,relative:y,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:S,...N},V)=>{let{unstable_useTransitions:U}=j.useContext(er),M=Uk(),X=Vk(d,{relative:y}),K=u.toLowerCase()==="get"?"get":"post",G=typeof d=="string"&&i0.test(d),re=fe=>{if(f&&f(fe),fe.defaultPrevented)return;fe.preventDefault();let Q=fe.nativeEvent.submitter,A=(Q==null?void 0:Q.getAttribute("formmethod"))||u,k=()=>M(Q||fe.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:i,state:l,relative:y,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:S});U&&t!==!1?j.startTransition(()=>k()):k()};return j.createElement("form",{ref:V,method:K,action:X,onSubmit:s?f:re,...N,"data-discover":!G&&n==="render"?"true":void 0})});Lk.displayName="Form";function Dk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o0(n){let e=j.useContext(ko);return mt(e,Dk(n)),e}function Ok(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let y=ph(),w=$r(),x=$l(n,{relative:l});return j.useCallback(S=>{if(fk(S,e)){S.preventDefault();let N=t!==void 0?t:Tl(w)===Tl(x),V=()=>y(n,{replace:N,state:s,preventScrollReset:i,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:d});f?j.startTransition(()=>V()):V()}},[w,y,x,t,s,e,n,i,l,u,d,f])}var Mk=0,Fk=()=>`__${String(++Mk)}__`;function Uk(){let{router:n}=o0("useSubmit"),{basename:e}=j.useContext(er),t=rk(),s=n.fetch,i=n.navigate;return j.useCallback(async(l,u={})=>{let{action:d,method:f,encType:y,formData:w,body:x}=gk(l,e);if(u.navigate===!1){let S=u.fetcherKey||Fk();await s(S,t,u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:x,formMethod:u.method||f,formEncType:u.encType||y,flushSync:u.flushSync})}else await i(u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:x,formMethod:u.method||f,formEncType:u.encType||y,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[s,i,e,t])}function Vk(n,{relative:e}={}){let{basename:t}=j.useContext(er),s=j.useContext(xs);mt(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),l={...$l(n||".",{relative:e})},u=$r();if(n==null){l.search=u.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(y=>y==="")){d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ps([t,l.pathname])),Tl(l)}function zk(n,{relative:e}={}){let t=j.useContext(Xb);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=o0("useViewTransitionState"),i=$l(n,{relative:e});if(!t.isTransitioning)return!1;let l=gs(t.currentLocation.pathname,s)||t.currentLocation.pathname,u=gs(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Hu(i.pathname,u)!=null||Hu(i.pathname,l)!=null}var Bk=Bb();const Hk=fp(Bk);var $k=n=>{switch(n){case"success":return Gk;case"info":return Qk;case"warning":return Kk;case"error":return Yk;default:return null}},qk=Array(12).fill(0),Wk=({visible:n,className:e})=>ue.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ue.createElement("div",{className:"sonner-spinner"},qk.map((t,s)=>ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),Gk=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Kk=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Qk=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Yk=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Xk=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Jk=()=>{let[n,e]=ue.useState(document.hidden);return ue.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},Of=1,Zk=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...s}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:Of++,l=this.toasts.find(d=>d.id===i),u=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...n,id:i,title:t}),{...d,...n,id:i,dismissible:u,title:t}):d):this.addToast({title:t,...s,dismissible:u,id:i}),i},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=n instanceof Promise?n:n(),i=t!==void 0,l,u=s.then(async f=>{if(l=["resolve",f],ue.isValidElement(f))i=!1,this.create({id:t,type:"default",message:f});else if(tE(f)&&!f.ok){i=!1;let y=typeof e.error=="function"?await e.error(`HTTP error! status: ${f.status}`):e.error,w=typeof e.description=="function"?await e.description(`HTTP error! status: ${f.status}`):e.description;this.create({id:t,type:"error",message:y,description:w})}else if(e.success!==void 0){i=!1;let y=typeof e.success=="function"?await e.success(f):e.success,w=typeof e.description=="function"?await e.description(f):e.description;this.create({id:t,type:"success",message:y,description:w})}}).catch(async f=>{if(l=["reject",f],e.error!==void 0){i=!1;let y=typeof e.error=="function"?await e.error(f):e.error,w=typeof e.description=="function"?await e.description(f):e.description;this.create({id:t,type:"error",message:y,description:w})}}).finally(()=>{var f;i&&(this.dismiss(t),t=void 0),(f=e.finally)==null||f.call(e)}),d=()=>new Promise((f,y)=>u.then(()=>l[0]==="reject"?y(l[1]):f(l[1])).catch(y));return typeof t!="string"&&typeof t!="number"?{unwrap:d}:Object.assign(t,{unwrap:d})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||Of++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},kn=new Zk,eE=(n,e)=>{let t=(e==null?void 0:e.id)||Of++;return kn.addToast({title:n,...e,id:t}),t},tE=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",nE=eE,rE=()=>kn.toasts,sE=()=>kn.getActiveToasts(),He=Object.assign(nE,{success:kn.success,info:kn.info,warning:kn.warning,error:kn.error,custom:kn.custom,message:kn.message,promise:kn.promise,dismiss:kn.dismiss,loading:kn.loading},{getHistory:rE,getToasts:sE});function aE(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}aE(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xu(n){return n.label!==void 0}var iE=3,oE="32px",lE="16px",Xv=4e3,cE=356,uE=14,hE=20,dE=200;function vr(...n){return n.filter(Boolean).join(" ")}function fE(n){let[e,t]=n.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var pE=n=>{var e,t,s,i,l,u,d,f,y,w,x;let{invert:S,toast:N,unstyled:V,interacting:U,setHeights:M,visibleToasts:X,heights:K,index:G,toasts:re,expanded:fe,removeToast:Q,defaultRichColors:A,closeButton:k,style:C,cancelButtonStyle:P,actionButtonStyle:T,className:D="",descriptionClassName:I="",duration:Le,position:Z,gap:Ie,loadingIcon:me,expandByDefault:ae,classNames:se,icons:oe,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:q}=n,[le,ye]=ue.useState(null),[Ne,Pe]=ue.useState(null),[_e,Ve]=ue.useState(!1),[qe,ht]=ue.useState(!1),[nn,_r]=ue.useState(!1),[tr,Wr]=ue.useState(!1),[_s,ks]=ue.useState(!1),[Ia,Es]=ue.useState(0),[Ns,Fn]=ue.useState(0),rn=ue.useRef(N.duration||Le||Xv),Ss=ue.useRef(null),hn=ue.useRef(null),Cs=G===0,Ra=G+1<=X,We=N.type,nt=N.dismissible!==!1,nr=N.className||"",ja=N.descriptionClassName||"",Tn=ue.useMemo(()=>K.findIndex(Se=>Se.toastId===N.id)||0,[K,N.id]),Gr=ue.useMemo(()=>{var Se;return(Se=N.closeButton)!=null?Se:k},[N.closeButton,k]),kr=ue.useMemo(()=>N.duration||Le||Xv,[N.duration,Le]),Kr=ue.useRef(0),Un=ue.useRef(0),Ts=ue.useRef(0),Vn=ue.useRef(null),[Aa,Qr]=Z.split("-"),Yr=ue.useMemo(()=>K.reduce((Se,Me,Qe)=>Qe>=Tn?Se:Se+Me.height,0),[K,Tn]),Xr=Jk(),dn=N.invert||S,fn=We==="loading";Un.current=ue.useMemo(()=>Tn*Ie+Yr,[Tn,Yr]),ue.useEffect(()=>{rn.current=kr},[kr]),ue.useEffect(()=>{Ve(!0)},[]),ue.useEffect(()=>{let Se=hn.current;if(Se){let Me=Se.getBoundingClientRect().height;return Fn(Me),M(Qe=>[{toastId:N.id,height:Me,position:N.position},...Qe]),()=>M(Qe=>Qe.filter(wt=>wt.toastId!==N.id))}},[M,N.id]),ue.useLayoutEffect(()=>{if(!_e)return;let Se=hn.current,Me=Se.style.height;Se.style.height="auto";let Qe=Se.getBoundingClientRect().height;Se.style.height=Me,Fn(Qe),M(wt=>wt.find(Ft=>Ft.toastId===N.id)?wt.map(Ft=>Ft.toastId===N.id?{...Ft,height:Qe}:Ft):[{toastId:N.id,height:Qe,position:N.position},...wt])},[_e,N.title,N.description,M,N.id]);let sn=ue.useCallback(()=>{ht(!0),Es(Un.current),M(Se=>Se.filter(Me=>Me.toastId!==N.id)),setTimeout(()=>{Q(N)},dE)},[N,Q,M,Un]);ue.useEffect(()=>{if(N.promise&&We==="loading"||N.duration===1/0||N.type==="loading")return;let Se;return fe||U||q&&Xr?(()=>{if(Ts.current<Kr.current){let Me=new Date().getTime()-Kr.current;rn.current=rn.current-Me}Ts.current=new Date().getTime()})():rn.current!==1/0&&(Kr.current=new Date().getTime(),Se=setTimeout(()=>{var Me;(Me=N.onAutoClose)==null||Me.call(N,N),sn()},rn.current)),()=>clearTimeout(Se)},[fe,U,N,We,q,Xr,sn]),ue.useEffect(()=>{N.delete&&sn()},[sn,N.delete]);function zn(){var Se,Me,Qe;return oe!=null&&oe.loading?ue.createElement("div",{className:vr(se==null?void 0:se.loader,(Se=N==null?void 0:N.classNames)==null?void 0:Se.loader,"sonner-loader"),"data-visible":We==="loading"},oe.loading):me?ue.createElement("div",{className:vr(se==null?void 0:se.loader,(Me=N==null?void 0:N.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":We==="loading"},me):ue.createElement(Wk,{className:vr(se==null?void 0:se.loader,(Qe=N==null?void 0:N.classNames)==null?void 0:Qe.loader),visible:We==="loading"})}return ue.createElement("li",{tabIndex:0,ref:hn,className:vr(D,nr,se==null?void 0:se.toast,(e=N==null?void 0:N.classNames)==null?void 0:e.toast,se==null?void 0:se.default,se==null?void 0:se[We],(t=N==null?void 0:N.classNames)==null?void 0:t[We]),"data-sonner-toast":"","data-rich-colors":(s=N.richColors)!=null?s:A,"data-styled":!(N.jsx||N.unstyled||V),"data-mounted":_e,"data-promise":!!N.promise,"data-swiped":_s,"data-removed":qe,"data-visible":Ra,"data-y-position":Aa,"data-x-position":Qr,"data-index":G,"data-front":Cs,"data-swiping":nn,"data-dismissible":nt,"data-type":We,"data-invert":dn,"data-swipe-out":tr,"data-swipe-direction":Ne,"data-expanded":!!(fe||ae&&_e),style:{"--index":G,"--toasts-before":G,"--z-index":re.length-G,"--offset":`${qe?Ia:Un.current}px`,"--initial-height":ae?"auto":`${Ns}px`,...C,...N.style},onDragEnd:()=>{_r(!1),ye(null),Vn.current=null},onPointerDown:Se=>{fn||!nt||(Ss.current=new Date,Es(Un.current),Se.target.setPointerCapture(Se.pointerId),Se.target.tagName!=="BUTTON"&&(_r(!0),Vn.current={x:Se.clientX,y:Se.clientY}))},onPointerUp:()=>{var Se,Me,Qe,wt;if(tr||!nt)return;Vn.current=null;let Ft=Number(((Se=hn.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ye=Number(((Me=hn.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pn=new Date().getTime()-((Qe=Ss.current)==null?void 0:Qe.getTime()),dt=le==="x"?Ft:Ye,Gt=Math.abs(dt)/pn;if(Math.abs(dt)>=hE||Gt>.11){Es(Un.current),(wt=N.onDismiss)==null||wt.call(N,N),Pe(le==="x"?Ft>0?"right":"left":Ye>0?"down":"up"),sn(),Wr(!0),ks(!1);return}_r(!1),ye(null)},onPointerMove:Se=>{var Me,Qe,wt,Ft;if(!Vn.current||!nt||((Me=window.getSelection())==null?void 0:Me.toString().length)>0)return;let Ye=Se.clientY-Vn.current.y,pn=Se.clientX-Vn.current.x,dt=(Qe=n.swipeDirections)!=null?Qe:fE(Z);!le&&(Math.abs(pn)>1||Math.abs(Ye)>1)&&ye(Math.abs(pn)>Math.abs(Ye)?"x":"y");let Gt={x:0,y:0};le==="y"?(dt.includes("top")||dt.includes("bottom"))&&(dt.includes("top")&&Ye<0||dt.includes("bottom")&&Ye>0)&&(Gt.y=Ye):le==="x"&&(dt.includes("left")||dt.includes("right"))&&(dt.includes("left")&&pn<0||dt.includes("right")&&pn>0)&&(Gt.x=pn),(Math.abs(Gt.x)>0||Math.abs(Gt.y)>0)&&ks(!0),(wt=hn.current)==null||wt.style.setProperty("--swipe-amount-x",`${Gt.x}px`),(Ft=hn.current)==null||Ft.style.setProperty("--swipe-amount-y",`${Gt.y}px`)}},Gr&&!N.jsx?ue.createElement("button",{"aria-label":F,"data-disabled":fn,"data-close-button":!0,onClick:fn||!nt?()=>{}:()=>{var Se;sn(),(Se=N.onDismiss)==null||Se.call(N,N)},className:vr(se==null?void 0:se.closeButton,(i=N==null?void 0:N.classNames)==null?void 0:i.closeButton)},(l=oe==null?void 0:oe.close)!=null?l:Xk):null,N.jsx||j.isValidElement(N.title)?N.jsx?N.jsx:typeof N.title=="function"?N.title():N.title:ue.createElement(ue.Fragment,null,We||N.icon||N.promise?ue.createElement("div",{"data-icon":"",className:vr(se==null?void 0:se.icon,(u=N==null?void 0:N.classNames)==null?void 0:u.icon)},N.promise||N.type==="loading"&&!N.icon?N.icon||zn():null,N.type!=="loading"?N.icon||(oe==null?void 0:oe[We])||$k(We):null):null,ue.createElement("div",{"data-content":"",className:vr(se==null?void 0:se.content,(d=N==null?void 0:N.classNames)==null?void 0:d.content)},ue.createElement("div",{"data-title":"",className:vr(se==null?void 0:se.title,(f=N==null?void 0:N.classNames)==null?void 0:f.title)},typeof N.title=="function"?N.title():N.title),N.description?ue.createElement("div",{"data-description":"",className:vr(I,ja,se==null?void 0:se.description,(y=N==null?void 0:N.classNames)==null?void 0:y.description)},typeof N.description=="function"?N.description():N.description):null),j.isValidElement(N.cancel)?N.cancel:N.cancel&&xu(N.cancel)?ue.createElement("button",{"data-button":!0,"data-cancel":!0,style:N.cancelButtonStyle||P,onClick:Se=>{var Me,Qe;xu(N.cancel)&&nt&&((Qe=(Me=N.cancel).onClick)==null||Qe.call(Me,Se),sn())},className:vr(se==null?void 0:se.cancelButton,(w=N==null?void 0:N.classNames)==null?void 0:w.cancelButton)},N.cancel.label):null,j.isValidElement(N.action)?N.action:N.action&&xu(N.action)?ue.createElement("button",{"data-button":!0,"data-action":!0,style:N.actionButtonStyle||T,onClick:Se=>{var Me,Qe;xu(N.action)&&((Qe=(Me=N.action).onClick)==null||Qe.call(Me,Se),!Se.defaultPrevented&&sn())},className:vr(se==null?void 0:se.actionButton,(x=N==null?void 0:N.classNames)==null?void 0:x.actionButton)},N.action.label):null))};function Jv(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function mE(n,e){let t={};return[n,e].forEach((s,i)=>{let l=i===1,u=l?"--mobile-offset":"--offset",d=l?lE:oE;function f(y){["top","right","bottom","left"].forEach(w=>{t[`${u}-${w}`]=typeof y=="number"?`${y}px`:y})}typeof s=="number"||typeof s=="string"?f(s):typeof s=="object"?["top","right","bottom","left"].forEach(y=>{s[y]===void 0?t[`${u}-${y}`]=d:t[`${u}-${y}`]=typeof s[y]=="number"?`${s[y]}px`:s[y]}):f(d)}),t}var gE=j.forwardRef(function(n,e){let{invert:t,position:s="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:u,className:d,offset:f,mobileOffset:y,theme:w="light",richColors:x,duration:S,style:N,visibleToasts:V=iE,toastOptions:U,dir:M=Jv(),gap:X=uE,loadingIcon:K,icons:G,containerAriaLabel:re="Notifications",pauseWhenPageIsHidden:fe}=n,[Q,A]=ue.useState([]),k=ue.useMemo(()=>Array.from(new Set([s].concat(Q.filter(q=>q.position).map(q=>q.position)))),[Q,s]),[C,P]=ue.useState([]),[T,D]=ue.useState(!1),[I,Le]=ue.useState(!1),[Z,Ie]=ue.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),me=ue.useRef(null),ae=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),se=ue.useRef(null),oe=ue.useRef(!1),F=ue.useCallback(q=>{A(le=>{var ye;return(ye=le.find(Ne=>Ne.id===q.id))!=null&&ye.delete||kn.dismiss(q.id),le.filter(({id:Ne})=>Ne!==q.id)})},[]);return ue.useEffect(()=>kn.subscribe(q=>{if(q.dismiss){A(le=>le.map(ye=>ye.id===q.id?{...ye,delete:!0}:ye));return}setTimeout(()=>{Hk.flushSync(()=>{A(le=>{let ye=le.findIndex(Ne=>Ne.id===q.id);return ye!==-1?[...le.slice(0,ye),{...le[ye],...q},...le.slice(ye+1)]:[q,...le]})})})}),[]),ue.useEffect(()=>{if(w!=="system"){Ie(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ie("dark"):Ie("light")),typeof window>"u")return;let q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:le})=>{Ie(le?"dark":"light")})}catch{q.addListener(({matches:le})=>{try{Ie(le?"dark":"light")}catch(ye){console.error(ye)}})}},[w]),ue.useEffect(()=>{Q.length<=1&&D(!1)},[Q]),ue.useEffect(()=>{let q=le=>{var ye,Ne;i.every(Pe=>le[Pe]||le.code===Pe)&&(D(!0),(ye=me.current)==null||ye.focus()),le.code==="Escape"&&(document.activeElement===me.current||(Ne=me.current)!=null&&Ne.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[i]),ue.useEffect(()=>{if(me.current)return()=>{se.current&&(se.current.focus({preventScroll:!0}),se.current=null,oe.current=!1)}},[me.current]),ue.createElement("section",{ref:e,"aria-label":`${re} ${ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((q,le)=>{var ye;let[Ne,Pe]=q.split("-");return Q.length?ue.createElement("ol",{key:q,dir:M==="auto"?Jv():M,tabIndex:-1,ref:me,className:d,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":Ne,"data-lifted":T&&Q.length>1&&!l,"data-x-position":Pe,style:{"--front-toast-height":`${((ye=C[0])==null?void 0:ye.height)||0}px`,"--width":`${cE}px`,"--gap":`${X}px`,...N,...mE(f,y)},onBlur:_e=>{oe.current&&!_e.currentTarget.contains(_e.relatedTarget)&&(oe.current=!1,se.current&&(se.current.focus({preventScroll:!0}),se.current=null))},onFocus:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,se.current=_e.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{I||D(!1)},onDragEnd:()=>D(!1),onPointerDown:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||Le(!0)},onPointerUp:()=>Le(!1)},Q.filter(_e=>!_e.position&&le===0||_e.position===q).map((_e,Ve)=>{var qe,ht;return ue.createElement(pE,{key:_e.id,icons:G,index:Ve,toast:_e,defaultRichColors:x,duration:(qe=U==null?void 0:U.duration)!=null?qe:S,className:U==null?void 0:U.className,descriptionClassName:U==null?void 0:U.descriptionClassName,invert:t,visibleToasts:V,closeButton:(ht=U==null?void 0:U.closeButton)!=null?ht:u,interacting:I,position:q,style:U==null?void 0:U.style,unstyled:U==null?void 0:U.unstyled,classNames:U==null?void 0:U.classNames,cancelButtonStyle:U==null?void 0:U.cancelButtonStyle,actionButtonStyle:U==null?void 0:U.actionButtonStyle,removeToast:F,toasts:Q.filter(nn=>nn.position==_e.position),heights:C.filter(nn=>nn.position==_e.position),setHeights:P,expandByDefault:l,gap:X,loadingIcon:K,expanded:T,pauseWhenPageIsHidden:fe,swipeDirections:n.swipeDirections})})):null}))});const vE=()=>{};var Zv={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const l0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yE=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[s++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],u=n[t++],d=n[t++],f=((i&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(l&63)<<6|u&63)}}return e.join("")},c0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const l=n[i],u=i+1<n.length,d=u?n[i+1]:0,f=i+2<n.length,y=f?n[i+2]:0,w=l>>2,x=(l&3)<<4|d>>4;let S=(d&15)<<2|y>>6,N=y&63;f||(N=64,u||(S=64)),s.push(t[w],t[x],t[S],t[N])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(l0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||u==null||d==null||f==null)throw new bE;const y=l<<2|u>>4;if(s.push(y),d!==64){const w=u<<4&240|d>>2;if(s.push(w),f!==64){const x=d<<6&192|f;s.push(x)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wE=function(n){const e=l0(n);return c0.encodeByteArray(e,!0)},$u=function(n){return wE(n).replace(/\./g,"")},u0=function(n){try{return c0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _E=()=>xE().__FIREBASE_DEFAULTS__,kE=()=>{if(typeof process>"u"||typeof Zv>"u")return;const n=Zv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},EE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&u0(n[1]);return e&&JSON.parse(e)},gh=()=>{try{return vE()||_E()||kE()||EE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},h0=n=>{var e,t;return(t=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},d0=n=>{const e=h0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},f0=()=>{var n;return(n=gh())===null||n===void 0?void 0:n.config},p0=n=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${n}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _a(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wp(n){return(await fetch(n,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function m0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$u(JSON.stringify(t)),$u(JSON.stringify(u)),""].join(".")}const xl={};function SE(){const n={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?n.emulator.push(e):n.prod.push(e);return n}function CE(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ey=!1;function xp(n,e){if(typeof window>"u"||typeof document>"u"||!_a(window.location.host)||xl[n]===e||xl[n]||ey)return;xl[n]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",i=SE().prod.length>0;function l(){const x=document.getElementById(s);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{ey=!0,l()},x}function y(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=CE(s),S=t("text"),N=document.getElementById(S)||document.createElement("span"),V=t("learnmore"),U=document.getElementById(V)||document.createElement("a"),M=t("preprendIcon"),X=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const K=x.element;u(K),y(U,V);const G=f();d(X,M),K.append(X,N,U,G),document.body.appendChild(K)}i?(N.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function IE(){var n;const e=(n=gh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PE(){const n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LE(){return!IE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DE(){try{return typeof indexedDB=="object"}catch{return!1}}function OE(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ME="FirebaseError";class qr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ME,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],u=l?FE(l,s):"Error",d=`${this.serviceName}: ${u} (${i}).`;return new qr(i,d,s)}}function FE(n,e){return n.replace(UE,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const UE=/\{\$([^}]+)}/g;function VE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ai(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const l=n[i],u=e[i];if(ty(l)&&ty(u)){if(!ai(l,u))return!1}else if(l!==u)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function ty(n){return n!==null&&typeof n=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function gl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[s,i]=t.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function vl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zE(n,e){const t=new BE(n,e);return t.subscribe.bind(t)}class BE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");HE(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=wf),i.error===void 0&&(i.error=wf),i.complete===void 0&&(i.complete=wf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HE(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wf(){}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gt(n){return n&&n._delegate?n._delegate:n}class ha{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ti="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $E{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new NE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WE(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});s.resolve(l)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(i)}return i}onInit(e,t){var s;const i=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qE(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qE(n){return n===ti?void 0:n}function WE(n){return n.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $E(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const KE={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},QE=Fe.INFO,YE={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},XE=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=YE[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=QE,this._logHandler=XE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const JE=(n,e)=>e.some(t=>n instanceof t);let ny,ry;function ZE(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e2(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,Mf=new WeakMap,v0=new WeakMap,xf=new WeakMap,kp=new WeakMap;function t2(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(aa(n.result)),i()},u=()=>{s(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&g0.set(t,n)}).catch(()=>{}),kp.set(e,n),e}function n2(n){if(Mf.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),i()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Mf.set(n,e)}let Ff={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||v0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return aa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function r2(n){Ff=n(Ff)}function s2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(_f(this),e,...t);return v0.set(s,e.sort?e.sort():[e]),aa(s)}:e2().includes(n)?function(...e){return n.apply(_f(this),e),aa(g0.get(this))}:function(...e){return aa(n.apply(_f(this),e))}}function a2(n){return typeof n=="function"?s2(n):(n instanceof IDBTransaction&&n2(n),JE(n,ZE())?new Proxy(n,Ff):n)}function aa(n){if(n instanceof IDBRequest)return t2(n);if(xf.has(n))return xf.get(n);const e=a2(n);return e!==n&&(xf.set(n,e),kp.set(e,n)),e}const _f=n=>kp.get(n);function i2(n,e,{blocked:t,upgrade:s,blocking:i,terminated:l}={}){const u=indexedDB.open(n,e),d=aa(u);return s&&u.addEventListener("upgradeneeded",f=>{s(aa(u.result),f.oldVersion,f.newVersion,aa(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),i&&f.addEventListener("versionchange",y=>i(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const o2=["get","getKey","getAll","getAllKeys","count"],l2=["put","add","delete","clear"],kf=new Map;function sy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kf.get(e))return kf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=l2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||o2.includes(t)))return;const l=async function(u,...d){const f=this.transaction(u,i?"readwrite":"readonly");let y=f.store;return s&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),i&&f.done]))[0]};return kf.set(e,l),l}r2(n=>({...n,get:(e,t,s)=>sy(e,t)||n.get(e,t,s),has:(e,t)=>!!sy(e,t)||n.has(e,t)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class c2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(u2(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(" ")}}function u2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uf="@firebase/app",ay="0.13.2";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vs=new _p("@firebase/app"),h2="@firebase/app-compat",d2="@firebase/analytics-compat",f2="@firebase/analytics",p2="@firebase/app-check-compat",m2="@firebase/app-check",g2="@firebase/auth",v2="@firebase/auth-compat",y2="@firebase/database",b2="@firebase/data-connect",w2="@firebase/database-compat",x2="@firebase/functions",_2="@firebase/functions-compat",k2="@firebase/installations",E2="@firebase/installations-compat",N2="@firebase/messaging",S2="@firebase/messaging-compat",C2="@firebase/performance",T2="@firebase/performance-compat",I2="@firebase/remote-config",R2="@firebase/remote-config-compat",j2="@firebase/storage",A2="@firebase/storage-compat",P2="@firebase/firestore",L2="@firebase/ai",D2="@firebase/firestore-compat",O2="firebase",M2="11.10.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vf="[DEFAULT]",F2={[Uf]:"fire-core",[h2]:"fire-core-compat",[f2]:"fire-analytics",[d2]:"fire-analytics-compat",[m2]:"fire-app-check",[p2]:"fire-app-check-compat",[g2]:"fire-auth",[v2]:"fire-auth-compat",[y2]:"fire-rtdb",[b2]:"fire-data-connect",[w2]:"fire-rtdb-compat",[x2]:"fire-fn",[_2]:"fire-fn-compat",[k2]:"fire-iid",[E2]:"fire-iid-compat",[N2]:"fire-fcm",[S2]:"fire-fcm-compat",[C2]:"fire-perf",[T2]:"fire-perf-compat",[I2]:"fire-rc",[R2]:"fire-rc-compat",[j2]:"fire-gcs",[A2]:"fire-gcs-compat",[P2]:"fire-fst",[D2]:"fire-fst-compat",[L2]:"fire-vertex","fire-js":"fire-js",[O2]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qu=new Map,U2=new Map,zf=new Map;function iy(n,e){try{n.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ii(n){const e=n.name;if(zf.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;zf.set(e,n);for(const t of qu.values())iy(t,n);for(const t of U2.values())iy(t,n);return!0}function vh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xn(n){return n==null?!1:n.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const V2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new ql("app","Firebase",V2);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class z2{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const di=M2;function y0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Vf,automaticDataCollectionEnabled:!0},e),i=s.name;if(typeof i!="string"||!i)throw ia.create("bad-app-name",{appName:String(i)});if(t||(t=f0()),!t)throw ia.create("no-options");const l=qu.get(i);if(l){if(ai(t,l.options)&&ai(s,l.config))return l;throw ia.create("duplicate-app",{appName:i})}const u=new GE(i);for(const f of zf.values())u.addComponent(f);const d=new z2(t,s,u);return qu.set(i,d),d}function Ep(n=Vf){const e=qu.get(n);if(!e&&n===Vf&&f0())return y0();if(!e)throw ia.create("no-app",{appName:n});return e}function Dr(n,e,t){var s;let i=(s=F2[n])!==null&&s!==void 0?s:n;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(d.join(" "));return}ii(new ha(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const B2="firebase-heartbeat-database",H2=1,Il="firebase-heartbeat-store";let Ef=null;function b0(){return Ef||(Ef=i2(B2,H2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Il)}catch(t){console.warn(t)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),Ef}async function $2(n){try{const e=(await b0()).transaction(Il),t=await e.objectStore(Il).get(w0(n));return await e.done,t}catch(e){if(e instanceof qr)vs.warn(e.message);else{const t=ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(t.message)}}}async function oy(n,e){try{const t=(await b0()).transaction(Il,"readwrite");await t.objectStore(Il).put(e,w0(n)),await t.done}catch(t){if(t instanceof qr)vs.warn(t.message);else{const s=ia.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vs.warn(s.message)}}}function w0(n){return`${n.name}!${n.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const q2=1024,W2=30;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Q2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ly();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>W2){const l=Y2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){vs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ly(),{heartbeatsToSend:s,unsentEntries:i}=K2(this._heartbeatsCache.heartbeats),l=$u(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return vs.warn(t),""}}}function ly(){return new Date().toISOString().substring(0,10)}function K2(n,e=q2){const t=[];let s=n.slice();for(const i of n){const l=t.find(u=>u.agent===i.agent);if(l){if(l.dates.push(i.date),cy(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DE()?OE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await $2(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return oy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return oy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cy(n){return $u(JSON.stringify({version:2,heartbeats:n})).length}function Y2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function X2(n){ii(new ha("platform-logger",e=>new c2(e),"PRIVATE")),ii(new ha("heartbeat",e=>new G2(e),"PRIVATE")),Dr(Uf,ay,n),Dr(Uf,ay,"esm2017"),Dr("fire-js","")}X2("");function Np(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function x0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J2=x0,_0=new ql("auth","Firebase",x0());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Wu=new _p("@firebase/auth");function Z2(n,...e){Wu.logLevel<=Fe.WARN&&Wu.warn(`Auth (${di}): ${n}`,...e)}function Pu(n,...e){Wu.logLevel<=Fe.ERROR&&Wu.error(`Auth (${di}): ${n}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wr(n,...e){throw Sp(n,...e)}function Or(n,...e){return Sp(n,...e)}function k0(n,e,t){const s=Object.assign(Object.assign({},J2()),{[e]:t});return new ql("auth","Firebase",s).create(e,{appName:n.name})}function oa(n){return k0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return _0.create(n,...e)}function Ce(n,e,...t){if(!n)throw Sp(e,...t)}function ds(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pu(e),new Error(e)}function ys(n,e){n||ds(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function eN(){return uy()==="http:"||uy()==="https:"}function uy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eN()||jE()||"connection"in navigator)?navigator.onLine:!0}function nN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ys(t>e,"Short delay should be less than long delay!"),this.isMobile=TE()||AE()}get(){return tN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cp(n,e){ys(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aN=new Gl(3e4,6e4);function fi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ka(n,e,t,s,i={}){return N0(n,i,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=Wl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:f},l);return RE()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&_a(n.emulatorConfig.host)&&(y.credentials="include"),E0.fetch()(await S0(n,n.config.apiHost,t,d),y)})}async function N0(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},rN),e);try{const i=new oN(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw _u(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[f,y]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw _u(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw _u(n,"user-disabled",u);const w=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw k0(n,w,y);wr(n,w)}}catch(i){if(i instanceof qr)throw i;wr(n,"network-request-failed",{message:String(i)})}}async function yh(n,e,t,s,i={}){const l=await ka(n,e,t,s,i);return"mfaPendingCredential"in l&&wr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function S0(n,e,t,s){const i=`${e}${t}?${s}`,l=n,u=l.config.emulator?Cp(n.config,i):`${n.config.apiScheme}://${i}`;return sN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function iN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Or(this.auth,"network-request-failed")),aN.get())})}}function _u(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=Or(n,e,s);return i.customData._tokenResponse=t,i}function hy(n){return n!==void 0&&n.enterprise!==void 0}class lN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return iN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cN(n,e){return ka(n,"GET","/v2/recaptchaConfig",fi(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uN(n,e){return ka(n,"POST","/v1/accounts:delete",e)}async function Gu(n,e){return ka(n,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _l(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hN(n,e=!1){const t=gt(n),s=await t.getIdToken(e),i=Tp(s);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:i,token:s,authTime:_l(Nf(i.auth_time)),issuedAtTime:_l(Nf(i.iat)),expirationTime:_l(Nf(i.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Nf(n){return Number(n)*1e3}function Tp(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const i=u0(t);return i?JSON.parse(i):(Pu("Failed to decode base64 JWT payload"),null)}catch(i){return Pu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function dy(n){const e=Tp(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Rl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof qr&&dN(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function dN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_l(this.lastLoginAt),this.creationTime=_l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ku(n){var e;const t=n.auth,s=await n.getIdToken(),i=await Rl(n,Gu(t,{idToken:s}));Ce(i==null?void 0:i.users.length,t,"internal-error");const l=i.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?C0(l.providerUserInfo):[],d=mN(n.providerData,u),f=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),w=f?y:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Hf(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(n,x)}async function pN(n){const e=gt(n);await Ku(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mN(n,e){return[...n.filter(t=>!e.some(s=>s.providerId===t.providerId)),...e]}function C0(n){return n.map(e=>{var{providerId:t}=e,s=Np(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function gN(n,e){const t=await N0(n,{},async()=>{const s=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,u=await S0(n,i,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:s};return n.emulatorConfig&&_a(n.emulatorConfig.host)&&(f.credentials="include"),E0.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vN(n,e){return ka(n,"POST","/v2/accounts:revokeToken",fi(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=dy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:l}=await gN(e,t);this.updateTokensAndExpiration(s,i,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:l}=t,u=new lo;return s&&(Ce(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),l&&(Ce(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Js(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class yr{constructor(e){var{uid:t,auth:s,stsTokenManager:i}=e,l=Np(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Hf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Rl(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hN(this,e)}reload(){return pN(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ku(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await Rl(this,uN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,i,l,u,d,f,y,w;const x=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(i=t.email)!==null&&i!==void 0?i:void 0,N=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,V=(u=t.photoURL)!==null&&u!==void 0?u:void 0,U=(d=t.tenantId)!==null&&d!==void 0?d:void 0,M=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,X=(y=t.createdAt)!==null&&y!==void 0?y:void 0,K=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:G,emailVerified:re,isAnonymous:fe,providerData:Q,stsTokenManager:A}=t;Ce(G&&A,e,"internal-error");const k=lo.fromJSON(this.name,A);Ce(typeof G=="string",e,"internal-error"),Js(x,e.name),Js(S,e.name),Ce(typeof re=="boolean",e,"internal-error"),Ce(typeof fe=="boolean",e,"internal-error"),Js(N,e.name),Js(V,e.name),Js(U,e.name),Js(M,e.name),Js(X,e.name),Js(K,e.name);const C=new yr({uid:G,auth:e,email:S,emailVerified:re,displayName:x,isAnonymous:fe,photoURL:V,phoneNumber:N,tenantId:U,stsTokenManager:k,createdAt:X,lastLoginAt:K});return Q&&Array.isArray(Q)&&(C.providerData=Q.map(P=>Object.assign({},P))),M&&(C._redirectEventId=M),C}static async _fromIdTokenResponse(e,t,s=!1){const i=new lo;i.updateFromServerResponse(t);const l=new yr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Ku(l),l}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];Ce(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?C0(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),d=new lo;d.updateFromIdToken(s);const f=new yr({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Hf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(f,y),f}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fy=new Map;function fs(n){ys(n instanceof Function,"Expected a class definition");let e=fy.get(n);return e?(ys(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fy.set(n,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class T0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}T0.type="NONE";const py=T0;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lu(n,e,t){return`firebase:${n}:${e}:${t}`}class co{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:l}=this.auth;this.fullUserKey=Lu(this.userKey,i.apiKey,l),this.fullPersistenceKey=Lu("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gu(this.auth,{idToken:e}).catch(()=>{});return t?yr._fromGetAccountInfoResponse(this.auth,t,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new co(fs(py),e,s);const i=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=i[0]||fs(py);const u=Lu(s,e.config.apiKey,e.name);let d=null;for(const y of t)try{const w=await y._get(u);if(w){let x;if(typeof w=="string"){const S=await Gu(e,{idToken:w}).catch(()=>{});if(!S)break;x=await yr._fromGetAccountInfoResponse(e,S,w)}else x=yr._fromJSON(e,w);y!==l&&(d=x),l=y;break}}catch{}const f=i.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new co(l,e,s):(l=f[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new co(l,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function my(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L0(e))return"Blackberry";if(D0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||j0(e))&&!e.includes("edge/"))return"Chrome";if(P0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function I0(n=tn()){return/firefox\//i.test(n)}function R0(n=tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j0(n=tn()){return/crios\//i.test(n)}function A0(n=tn()){return/iemobile/i.test(n)}function P0(n=tn()){return/android/i.test(n)}function L0(n=tn()){return/blackberry/i.test(n)}function D0(n=tn()){return/webos/i.test(n)}function Ip(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yN(n=tn()){var e;return Ip(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bN(){return PE()&&document.documentMode===10}function O0(n=tn()){return Ip(n)||P0(n)||D0(n)||L0(n)||/windows phone/i.test(n)||A0(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function M0(n,e=[]){let t;switch(n){case"Browser":t=my(tn());break;case"Worker":t=`${my(tn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${di}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const f=e(l);u(f)}catch(f){d(f)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function xN(n,e={}){return ka(n,"GET","/v2/passwordPolicy",fi(n,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _N=6;class kN{constructor(e){var t,s,i,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:_N,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,i,l,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(s=f.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class EN{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gy(this),this.idTokenSubscription=new gy(this),this.beforeStateQueue=new wN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var s,i,l;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gu(this,{idToken:e}),s=await yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f!=null&&f.user&&(i=f.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ku(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(oa(this));const t=e?gt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xN(this),t=new kN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ql("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await vN(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,i);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Z2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Eo(n){return gt(n)}class gy{constructor(e){this.auth=e,this.observer=null,this.addObserver=zE(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NN(n){bh=n}function F0(n){return bh.loadJS(n)}function SN(){return bh.recaptchaEnterpriseScript}function CN(){return bh.gapiScript}function TN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class IN{constructor(){this.enterprise=new RN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class RN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const jN="recaptcha-enterprise",U0="NO_RECAPTCHA";class AN{constructor(e){this.type=jN,this.auth=Eo(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{cN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new lN(f);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(f=>{d(f)})})}function i(l,u,d){const f=window.grecaptcha;hy(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(U0)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IN().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(d=>{if(!t&&hy(window.grecaptcha))i(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=SN();f.length!==0&&(f+=d),F0(f).then(()=>{i(d,l,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function vy(n,e,t,s=!1,i=!1){const l=new AN(n);let u;if(i)u=U0;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function yy(n,e,t,s,i){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await vy(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await vy(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(u)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PN(n,e){const t=vh(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(ai(i,e??{}))return s;wr(s,"already-initialized")}return t.initialize({options:e})}function LN(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function DN(n,e,t){const s=Eo(n);Ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,l=V0(e),{host:u,port:d}=ON(e),f=d===null?"":`:${d}`,y={url:`${l}//${u}${f}/`},w=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Ce(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ce(ai(y,s.config.emulator)&&ai(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,_a(u)?(wp(`${l}//${u}${f}`),xp("Auth",!0)):MN()}function V0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ON(n){const e=V0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const l=i[1];return{host:l,port:by(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:by(u)}}}function by(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function MN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,t){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function FN(n,e){return ka(n,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function UN(n,e){return yh(n,"POST","/v1/accounts:signInWithPassword",fi(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function VN(n,e){return yh(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,e))}async function zN(n,e){return yh(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jl extends Rp{constructor(e,t,s,i=null){super("password",s),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new jl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new jl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&t!=null&&t.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,t,"signInWithPassword",UN);case"emailLink":return VN(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,s,"signUpPassword",FN);case"emailLink":return zN(e,{idToken:t,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uo(n,e){return yh(n,"POST","/v1/accounts:signInWithIdp",fi(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BN="http://localhost";class oi extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=t,l=Np(t,["providerId","signInMethod"]);if(!s||!i)return null;const u=new oi(s,i);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return uo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,uo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,uo(e,t)}buildRequest(){const e={requestUri:BN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wl(t)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $N(n){const e=gl(vl(n)).link,t=e?gl(vl(e)).deep_link_id:null,s=gl(vl(n)).deep_link_id;return(s?gl(vl(s)).link:null)||s||t||e||n}class jp{constructor(e){var t,s,i,l,u,d;const f=gl(vl(e)),y=(t=f.apiKey)!==null&&t!==void 0?t:null,w=(s=f.oobCode)!==null&&s!==void 0?s:null,x=HN((i=f.mode)!==null&&i!==void 0?i:null);Ce(y&&w&&x,"argument-error"),this.apiKey=y,this.operation=x,this.code=w,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=$N(e);try{return new jp(t)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class No{constructor(){this.providerId=No.PROVIDER_ID}static credential(e,t){return jl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=jp.parseLink(t);return Ce(s,"argument-error"),jl._fromEmailAndCode(e,s.code,s.tenantId)}}No.PROVIDER_ID="password";No.EMAIL_PASSWORD_SIGN_IN_METHOD="password";No.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class z0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kl extends z0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zs extends Kl{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ea extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oi._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ea.credential(t,s)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ta extends Kl{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class na extends Kl{constructor(){super("twitter.com")}static credential(e,t){return oi._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return na.credential(t,s)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const l=await yr._fromIdTokenResponse(e,s,i),u=wy(s);return new mo({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=wy(s);return new mo({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function wy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qu extends qr{constructor(e,t,s,i){var l;super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Qu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new Qu(e,t,s,i)}}function B0(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qu._fromErrorAndOperation(n,i,e,s):i})}async function qN(n,e,t=!1){const s=await Rl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return mo._forOperation(n,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function WN(n,e,t=!1){const{auth:s}=n;if(Xn(s.app))return Promise.reject(oa(s));const i="reauthenticate";try{const l=await Rl(n,B0(s,i,e,n),t);Ce(l.idToken,s,"internal-error");const u=Tp(l.idToken);Ce(u,s,"internal-error");const{sub:d}=u;return Ce(n.uid===d,s,"user-mismatch"),mo._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&wr(s,"user-mismatch"),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function H0(n,e,t=!1){if(Xn(n.app))return Promise.reject(oa(n));const s="signIn",i=await B0(n,s,e),l=await mo._fromIdTokenResponse(n,s,i);return t||await n._updateCurrentUser(l.user),l}async function GN(n,e){return H0(Eo(n),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function KN(n){const e=Eo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function QN(n,e,t){return Xn(n.app)?Promise.reject(oa(n)):GN(gt(n),No.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&KN(n),s})}function YN(n,e,t,s){return gt(n).onIdTokenChanged(e,t,s)}function XN(n,e,t){return gt(n).beforeAuthStateChanged(e,t)}function JN(n,e,t,s){return gt(n).onAuthStateChanged(e,t,s)}function ZN(n){return gt(n).signOut()}const Yu="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yu,"1"),this.storage.removeItem(Yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eS=1e3,tS=10;class q0 extends $0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);bN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tS):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},eS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}q0.type="LOCAL";const nS=q0;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W0 extends $0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}W0.type="SESSION";const G0=W0;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rS(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:l}=t.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const d=Array.from(u).map(async y=>y(t.origin,l)),f=await rS(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ap(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,u;return new Promise((d,f)=>{const y=Ap("",20);i.port1.start();const w=setTimeout(()=>{f(new Error("unsupported_event"))},s);u={messageChannel:i,onMessage(x){const S=x;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(w),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mr(){return window}function aS(n){Mr().location.href=n}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function K0(){return typeof Mr().WorkerGlobalScope<"u"&&typeof Mr().importScripts=="function"}async function iS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oS(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function lS(){return K0()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q0="firebaseLocalStorageDb",cS=1,Xu="firebaseLocalStorage",Y0="fbase_key";class Ql{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xh(n,e){return n.transaction([Xu],e?"readwrite":"readonly").objectStore(Xu)}function uS(){const n=indexedDB.deleteDatabase(Q0);return new Ql(n).toPromise()}function $f(){const n=indexedDB.open(Q0,cS);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Xu,{keyPath:Y0})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Xu)?e(s):(s.close(),await uS(),e(await $f()))})})}async function xy(n,e,t){const s=xh(n,!0).put({[Y0]:e,value:t});return new Ql(s).toPromise()}async function hS(n,e){const t=xh(n,!1).get(e),s=await new Ql(t).toPromise();return s===void 0?null:s.value}function _y(n,e){const t=xh(n,!0).delete(e);return new Ql(t).toPromise()}const dS=800,fS=3;class X0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $f(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>fS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(lS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await iS(),!this.activeServiceWorker)return;this.sender=new sS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $f();return await xy(e,Yu,"1"),await _y(e,Yu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>xy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>hS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_y(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=xh(i,!1).getAll();return new Ql(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X0.type="LOCAL";const pS=X0;new Gl(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mS(n,e){return e?fs(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pp extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return uo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gS(n){return H0(n.auth,new Pp(n),n.bypassAuthState)}function vS(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),WN(t,new Pp(n),n.bypassAuthState)}async function yS(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),qN(t,new Pp(n),n.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J0{constructor(e,t,s,i,l=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gS;case"linkViaPopup":case"linkViaRedirect":return yS;case"reauthViaPopup":case"reauthViaRedirect":return vS;default:wr(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bS=new Gl(2e3,1e4);class io extends J0{constructor(e,t,s,i,l){super(e,t,i,l),this.provider=s,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bS.get())};e()}}io.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wS="pendingRedirect",Du=new Map;class xS extends J0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Du.get(this.auth._key());if(!e){try{const t=await _S(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Du.set(this.auth._key(),e)}return this.bypassAuthState||Du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _S(n,e){const t=NS(e),s=ES(n);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function kS(n,e){Du.set(n._key(),e)}function ES(n){return fs(n._redirectPersistence)}function NS(n){return Lu(wS,n.config.apiKey,n.name)}async function SS(n,e,t=!1){if(Xn(n.app))return Promise.reject(oa(n));const s=Eo(n),i=mS(s,e),l=await new xS(s,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CS=600*1e3;class TS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Z0(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Or(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CS&&this.cachedEventUids.clear(),this.cachedEventUids.has(ky(e))}saveEventToCache(e){this.cachedEventUids.add(ky(e)),this.lastProcessedEventTime=Date.now()}}function ky(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Z0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IS(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z0(n);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function RS(n,e={}){return ka(n,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AS=/^https?/;async function PS(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RS(n);for(const t of e)try{if(LS(t))return}catch{}wr(n,"unauthorized-domain")}function LS(n){const e=Bf(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===s}if(!AS.test(t))return!1;if(jS.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DS=new Gl(3e4,6e4);function Ey(){const n=Mr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function OS(n){return new Promise((e,t)=>{var s,i,l;function u(){Ey(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ey(),t(Or(n,"network-request-failed"))},timeout:DS.get()})}if(!((i=(s=Mr().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=Mr().gapi)===null||l===void 0)&&l.load)u();else{const d=TN("iframefcb");return Mr()[d]=()=>{gapi.load?u():t(Or(n,"network-request-failed"))},F0(`${CN()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Ou=null,e})}let Ou=null;function MS(n){return Ou=Ou||OS(n),Ou}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FS=new Gl(5e3,15e3),US="__/auth/iframe",VS="emulator/auth/iframe",zS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HS(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cp(e,VS):`https://${n.config.authDomain}/${US}`,s={apiKey:e.apiKey,appName:n.name,v:di},i=BS.get(n.config.apiHost);i&&(s.eid=i);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Wl(s).slice(1)}`}async function $S(n){const e=await MS(n),t=Mr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:HS(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zS,dontclear:!0},s=>new Promise(async(i,l)=>{await s.restyle({setHideOnLeave:!1});const u=Or(n,"network-request-failed"),d=Mr().setTimeout(()=>{l(u)},FS.get());function f(){Mr().clearTimeout(d),i(s)}s.ping(f).then(f,()=>{l(u)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WS=500,GS=600,KS="_blank",QS="http://localhost";class Ny{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YS(n,e,t,s=WS,i=GS){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const f=Object.assign(Object.assign({},qS),{width:s.toString(),height:i.toString(),top:l,left:u}),y=tn().toLowerCase();t&&(d=j0(y)?KS:t),I0(y)&&(e=e||QS,f.scrollbars="yes");const w=Object.entries(f).reduce((S,[N,V])=>`${S}${N}=${V},`,"");if(yN(y)&&d!=="_self")return XS(e||"",d),new Ny(null);const x=window.open(e||"",d,w);Ce(x,n,"popup-blocked");try{x.focus()}catch{}return new Ny(x)}function XS(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const JS="__/auth/handler",ZS="emulator/auth/handler",eC=encodeURIComponent("fac");async function Sy(n,e,t,s,i,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:di,eventId:i};if(e instanceof z0){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",VE(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,x]of Object.entries({}))u[w]=x}if(e instanceof Kl){const w=e.getScopes().filter(x=>x!=="");w.length>0&&(u.scopes=w.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const w of Object.keys(d))d[w]===void 0&&delete d[w];const f=await n._getAppCheckToken(),y=f?`#${eC}=${encodeURIComponent(f)}`:"";return`${tC(n)}?${Wl(d).slice(1)}${y}`}function tC({config:n}){return n.emulator?Cp(n,ZS):`https://${n.authDomain}/${JS}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Sf="webStorageSupport";class nC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G0,this._completeRedirectFn=SS,this._overrideRedirectResult=kS}async _openPopup(e,t,s,i){var l;ys((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Sy(e,t,s,Bf(),i);return YS(e,u,Ap())}async _openRedirect(e,t,s,i){await this._originValidation(e);const l=await Sy(e,t,s,Bf(),i);return aS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(ys(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await $S(e),s=new TS(e);return t.register("authEvent",i=>(Ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sf,{type:Sf},s=>{var i;const l=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Sf];l!==void 0&&t(!!l),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O0()||R0()||Ip()}}const rC=nC;var Cy="@firebase/auth",Ty="1.10.8";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iC(n){ii(new ha("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M0(n)},y=new EN(s,i,l,f);return LN(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ii(new ha("auth-internal",e=>{const t=Eo(e.getProvider("auth").getImmediate());return(s=>new sC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(Cy,Ty,aC(n)),Dr(Cy,Ty,"esm2017")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oC=300,lC=p0("authIdTokenMaxAge")||oC;let Iy=null;const cC=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>lC)return;const i=t==null?void 0:t.token;Iy!==i&&(Iy=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uC(n=Ep()){const e=vh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=PN(n,{popupRedirectResolver:rC,persistence:[pS,nS,G0]}),s=p0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=cC(l.toString());XN(t,u,()=>u(t.currentUser)),YN(t,d=>u(d))}}const i=h0("auth");return i&&DN(t,`http://${i}`),t}function hC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}NN({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=i=>{const l=Or("internal-error");l.customData=i,t(l)},s.type="text/javascript",s.charset="UTF-8",hC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iC("Browser");var dC="firebase",fC="11.10.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Dr(dC,fC,"app");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var la,ew;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function C(){}C.prototype=k.prototype,A.D=k.prototype,A.prototype=new C,A.prototype.constructor=A,A.C=function(P,T,D){for(var I=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)I[Le-2]=arguments[Le];return k.prototype[T].apply(P,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,k,C){C||(C=0);var P=Array(16);if(typeof k=="string")for(var T=0;16>T;++T)P[T]=k.charCodeAt(C++)|k.charCodeAt(C++)<<8|k.charCodeAt(C++)<<16|k.charCodeAt(C++)<<24;else for(T=0;16>T;++T)P[T]=k[C++]|k[C++]<<8|k[C++]<<16|k[C++]<<24;k=A.g[0],C=A.g[1],T=A.g[2];var D=A.g[3],I=k+(D^C&(T^D))+P[0]+3614090360&4294967295;k=C+(I<<7&4294967295|I>>>25),I=D+(T^k&(C^T))+P[1]+3905402710&4294967295,D=k+(I<<12&4294967295|I>>>20),I=T+(C^D&(k^C))+P[2]+606105819&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(k^T&(D^k))+P[3]+3250441966&4294967295,C=T+(I<<22&4294967295|I>>>10),I=k+(D^C&(T^D))+P[4]+4118548399&4294967295,k=C+(I<<7&4294967295|I>>>25),I=D+(T^k&(C^T))+P[5]+1200080426&4294967295,D=k+(I<<12&4294967295|I>>>20),I=T+(C^D&(k^C))+P[6]+2821735955&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(k^T&(D^k))+P[7]+4249261313&4294967295,C=T+(I<<22&4294967295|I>>>10),I=k+(D^C&(T^D))+P[8]+1770035416&4294967295,k=C+(I<<7&4294967295|I>>>25),I=D+(T^k&(C^T))+P[9]+2336552879&4294967295,D=k+(I<<12&4294967295|I>>>20),I=T+(C^D&(k^C))+P[10]+4294925233&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(k^T&(D^k))+P[11]+2304563134&4294967295,C=T+(I<<22&4294967295|I>>>10),I=k+(D^C&(T^D))+P[12]+1804603682&4294967295,k=C+(I<<7&4294967295|I>>>25),I=D+(T^k&(C^T))+P[13]+4254626195&4294967295,D=k+(I<<12&4294967295|I>>>20),I=T+(C^D&(k^C))+P[14]+2792965006&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(k^T&(D^k))+P[15]+1236535329&4294967295,C=T+(I<<22&4294967295|I>>>10),I=k+(T^D&(C^T))+P[1]+4129170786&4294967295,k=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(k^C))+P[6]+3225465664&4294967295,D=k+(I<<9&4294967295|I>>>23),I=T+(k^C&(D^k))+P[11]+643717713&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^k&(T^D))+P[0]+3921069994&4294967295,C=T+(I<<20&4294967295|I>>>12),I=k+(T^D&(C^T))+P[5]+3593408605&4294967295,k=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(k^C))+P[10]+38016083&4294967295,D=k+(I<<9&4294967295|I>>>23),I=T+(k^C&(D^k))+P[15]+3634488961&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^k&(T^D))+P[4]+3889429448&4294967295,C=T+(I<<20&4294967295|I>>>12),I=k+(T^D&(C^T))+P[9]+568446438&4294967295,k=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(k^C))+P[14]+3275163606&4294967295,D=k+(I<<9&4294967295|I>>>23),I=T+(k^C&(D^k))+P[3]+4107603335&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^k&(T^D))+P[8]+1163531501&4294967295,C=T+(I<<20&4294967295|I>>>12),I=k+(T^D&(C^T))+P[13]+2850285829&4294967295,k=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(k^C))+P[2]+4243563512&4294967295,D=k+(I<<9&4294967295|I>>>23),I=T+(k^C&(D^k))+P[7]+1735328473&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^k&(T^D))+P[12]+2368359562&4294967295,C=T+(I<<20&4294967295|I>>>12),I=k+(C^T^D)+P[5]+4294588738&4294967295,k=C+(I<<4&4294967295|I>>>28),I=D+(k^C^T)+P[8]+2272392833&4294967295,D=k+(I<<11&4294967295|I>>>21),I=T+(D^k^C)+P[11]+1839030562&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^k)+P[14]+4259657740&4294967295,C=T+(I<<23&4294967295|I>>>9),I=k+(C^T^D)+P[1]+2763975236&4294967295,k=C+(I<<4&4294967295|I>>>28),I=D+(k^C^T)+P[4]+1272893353&4294967295,D=k+(I<<11&4294967295|I>>>21),I=T+(D^k^C)+P[7]+4139469664&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^k)+P[10]+3200236656&4294967295,C=T+(I<<23&4294967295|I>>>9),I=k+(C^T^D)+P[13]+681279174&4294967295,k=C+(I<<4&4294967295|I>>>28),I=D+(k^C^T)+P[0]+3936430074&4294967295,D=k+(I<<11&4294967295|I>>>21),I=T+(D^k^C)+P[3]+3572445317&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^k)+P[6]+76029189&4294967295,C=T+(I<<23&4294967295|I>>>9),I=k+(C^T^D)+P[9]+3654602809&4294967295,k=C+(I<<4&4294967295|I>>>28),I=D+(k^C^T)+P[12]+3873151461&4294967295,D=k+(I<<11&4294967295|I>>>21),I=T+(D^k^C)+P[15]+530742520&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^k)+P[2]+3299628645&4294967295,C=T+(I<<23&4294967295|I>>>9),I=k+(T^(C|~D))+P[0]+4096336452&4294967295,k=C+(I<<6&4294967295|I>>>26),I=D+(C^(k|~T))+P[7]+1126891415&4294967295,D=k+(I<<10&4294967295|I>>>22),I=T+(k^(D|~C))+P[14]+2878612391&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~k))+P[5]+4237533241&4294967295,C=T+(I<<21&4294967295|I>>>11),I=k+(T^(C|~D))+P[12]+1700485571&4294967295,k=C+(I<<6&4294967295|I>>>26),I=D+(C^(k|~T))+P[3]+2399980690&4294967295,D=k+(I<<10&4294967295|I>>>22),I=T+(k^(D|~C))+P[10]+4293915773&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~k))+P[1]+2240044497&4294967295,C=T+(I<<21&4294967295|I>>>11),I=k+(T^(C|~D))+P[8]+1873313359&4294967295,k=C+(I<<6&4294967295|I>>>26),I=D+(C^(k|~T))+P[15]+4264355552&4294967295,D=k+(I<<10&4294967295|I>>>22),I=T+(k^(D|~C))+P[6]+2734768916&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~k))+P[13]+1309151649&4294967295,C=T+(I<<21&4294967295|I>>>11),I=k+(T^(C|~D))+P[4]+4149444226&4294967295,k=C+(I<<6&4294967295|I>>>26),I=D+(C^(k|~T))+P[11]+3174756917&4294967295,D=k+(I<<10&4294967295|I>>>22),I=T+(k^(D|~C))+P[2]+718787259&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~k))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+T&4294967295,A.g[3]=A.g[3]+D&4294967295}s.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var C=k-this.blockSize,P=this.B,T=this.h,D=0;D<k;){if(T==0)for(;D<=C;)i(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<k;)if(P[T++]=A.charCodeAt(D++),T==this.blockSize){i(this,P),T=0;break}}else for(;D<k;)if(P[T++]=A[D++],T==this.blockSize){i(this,P),T=0;break}}this.h=T,this.o+=k},s.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var C=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=C&255,C/=256;for(this.u(A),A=Array(16),k=C=0;4>k;++k)for(var P=0;32>P;P+=8)A[C++]=this.g[k]>>>P&255;return A};function l(A,k){var C=d;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=k(A)}function u(A,k){this.h=k;for(var C=[],P=!0,T=A.length-1;0<=T;T--){var D=A[T]|0;P&&D==k||(C[T]=D,P=!1)}this.g=C}var d={};function f(A){return-128<=A&&128>A?l(A,function(k){return new u([k|0],0>k?-1:0)}):new u([A|0],0>A?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return x;if(0>A)return M(y(-A));for(var k=[],C=1,P=0;A>=C;P++)k[P]=A/C|0,C*=4294967296;return new u(k,0)}function w(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return M(w(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(k,8)),P=x,T=0;T<A.length;T+=8){var D=Math.min(8,A.length-T),I=parseInt(A.substring(T,T+D),k);8>D?(D=y(Math.pow(k,D)),P=P.j(D).add(y(I))):(P=P.j(C),P=P.add(y(I)))}return P}var x=f(0),S=f(1),N=f(16777216);n=u.prototype,n.m=function(){if(U(this))return-M(this).m();for(var A=0,k=1,C=0;C<this.g.length;C++){var P=this.i(C);A+=(0<=P?P:4294967296+P)*k,k*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if(U(this))return"-"+M(this).toString(A);for(var k=y(Math.pow(A,6)),C=this,P="";;){var T=re(C,k).g;C=X(C,T.j(k));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(A);if(C=T,V(C))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function U(A){return A.h==-1}n.l=function(A){return A=X(this,A),U(A)?-1:V(A)?0:1};function M(A){for(var k=A.g.length,C=[],P=0;P<k;P++)C[P]=~A.g[P];return new u(C,~A.h).add(S)}n.abs=function(){return U(this)?M(this):this},n.add=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],P=0,T=0;T<=k;T++){var D=P+(this.i(T)&65535)+(A.i(T)&65535),I=(D>>>16)+(this.i(T)>>>16)+(A.i(T)>>>16);P=I>>>16,D&=65535,I&=65535,C[T]=I<<16|D}return new u(C,C[C.length-1]&-2147483648?-1:0)};function X(A,k){return A.add(M(k))}n.j=function(A){if(V(this)||V(A))return x;if(U(this))return U(A)?M(this).j(M(A)):M(M(this).j(A));if(U(A))return M(this.j(M(A)));if(0>this.l(N)&&0>A.l(N))return y(this.m()*A.m());for(var k=this.g.length+A.g.length,C=[],P=0;P<2*k;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var T=0;T<A.g.length;T++){var D=this.i(P)>>>16,I=this.i(P)&65535,Le=A.i(T)>>>16,Z=A.i(T)&65535;C[2*P+2*T]+=I*Z,K(C,2*P+2*T),C[2*P+2*T+1]+=D*Z,K(C,2*P+2*T+1),C[2*P+2*T+1]+=I*Le,K(C,2*P+2*T+1),C[2*P+2*T+2]+=D*Le,K(C,2*P+2*T+2)}for(P=0;P<k;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=k;P<2*k;P++)C[P]=0;return new u(C,0)};function K(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function G(A,k){this.g=A,this.h=k}function re(A,k){if(V(k))throw Error("division by zero");if(V(A))return new G(x,x);if(U(A))return k=re(M(A),k),new G(M(k.g),M(k.h));if(U(k))return k=re(A,M(k)),new G(M(k.g),k.h);if(30<A.g.length){if(U(A)||U(k))throw Error("slowDivide_ only works with positive integers.");for(var C=S,P=k;0>=P.l(A);)C=fe(C),P=fe(P);var T=Q(C,1),D=Q(P,1);for(P=Q(P,2),C=Q(C,2);!V(P);){var I=D.add(P);0>=I.l(A)&&(T=T.add(C),D=I),P=Q(P,1),C=Q(C,1)}return k=X(A,T.j(k)),new G(T,k)}for(T=x;0<=A.l(k);){for(C=Math.max(1,Math.floor(A.m()/k.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=y(C),I=D.j(k);U(I)||0<I.l(A);)C-=P,D=y(C),I=D.j(k);V(D)&&(D=S),T=T.add(D),A=X(A,I)}return new G(T,A)}n.A=function(A){return re(this,A).h},n.and=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],P=0;P<k;P++)C[P]=this.i(P)&A.i(P);return new u(C,this.h&A.h)},n.or=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],P=0;P<k;P++)C[P]=this.i(P)|A.i(P);return new u(C,this.h|A.h)},n.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],P=0;P<k;P++)C[P]=this.i(P)^A.i(P);return new u(C,this.h^A.h)};function fe(A){for(var k=A.g.length+1,C=[],P=0;P<k;P++)C[P]=A.i(P)<<1|A.i(P-1)>>>31;return new u(C,A.h)}function Q(A,k){var C=k>>5;k%=32;for(var P=A.g.length-C,T=[],D=0;D<P;D++)T[D]=0<k?A.i(D+C)>>>k|A.i(D+C+1)<<32-k:A.i(D+C);return new u(T,A.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ew=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=w,la=u}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tw,yl,nw,Mu,qf,rw,sw,aw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,b){return c==Array.prototype||c==Object.prototype||(c[g]=b.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ku=="object"&&ku];for(var g=0;g<c.length;++g){var b=c[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function i(c,g){if(g)e:{var b=s;c=c.split(".");for(var E=0;E<c.length-1;E++){var z=c[E];if(!(z in b))break e;b=b[z]}c=c[c.length-1],E=b[c],g=g(E),g!=E&&g!=null&&e(b,c,{configurable:!0,writable:!0,value:g})}}function l(c,g){c instanceof String&&(c+="");var b=0,E=!1,z={next:function(){if(!E&&b<c.length){var W=b++;return{value:g(W,c[W]),done:!1}}return E=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(c){return c||function(){return l(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function w(c,g,b){return c.call.apply(c.bind,arguments)}function x(c,g,b){if(!c)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,E),c.apply(g,z)}}return function(){return c.apply(g,arguments)}}function S(c,g,b){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:x,S.apply(null,arguments)}function N(c,g){var b=Array.prototype.slice.call(arguments,1);return function(){var E=b.slice();return E.push.apply(E,arguments),c.apply(this,E)}}function V(c,g){function b(){}b.prototype=g.prototype,c.aa=g.prototype,c.prototype=new b,c.prototype.constructor=c,c.Qb=function(E,z,W){for(var ce=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ce[tt-2]=arguments[tt];return g.prototype[z].apply(E,ce)}}function U(c){const g=c.length;if(0<g){const b=Array(g);for(let E=0;E<g;E++)b[E]=c[E];return b}return[]}function M(c,g){for(let b=1;b<arguments.length;b++){const E=arguments[b];if(f(E)){const z=c.length||0,W=E.length||0;c.length=z+W;for(let ce=0;ce<W;ce++)c[z+ce]=E[ce]}else c.push(E)}}class X{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function K(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var fe=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function Q(c,g,b){for(const E in c)g.call(b,c[E],E,c)}function A(c,g){for(const b in c)g.call(void 0,c[b],b,c)}function k(c){const g={};for(const b in c)g[b]=c[b];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,g){let b,E;for(let z=1;z<arguments.length;z++){E=arguments[z];for(b in E)c[b]=E[b];for(let W=0;W<C.length;W++)b=C[W],Object.prototype.hasOwnProperty.call(E,b)&&(c[b]=E[b])}}function T(c){var g=1;c=c.split(":");const b=[];for(;0<g&&c.length;)b.push(c.shift()),g--;return c.length&&b.push(c.join(":")),b}function D(c){d.setTimeout(()=>{throw c},0)}function I(){var c=se;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Le{constructor(){this.h=this.g=null}add(g,b){const E=Z.get();E.set(g,b),this.h?this.h.next=E:this.g=E,this.h=E}}var Z=new X(()=>new Ie,c=>c.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ae=!1,se=new Le,oe=()=>{const c=d.Promise.resolve(void 0);me=()=>{c.then(F)}};var F=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(b){D(b)}var g=Z;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ae=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ye=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const b=()=>{};d.addEventListener("test",b,g),d.removeEventListener("test",b,g)}catch{}return c})();function Ne(c,g){if(le.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var b=this.type=c.type,E=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(fe){e:{try{re(g.nodeName);var z=!0;break e}catch{}z=!1}z||(g=null)}}else b=="mouseover"?g=c.fromElement:b=="mouseout"&&(g=c.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Pe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ne.aa.h.call(this)}}V(Ne,le);var Pe={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function qe(c,g,b,E,z){this.listener=c,this.proxy=null,this.src=g,this.type=b,this.capture=!!E,this.ha=z,this.key=++Ve,this.da=this.fa=!1}function ht(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function nn(c){this.src=c,this.g={},this.h=0}nn.prototype.add=function(c,g,b,E,z){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ce=tr(c,g,E,z);return-1<ce?(g=c[ce],b||(g.fa=!1)):(g=new qe(g,this.src,W,!!E,z),g.fa=b,c.push(g)),g};function _r(c,g){var b=g.type;if(b in c.g){var E=c.g[b],z=Array.prototype.indexOf.call(E,g,void 0),W;(W=0<=z)&&Array.prototype.splice.call(E,z,1),W&&(ht(g),c.g[b].length==0&&(delete c.g[b],c.h--))}}function tr(c,g,b,E){for(var z=0;z<c.length;++z){var W=c[z];if(!W.da&&W.listener==g&&W.capture==!!b&&W.ha==E)return z}return-1}var Wr="closure_lm_"+(1e6*Math.random()|0),_s={};function ks(c,g,b,E,z){if(Array.isArray(g)){for(var W=0;W<g.length;W++)ks(c,g[W],b,E,z);return null}return b=Ra(b),c&&c[_e]?c.K(g,b,y(E)?!!E.capture:!1,z):Ia(c,g,b,!1,E,z)}function Ia(c,g,b,E,z,W){if(!g)throw Error("Invalid event type");var ce=y(z)?!!z.capture:!!z,tt=hn(c);if(tt||(c[Wr]=tt=new nn(c)),b=tt.add(g,b,E,ce,W),b.proxy)return b;if(E=Es(),b.proxy=E,E.src=c,E.listener=b,c.addEventListener)ye||(z=ce),z===void 0&&(z=!1),c.addEventListener(g.toString(),E,z);else if(c.attachEvent)c.attachEvent(rn(g.toString()),E);else if(c.addListener&&c.removeListener)c.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Es(){function c(b){return g.call(c.src,c.listener,b)}const g=Ss;return c}function Ns(c,g,b,E,z){if(Array.isArray(g))for(var W=0;W<g.length;W++)Ns(c,g[W],b,E,z);else E=y(E)?!!E.capture:!!E,b=Ra(b),c&&c[_e]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],b=tr(W,b,E,z),-1<b&&(ht(W[b]),Array.prototype.splice.call(W,b,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=hn(c))&&(g=c.g[g.toString()],c=-1,g&&(c=tr(g,b,E,z)),(b=-1<c?g[c]:null)&&Fn(b))}function Fn(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[_e])_r(g.i,c);else{var b=c.type,E=c.proxy;g.removeEventListener?g.removeEventListener(b,E,c.capture):g.detachEvent?g.detachEvent(rn(b),E):g.addListener&&g.removeListener&&g.removeListener(E),(b=hn(g))?(_r(b,c),b.h==0&&(b.src=null,g[Wr]=null)):ht(c)}}}function rn(c){return c in _s?_s[c]:_s[c]="on"+c}function Ss(c,g){if(c.da)c=!0;else{g=new Ne(g,this);var b=c.listener,E=c.ha||c.src;c.fa&&Fn(c),c=b.call(E,g)}return c}function hn(c){return c=c[Wr],c instanceof nn?c:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ra(c){return typeof c=="function"?c:(c[Cs]||(c[Cs]=function(g){return c.handleEvent(g)}),c[Cs])}function We(){q.call(this),this.i=new nn(this),this.M=this,this.F=null}V(We,q),We.prototype[_e]=!0,We.prototype.removeEventListener=function(c,g,b,E){Ns(this,c,g,b,E)};function nt(c,g){var b,E=c.F;if(E)for(b=[];E;E=E.F)b.push(E);if(c=c.M,E=g.type||g,typeof g=="string")g=new le(g,c);else if(g instanceof le)g.target=g.target||c;else{var z=g;g=new le(E,c),P(g,z)}if(z=!0,b)for(var W=b.length-1;0<=W;W--){var ce=g.g=b[W];z=nr(ce,E,!0,g)&&z}if(ce=g.g=c,z=nr(ce,E,!0,g)&&z,z=nr(ce,E,!1,g)&&z,b)for(W=0;W<b.length;W++)ce=g.g=b[W],z=nr(ce,E,!1,g)&&z}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var b=c.g[g],E=0;E<b.length;E++)ht(b[E]);delete c.g[g],c.h--}}this.F=null},We.prototype.K=function(c,g,b,E){return this.i.add(String(c),g,!1,b,E)},We.prototype.L=function(c,g,b,E){return this.i.add(String(c),g,!0,b,E)};function nr(c,g,b,E){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,W=0;W<g.length;++W){var ce=g[W];if(ce&&!ce.da&&ce.capture==b){var tt=ce.listener,Ct=ce.ha||ce.src;ce.fa&&_r(c.i,ce),z=tt.call(Ct,E)!==!1&&z}}return z&&!E.defaultPrevented}function ja(c,g,b){if(typeof c=="function")b&&(c=S(c,b));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Tn(c){c.g=ja(()=>{c.g=null,c.i&&(c.i=!1,Tn(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Gr extends q{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Tn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(c){q.call(this),this.h=c,this.g={}}V(kr,q);var Kr=[];function Un(c){Q(c.g,function(g,b){this.g.hasOwnProperty(b)&&Fn(g)},c),c.g={}}kr.prototype.N=function(){kr.aa.N.call(this),Un(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ts=d.JSON.stringify,Vn=d.JSON.parse,Aa=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Qr(){}Qr.prototype.h=null;function Yr(c){return c.h||(c.h=c.i())}function Xr(){}var dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fn(){le.call(this,"d")}V(fn,le);function sn(){le.call(this,"c")}V(sn,le);var zn={},Se=null;function Me(){return Se=Se||new We}zn.La="serverreachability";function Qe(c){le.call(this,zn.La,c)}V(Qe,le);function wt(c){const g=Me();nt(g,new Qe(g))}zn.STAT_EVENT="statevent";function Ft(c,g){le.call(this,zn.STAT_EVENT,c),this.stat=g}V(Ft,le);function Ye(c){const g=Me();nt(g,new Ft(g,c))}zn.Ma="timingevent";function pn(c,g){le.call(this,zn.Ma,c),this.size=g}V(pn,le);function dt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function Gt(){this.g=!0}Gt.prototype.xa=function(){this.g=!1};function Pa(c,g,b,E,z,W){c.info(function(){if(c.g)if(W)for(var ce="",tt=W.split("&"),Ct=0;Ct<tt.length;Ct++){var Ke=tt[Ct].split("=");if(1<Ke.length){var At=Ke[0];Ke=Ke[1];var Pt=At.split("_");ce=2<=Pt.length&&Pt[1]=="type"?ce+(At+"="+Ke+"&"):ce+(At+"=redacted&")}}else ce=null;else ce=W;return"XMLHTTP REQ ("+E+") [attempt "+z+"]: "+g+`
`+b+`
`+ce})}function yi(c,g,b,E,z,W,ce){c.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+z+"]: "+g+`
`+b+`
`+W+" "+ce})}function rr(c,g,b,E){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+$h(c,b)+(E?" "+E:"")})}function Ao(c,g){c.info(function(){return"TIMEOUT: "+g})}Gt.prototype.info=function(){};function $h(c,g){if(!c.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(c=0;c<b.length;c++)if(Array.isArray(b[c])){var E=b[c];if(!(2>E.length)){var z=E[1];if(Array.isArray(z)&&!(1>z.length)){var W=z[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return Ts(b)}catch{return g}}var bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ac={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sr;function La(){}V(La,Qr),La.prototype.g=function(){return new XMLHttpRequest},La.prototype.i=function(){return{}},sr=new La;function ar(c,g,b,E){this.j=c,this.i=g,this.l=b,this.R=E||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ic}function ic(){this.i=null,this.g="",this.h=!1}var Po={},wi={};function xi(c,g,b){c.L=1,c.v=Ps(Rn(g)),c.m=b,c.P=!0,Lo(c,null)}function Lo(c,g){c.F=Date.now(),rt(c),c.A=Rn(c.v);var b=c.A,E=c.R;Array.isArray(E)||(E=[String(E)]),Ds(b.i,"t",E),c.C=0,b=c.j.J,c.h=new ic,c.g=Ec(c.j,b?g:null,!c.m),0<c.O&&(c.M=new Gr(S(c.Y,c,c.g),c.O)),g=c.U,b=c.g,E=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(Kr[0]=z.toString()),z=Kr);for(var W=0;W<z.length;W++){var ce=ks(b,z[W],E||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=c.H?k(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),wt(),Pa(c.i,c.u,c.A,c.l,c.R,c.m)}ar.prototype.ca=function(c){c=c.target;const g=this.M;g&&gn(c)==3?g.j():this.Y(c)},ar.prototype.Y=function(c){try{if(c==this.g)e:{const Pt=gn(this.g);var g=this.g.Ba();const $n=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Vo(this.g)))){this.J||Pt!=4||g==7||(g==8||0>=$n?wt(3):wt(2)),Da(this);var b=this.g.Z();this.X=b;t:if(oc(this)){var E=Vo(this.g);c="";var z=E.length,W=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bn(this),Is(this);var ce="";break t}this.h.i=new d.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,c+=this.h.i.decode(E[g],{stream:!(W&&g==z-1)});E.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=b==200,yi(this.i,this.u,this.A,this.l,this.R,Pt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Ct=this.g;if((tt=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(tt)){var Ke=tt;break t}}Ke=null}if(b=Ke)rr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Do(this,b);else{this.o=!1,this.s=3,Ye(12),Bn(this),Is(this);break e}}if(this.P){b=!0;let An;for(;!this.J&&this.C<ce.length;)if(An=qh(this,ce),An==wi){Pt==4&&(this.s=4,Ye(14),b=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Po){this.s=4,Ye(15),rr(this.i,this.l,ce,"[Invalid Chunk]"),b=!1;break}else rr(this.i,this.l,An,null),Do(this,An);if(oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||ce.length!=0||this.h.h||(this.s=1,Ye(16),b=!1),this.o=this.o&&b,!b)rr(this.i,this.l,ce,"[Invalid Chunked Response]"),Bn(this),Is(this);else if(0<ce.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Bo(At),At.M=!0,Ye(11))}}else rr(this.i,this.l,ce,null),Do(this,ce);Pt==4&&Bn(this),this.o&&!this.J&&(Pt==4?Ai(this.j,this):(this.o=!1,rt(this)))}else Ci(this.g),b==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),Bn(this),Is(this)}}}catch{}finally{}};function oc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qh(c,g){var b=c.C,E=g.indexOf(`
`,b);return E==-1?wi:(b=Number(g.substring(b,E)),isNaN(b)?Po:(E+=1,E+b>g.length?wi:(g=g.slice(E,E+b),c.C=E+b,g)))}ar.prototype.cancel=function(){this.J=!0,Bn(this)};function rt(c){c.S=Date.now()+c.I,lc(c,c.I)}function lc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=dt(S(c.ba,c),g)}function Da(c){c.B&&(d.clearTimeout(c.B),c.B=null)}ar.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ao(this.i,this.A),this.L!=2&&(wt(),Ye(17)),Bn(this),this.s=2,Is(this)):lc(this,this.S-c)};function Is(c){c.j.G==0||c.J||Ai(c.j,c)}function Bn(c){Da(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Un(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Do(c,g){try{var b=c.j;if(b.G!=0&&(b.g==c||an(b.h,c))){if(!c.K&&an(b.h,c)&&b.G==3){try{var E=b.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var z=E;if(z[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<c.F)ji(b),ur(b);else break e;Ri(b),Ye(18)}}else b.za=z[1],0<b.za-b.T&&37500>z[2]&&b.F&&b.v==0&&!b.C&&(b.C=dt(S(b.Za,b),6e3));if(1>=uc(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ns(b,11)}else if((c.K||b.g==c)&&ji(b),!K(g))for(z=b.Da.g.parse(g),g=0;g<z.length;g++){let Ke=z[g];if(b.T=Ke[0],Ke=Ke[1],b.G==2)if(Ke[0]=="c"){b.K=Ke[1],b.ia=Ke[2];const At=Ke[3];At!=null&&(b.la=At,b.j.info("VER="+b.la));const Pt=Ke[4];Pt!=null&&(b.Aa=Pt,b.j.info("SVER="+b.Aa));const $n=Ke[5];$n!=null&&typeof $n=="number"&&0<$n&&(E=1.5*$n,b.L=E,b.j.info("backChannelRequestTimeoutMs_="+E)),E=b;const An=c.g;if(An){const Ba=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var W=E.h;W.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Oo(W,W.h),W.h=null))}if(E.D){const Li=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Li&&(E.ya=Li,et(E.I,E.D,Li))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-c.F,b.j.info("Handshake RTT: "+b.R+"ms")),E=b;var ce=c;if(E.qa=kc(E,E.J?E.ia:null,E.W),ce.K){hc(E.h,ce);var tt=ce,Ct=E.L;Ct&&(tt.I=Ct),tt.B&&(Da(tt),rt(tt)),E.g=ce}else za(E);0<b.i.length&&Cr(b)}else Ke[0]!="stop"&&Ke[0]!="close"||ns(b,7);else b.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ns(b,7):Vt(b):Ke[0]!="noop"&&b.l&&b.l.ta(Ke),b.v=0)}}wt(4)}catch{}}var cc=class{constructor(c,g){this.g=c,this.map=g}};function Oa(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function In(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function uc(c){return c.h?1:c.g?c.g.size:0}function an(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Oo(c,g){c.g?c.g.add(g):c.h=g}function hc(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Oa.prototype.cancel=function(){if(this.i=dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function dc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const b of c.g.values())g=g.concat(b.D);return g}return U(c.i)}function _i(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],b=c.length,E=0;E<b;E++)g.push(c[E]);return g}g=[],b=0;for(E in c)g[b++]=c[E];return g}function ki(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var b=0;b<c;b++)g.push(b);return g}g=[],b=0;for(const E in c)g[b++]=E;return g}}}function Rs(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var b=ki(c),E=_i(c),z=E.length,W=0;W<z;W++)g.call(void 0,E[W],b&&b[W],c)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wh(c,g){if(c){c=c.split("&");for(var b=0;b<c.length;b++){var E=c[b].indexOf("="),z=null;if(0<=E){var W=c[b].substring(0,E);z=c[b].substring(E+1)}else W=c[b];g(W,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Jr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Jr){this.h=c.h,Fa(this,c.j),this.o=c.o,this.g=c.g,js(this,c.s),this.l=c.l;var g=c.i,b=new Er;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),As(this,b),this.m=c.m}else c&&(g=String(c).match(Ma))?(this.h=!1,Fa(this,g[1]||"",!0),this.o=ze(g[2]||""),this.g=ze(g[3]||"",!0),js(this,g[4]),this.l=ze(g[5]||"",!0),As(this,g[6]||"",!0),this.m=ze(g[7]||"")):(this.h=!1,this.i=new Er(null,this.h))}Jr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Ls(g,Ei,!0),":");var b=this.g;return(b||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Ls(g,Ei,!0),"@"),c.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&c.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&c.push("/"),c.push(Ls(b,b.charAt(0)=="/"?mc:pc,!0))),(b=this.i.toString())&&c.push("?",b),(b=this.m)&&c.push("#",Ls(b,Mo)),c.join("")};function Rn(c){return new Jr(c)}function Fa(c,g,b){c.j=b?ze(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function js(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function As(c,g,b){g instanceof Er?(c.i=g,Nr(c.i,c.h)):(b||(g=Ls(g,gc)),c.i=new Er(g,c.h))}function et(c,g,b){c.i.set(g,b)}function Ps(c){return et(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ze(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ls(c,g,b){return typeof c=="string"?(c=encodeURI(c).replace(g,fc),b&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ei=/[#\/\?@]/g,pc=/[#\?:]/g,mc=/[#\?]/g,gc=/[#\?@]/g,Mo=/#/g;function Er(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ut(c){c.g||(c.g=new Map,c.h=0,c.i&&Wh(c.i,function(g,b){c.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}n=Er.prototype,n.add=function(c,g){Ut(this),this.i=null,c=Hn(this,c);var b=this.g.get(c);return b||this.g.set(c,b=[]),b.push(g),this.h+=1,this};function ir(c,g){Ut(c),g=Hn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function or(c,g){return Ut(c),g=Hn(c,g),c.g.has(g)}n.forEach=function(c,g){Ut(this),this.g.forEach(function(b,E){b.forEach(function(z){c.call(g,z,E,this)},this)},this)},n.na=function(){Ut(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let E=0;E<g.length;E++){const z=c[E];for(let W=0;W<z.length;W++)b.push(g[E])}return b},n.V=function(c){Ut(this);let g=[];if(typeof c=="string")or(this,c)&&(g=g.concat(this.g.get(Hn(this,c))));else{c=Array.from(this.g.values());for(let b=0;b<c.length;b++)g=g.concat(c[b])}return g},n.set=function(c,g){return Ut(this),this.i=null,c=Hn(this,c),or(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Ds(c,g,b){ir(c,g),0<b.length&&(c.i=null,c.g.set(Hn(c,g),U(b)),c.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var E=g[b];const W=encodeURIComponent(String(E)),ce=this.V(E);for(E=0;E<ce.length;E++){var z=W;ce[E]!==""&&(z+="="+encodeURIComponent(String(ce[E]))),c.push(z)}}return this.i=c.join("&")};function Hn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Nr(c,g){g&&!c.j&&(Ut(c),c.i=null,c.g.forEach(function(b,E){var z=E.toLowerCase();E!=z&&(ir(this,E),Ds(this,z,b))},c)),c.j=g}function Gh(c,g){const b=new Gt;if(d.Image){const E=new Image;E.onload=N(mn,b,"TestLoadImage: loaded",!0,g,E),E.onerror=N(mn,b,"TestLoadImage: error",!1,g,E),E.onabort=N(mn,b,"TestLoadImage: abort",!1,g,E),E.ontimeout=N(mn,b,"TestLoadImage: timeout",!1,g,E),d.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=c}else g(!1)}function vc(c,g){const b=new Gt,E=new AbortController,z=setTimeout(()=>{E.abort(),mn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:E.signal}).then(W=>{clearTimeout(z),W.ok?mn(b,"TestPingServer: ok",!0,g):mn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),mn(b,"TestPingServer: error",!1,g)})}function mn(c,g,b,E,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),E(b)}catch{}}function Kh(){this.g=new Aa}function yc(c,g,b){const E=b||"";try{Rs(c,function(z,W){let ce=z;y(z)&&(ce=Ts(z)),g.push(E+W+"="+encodeURIComponent(ce))})}catch(z){throw g.push(E+"type="+encodeURIComponent("_badmap")),z}}function Zr(c){this.l=c.Ub||null,this.j=c.eb||!1}V(Zr,Qr),Zr.prototype.g=function(){return new Ua(this.l,this.j)},Zr.prototype.i=(function(c){return function(){return c}})({});function Ua(c,g){We.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Ua,We),n=Ua.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,cr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function bc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?lr(this):cr(this),this.readyState==3&&bc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,lr(this))},n.Qa=function(c){this.g&&(this.response=c,lr(this))},n.ga=function(){this.g&&lr(this)};function lr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,cr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,c.push(b[0]+": "+b[1]),b=g.next();return c.join(`\r
`)};function cr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function es(c){let g="";return Q(c,function(b,E){g+=E,g+=":",g+=b,g+=`\r
`}),g}function Os(c,g,b){e:{for(E in b){var E=!1;break e}E=!0}E||(b=es(b),typeof c=="string"?b!=null&&encodeURIComponent(String(b)):et(c,g,b))}function ct(c){We.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(ct,We);var Qh=/^https?$/i,Fo=["POST","PUT"];n=ct.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,b,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sr.g(),this.v=this.o?Yr(this.o):Yr(sr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){Va(this,W);return}if(c=b||"",b=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var z in E)b.set(z,E[z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const W of E.keys())b.set(W,E.get(W));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),z=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Fo,g,void 0))||E||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ce]of b)this.g.setRequestHeader(W,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Si(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){Va(this,W)}};function Va(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ni(c),jn(c)}function Ni(c){c.A||(c.A=!0,nt(c,"complete"),nt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,nt(this,"complete"),nt(this,"abort"),jn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jn(this,!0)),ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Uo(this):this.bb())},n.bb=function(){Uo(this)};function Uo(c){if(c.h&&typeof u<"u"&&(!c.v[1]||gn(c)!=4||c.Z()!=2)){if(c.u&&gn(c)==4)ja(c.Ea,0,c);else if(nt(c,"readystatechange"),gn(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var E;if(E=ce===0){var z=String(c.D).match(Ma)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),E=!Qh.test(z?z.toLowerCase():"")}b=E}if(b)nt(c,"complete"),nt(c,"success");else{c.m=6;try{var W=2<gn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Ni(c)}}finally{jn(c)}}}}function jn(c,g){if(c.g){Si(c);const b=c.g,E=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||nt(c,"ready");try{b.onreadystatechange=E}catch{}}}function Si(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function gn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Vn(g)}};function Vo(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ci(c){const g={};c=(c.g&&2<=gn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<c.length;E++){if(K(c[E]))continue;var b=T(c[E]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=g[z]||[];g[z]=W,W.push(b)}A(g,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(c,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[c]||g}function zo(c){this.Aa=0,this.i=[],this.j=new Gt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sr("baseRetryDelayMs",5e3,c),this.cb=Sr("retryDelaySeedMs",1e4,c),this.Wa=Sr("forwardChannelMaxRetries",2,c),this.wa=Sr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Oa(c&&c.concurrentRequestLimit),this.Da=new Kh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zo.prototype,n.la=8,n.G=1,n.connect=function(c,g,b,E){Ye(0),this.W=c,this.H=g||{},b&&E!==void 0&&(this.H.OSID=b,this.H.OAID=E),this.F=this.X,this.I=kc(this,null,this.W),Cr(this)};function Vt(c){if(Ti(c),c.G==3){var g=c.U++,b=Rn(c.I);if(et(b,"SID",c.K),et(b,"RID",g),et(b,"TYPE","terminate"),ts(c,b),g=new ar(c,c.j,g),g.L=2,g.v=Ps(Rn(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&d.Image&&(new Image().src=g.v,b=!0),b||(g.g=Ec(g.j,null),g.g.ea(g.v)),g.F=Date.now(),rt(g)}_c(c)}function ur(c){c.g&&(Bo(c),c.g.cancel(),c.g=null)}function Ti(c){ur(c),c.u&&(d.clearTimeout(c.u),c.u=null),ji(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Cr(c){if(!In(c.h)&&!c.s){c.s=!0;var g=c.Ga;me||oe(),ae||(me(),ae=!0),se.add(g,c),c.B=0}}function Yh(c,g){return uc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=dt(S(c.Ga,c,g),xc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new ar(this,this.j,c);let W=this.o;if(this.S&&(W?(W=k(W),P(W,this.S)):W=this.S),this.m!==null||this.O||(z.H=W,W=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var E=this.i[b];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Ms(this,z,g),b=Rn(this.I),et(b,"RID",c),et(b,"CVER",22),this.D&&et(b,"X-HTTP-Session-Id",this.D),ts(this,b),W&&(this.O?g="headers="+encodeURIComponent(String(es(W)))+"&"+g:this.m&&Os(b,this.m,W)),Oo(this.h,z),this.Ua&&et(b,"TYPE","init"),this.P?(et(b,"$req",g),et(b,"SID","null"),z.T=!0,xi(z,b,null)):xi(z,b,g),this.G=2}}else this.G==3&&(c?Ii(this,c):this.i.length==0||In(this.h)||Ii(this))};function Ii(c,g){var b;g?b=g.l:b=c.U++;const E=Rn(c.I);et(E,"SID",c.K),et(E,"RID",b),et(E,"AID",c.T),ts(c,E),c.m&&c.o&&Os(E,c.m,c.o),b=new ar(c,c.j,b,c.B+1),c.m===null&&(b.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ms(c,b,1e3),b.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Oo(c.h,b),xi(b,E,g)}function ts(c,g){c.H&&Q(c.H,function(b,E){et(g,E,b)}),c.l&&Rs({},function(b,E){et(g,E,b)})}function Ms(c,g,b){b=Math.min(c.i.length,b);var E=c.l?S(c.l.Na,c.l,c):null;e:{var z=c.i;let W=-1;for(;;){const ce=["count="+b];W==-1?0<b?(W=z[0].g,ce.push("ofs="+W)):W=0:ce.push("ofs="+W);let tt=!0;for(let Ct=0;Ct<b;Ct++){let Ke=z[Ct].g;const At=z[Ct].map;if(Ke-=W,0>Ke)W=Math.max(0,z[Ct].g-100),tt=!1;else try{yc(At,ce,"req"+Ke+"_")}catch{E&&E(At)}}if(tt){E=ce.join("&");break e}}}return c=c.i.splice(0,b),g.D=c,E}function za(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;me||oe(),ae||(me(),ae=!0),se.add(g,c),c.v=0}}function Ri(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=dt(S(c.Fa,c),xc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=dt(S(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),ur(this),wc(this))};function Bo(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function wc(c){c.g=new ar(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Rn(c.qa);et(g,"RID","rpc"),et(g,"SID",c.K),et(g,"AID",c.T),et(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&et(g,"TO",c.ja),et(g,"TYPE","xmlhttp"),ts(c,g),c.m&&c.o&&Os(g,c.m,c.o),c.L&&(c.g.I=c.L);var b=c.g;c=c.ia,b.L=1,b.v=Ps(Rn(g)),b.m=null,b.P=!0,Lo(b,c)}n.Za=function(){this.C!=null&&(this.C=null,ur(this),Ri(this),Ye(19))};function ji(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ai(c,g){var b=null;if(c.g==g){ji(c),Bo(c),c.g=null;var E=2}else if(an(c.h,g))b=g.D,hc(c.h,g),E=1;else return;if(c.G!=0){if(g.o)if(E==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var z=c.B;E=Me(),nt(E,new pn(E,b)),Cr(c)}else za(c);else if(z=g.s,z==3||z==0&&0<g.X||!(E==1&&Yh(c,g)||E==2&&Ri(c)))switch(b&&0<b.length&&(g=c.h,g.i=g.i.concat(b)),z){case 1:ns(c,5);break;case 4:ns(c,10);break;case 3:ns(c,6);break;default:ns(c,2)}}}function xc(c,g){let b=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(b*=2),b*g}function ns(c,g){if(c.j.info("Error code "+g),g==2){var b=S(c.fb,c),E=c.Xa;const z=!E;E=new Jr(E||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Fa(E,"https"),Ps(E),z?Gh(E.toString(),b):vc(E.toString(),b)}else Ye(2);c.G=0,c.l&&c.l.sa(g),_c(c),Ti(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function _c(c){if(c.G=0,c.ka=[],c.l){const g=dc(c.h);(g.length!=0||c.i.length!=0)&&(M(c.ka,g),M(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function kc(c,g,b){var E=b instanceof Jr?Rn(b):new Jr(b);if(E.g!="")g&&(E.g=g+"."+E.g),js(E,E.s);else{var z=d.location;E=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var W=new Jr(null);E&&Fa(W,E),g&&(W.g=g),z&&js(W,z),b&&(W.l=b),E=W}return b=c.D,g=c.ya,b&&g&&et(E,b,g),et(E,"VER",c.la),ts(c,E),E}function Ec(c,g,b){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new ct(new Zr({eb:b})):new ct(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ho(){}n=Ho.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Pi(){}Pi.prototype.g=function(c,g){return new on(c,g)};function on(c,g){We.call(this),this.g=new zo(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!K(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!K(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Tr(this)}V(on,We),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Vt(this.g)},on.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var b={};b.__data__=c,c=b}else this.u&&(b={},b.__data__=Ts(c),c=b);g.i.push(new cc(g.Ya++,c)),g.G==3&&Cr(g)},on.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,on.aa.N.call(this)};function Nc(c){fn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const b in g){c=b;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}V(Nc,fn);function Sc(){sn.call(this),this.status=1}V(Sc,sn);function Tr(c){this.g=c}V(Tr,Ho),Tr.prototype.ua=function(){nt(this.g,"a")},Tr.prototype.ta=function(c){nt(this.g,new Nc(c))},Tr.prototype.sa=function(c){nt(this.g,new Sc)},Tr.prototype.ra=function(){nt(this.g,"b")},Pi.prototype.createWebChannel=Pi.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,aw=function(){return new Pi},sw=function(){return Me()},rw=zn,qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bi.NO_ERROR=0,bi.TIMEOUT=8,bi.HTTP_ERROR=6,Mu=bi,ac.COMPLETE="complete",nw=ac,Xr.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",We.prototype.listen=We.prototype.K,yl=Xr,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,tw=ct}).apply(typeof ku<"u"?ku:typeof self<"u"?self:typeof window<"u"?window:{});const jy="@firebase/firestore",Ay="4.8.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let So="11.10.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const li=new _p("@firebase/firestore");function no(){return li.logLevel}function pe(n,...e){if(li.logLevel<=Fe.DEBUG){const t=e.map(Lp);li.debug(`Firestore (${So}): ${n}`,...t)}}function bs(n,...e){if(li.logLevel<=Fe.ERROR){const t=e.map(Lp);li.error(`Firestore (${So}): ${n}`,...t)}}function da(n,...e){if(li.logLevel<=Fe.WARN){const t=e.map(Lp);li.warn(`Firestore (${So}): ${n}`,...t)}}function Lp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Te(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,iw(n,s,t)}function iw(n,e,t){let s=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw bs(s),new Error(s)}function Xe(n,e,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,n||iw(e,i,s)}function Ae(n,e){return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ca{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ow{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zt.UNAUTHENTICATED)))}shutdown(){}}class mC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class gC{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let s=this.i;const i=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let l=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ca,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},d=f=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ca)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new ow(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class vC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new vC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Py{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const s=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const i=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>i(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?i(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Py(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Py(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lw(){return new TextEncoder}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=wC(40);for(let l=0;l<i.length;++l)s.length<20&&i[l]<t&&(s+=e.charAt(i[l]%62))}return s}}function De(n,e){return n<e?-1:n>e?1:0}function Wf(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),i=e.codePointAt(t);if(s!==i){if(s<128&&i<128)return De(s,i);{const l=lw(),u=xC(l.encode(Ly(n,t)),l.encode(Ly(e,t)));return u!==0?u:De(s,i)}}t+=s>65535?2:1}return De(n.length,e.length)}function Ly(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function xC(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function go(n,e,t){return n.length===e.length&&n.every(((s,i)=>t(s,e[i])))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dy="__name__";class Pr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const l=Pr.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const s=Pr.isNumericId(e),i=Pr.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):Wf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return la.fromString(e.substring(4,e.length-2))}}class at extends Pr{construct(e,t,s){return new at(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((i=>i.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const _C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Pr{construct(e,t,s){return new $t(e,t,s)}static isValidIdentifier(e){return _C.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dy}static keyField(){return new $t([Dy])}static fromServerFormat(e){const t=[];let s="",i=0;const l=()=>{if(s.length===0)throw new he(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new he(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,i+=2}else d==="`"?(u=!u,i++):d!=="."||u?(s+=d,i++):(l(),i++)}if(l(),u)throw new he(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xe{constructor(e){this.path=e}static fromPath(e){return new xe(at.fromString(e))}static fromName(e){return new xe(at.fromString(e).popFirst(5))}static empty(){return new xe(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new at(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cw(n,e,t){if(!t)throw new he(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kC(n,e,t,s){if(e===!0&&s===!0)throw new he(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Oy(n){if(!xe.isDocumentKey(n))throw new he(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function My(n){if(xe.isDocumentKey(n))throw new he(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _h(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(t){return t.constructor?t.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function ci(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_h(n);throw new he(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function St(n,e){const t={typeString:n};return e&&(t.value=e),t}function Yl(n,e){if(!uw(n))throw new he(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const i=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(i&&typeof u!==i){t=`JSON field '${s}' must be a ${i}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new he(Y.INVALID_ARGUMENT,t);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fy=-62135596800,Uy=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Uy);return new Ze(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fy)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uy}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yl(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:St("string",Ze._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Ze(0,0))}static max(){return new je(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Al=-1;function EC(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=je.fromTimestamp(s===1e9?new Ze(t+1,0):new Ze(t,s));return new fa(i,xe.empty(),e)}function NC(n){return new fa(n.readTime,n.key,Al)}class fa{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new fa(je.min(),xe.empty(),Al)}static max(){return new fa(je.max(),xe.empty(),Al)}}function SC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Co(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==CC)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((s,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,s)=>{t(e)}))}static reject(e){return new J(((t,s)=>{s(e)}))}static waitFor(e){return new J(((t,s)=>{let i=0,l=0,u=!1;e.forEach((d=>{++i,d.next((()=>{++l,u&&l===i&&t()}),(f=>s(f)))})),u=!0,l===i&&t()}))}static or(e){let t=J.resolve(!1);for(const s of e)t=t.next((i=>i?J.resolve(i):s()));return t}static forEach(e,t){const s=[];return e.forEach(((i,l)=>{s.push(t.call(this,i,l))})),this.waitFor(s)}static mapArray(e,t){return new J(((s,i)=>{const l=e.length,u=new Array(l);let d=0;for(let f=0;f<l;f++){const y=f;t(e[y]).next((w=>{u[y]=w,++d,d===l&&s(u)}),(w=>i(w)))}}))}static doWhile(e,t){return new J(((s,i)=>{const l=()=>{e()===!0?t().next((()=>{l()}),i):s()};l()}))}}function IC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function To(n){return n.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}kh.ue=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Op=-1;function Eh(n){return n==null}function Ju(n){return n===0&&1/n==-1/0}function RC(n){return typeof n=="number"&&Number.isInteger(n)&&!Ju(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hw="";function jC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Vy(e)),e=AC(n.get(t),e);return Vy(e)}function AC(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const l=n.charAt(i);switch(l){case"\0":t+="";break;case hw:t+="";break;default:t+=l}}return t}function Vy(n){return n+hw+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ea(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vt{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,s,i,l){this.key=e,this.value=t,this.color=s??Ht.RED,this.left=i??Ht.EMPTY,this.right=l??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,l){return new Ht(e??this.key,t??this.value,s??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const l=s(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,s),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ht.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(n,e,t,s,i){return this}insert(n,e,t){return new Ht(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new By(this.data.getIterator())}getIteratorFrom(e){return new By(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class By{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class On{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new On([])}unionWith(e){let t=new jt($t.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new On(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fw("Invalid base64 string: "+i):i}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let l=0;l<s.length;++l)i+=String.fromCharCode(s[l]);return i})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const PC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pa(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=PC.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ma(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pw="server_timestamp",mw="__type__",gw="__previous_value__",vw="__local_write_time__";function Mp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[mw])===null||t===void 0?void 0:t.stringValue)===pw}function Nh(n){const e=n.mapValue.fields[gw];return Mp(e)?Nh(e):e}function Pl(n){const e=pa(n.mapValue.fields[vw].timestampValue);return new Ze(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LC{constructor(e,t,s,i,l,u,d,f,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=y,this.isUsingEmulator=w}}const Zu="(default)";class Ll{constructor(e,t){this.projectId=e,this.database=t||Zu}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Zu}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yw="__type__",DC="__max__",Nu={mapValue:{}},bw="__vector__",eh="value";function ga(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:MC(n)?9007199254740991:OC(n)?10:11:Te(28295,{value:n})}function Hr(n,e){if(n===e)return!0;const t=ga(n);if(t!==ga(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pl(n).isEqual(Pl(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const l=pa(s.timestampValue),u=pa(i.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return ma(s.bytesValue).isEqual(ma(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return _t(s.geoPointValue.latitude)===_t(i.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return _t(s.integerValue)===_t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const l=_t(s.doubleValue),u=_t(i.doubleValue);return l===u?Ju(l)===Ju(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return go(n.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(s,i){const l=s.mapValue.fields||{},u=i.mapValue.fields||{};if(zy(l)!==zy(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Hr(l[d],u[d])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function Dl(n,e){return(n.values||[]).find((t=>Hr(t,e)))!==void 0}function vo(n,e){if(n===e)return 0;const t=ga(n),s=ga(e);if(t!==s)return De(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(i,l){const u=_t(i.integerValue||i.doubleValue),d=_t(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return Hy(n.timestampValue,e.timestampValue);case 4:return Hy(Pl(n),Pl(e));case 5:return Wf(n.stringValue,e.stringValue);case 6:return(function(i,l){const u=ma(i),d=ma(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(i,l){const u=i.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const y=De(u[f],d[f]);if(y!==0)return y}return De(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,l){const u=De(_t(i.latitude),_t(l.latitude));return u!==0?u:De(_t(i.longitude),_t(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return $y(n.arrayValue,e.arrayValue);case 10:return(function(i,l){var u,d,f,y;const w=i.fields||{},x=l.fields||{},S=(u=w[eh])===null||u===void 0?void 0:u.arrayValue,N=(d=x[eh])===null||d===void 0?void 0:d.arrayValue,V=De(((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:$y(S,N)})(n.mapValue,e.mapValue);case 11:return(function(i,l){if(i===Nu.mapValue&&l===Nu.mapValue)return 0;if(i===Nu.mapValue)return 1;if(l===Nu.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),f=l.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const x=Wf(d[w],y[w]);if(x!==0)return x;const S=vo(u[d[w]],f[y[w]]);if(S!==0)return S}return De(d.length,y.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{le:t})}}function Hy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=pa(n),s=pa(e),i=De(t.seconds,s.seconds);return i!==0?i:De(t.nanos,s.nanos)}function $y(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const l=vo(t[i],s[i]);if(l)return l}return De(t.length,s.length)}function yo(n){return Gf(n)}function Gf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const t=pa(e);return`time(${t.seconds},${t.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return ma(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return xe.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let t="[",s=!0;for(const i of e.values||[])s?s=!1:t+=",",t+=Gf(i);return t+"]"})(n.arrayValue):"mapValue"in n?(function(e){const t=Object.keys(e.fields||{}).sort();let s="{",i=!0;for(const l of t)i?i=!1:s+=",",s+=`${l}:${Gf(e.fields[l])}`;return s+"}"})(n.mapValue):Te(61005,{value:n})}function Fu(n){switch(ga(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(n);return e?16+Fu(e):16;case 5:return 2*n.stringValue.length;case 6:return ma(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(t){return(t.values||[]).reduce(((s,i)=>s+Fu(i)),0)})(n.arrayValue);case 10:case 11:return(function(t){let s=0;return Ea(t.fields,((i,l)=>{s+=i.length+Fu(l)})),s})(n.mapValue);default:throw Te(13486,{value:n})}}function qy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kf(n){return!!n&&"integerValue"in n}function Fp(n){return!!n&&"arrayValue"in n}function Wy(n){return!!n&&"nullValue"in n}function Gy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uu(n){return!!n&&"mapValue"in n}function OC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[yw])===null||t===void 0?void 0:t.stringValue)===bw}function kl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ea(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=kl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DC}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Uu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(t)}setAll(e){let t=$t.emptyPath(),s={},i=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,s,i),s={},i=[],t=d.popLast()}u?s[d.lastSegment()]=kl(u):i.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,i)}delete(e){const t=this.field(e.popLast());Uu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];Uu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){Ea(t,((i,l)=>e[i]=l));for(const i of s)delete e[i]}clone(){return new Sn(kl(this.value))}}function ww(n){const e=[];return Ea(n.fields,((t,s)=>{const i=new $t([t]);if(Uu(s)){const l=ww(s.mapValue).fields;if(l.length===0)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)})),new On(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class en{constructor(e,t,s,i,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new en(e,0,je.min(),je.min(),je.min(),Sn.empty(),0)}static newFoundDocument(e,t,s,i){return new en(e,1,t,je.min(),s,i,0)}static newNoDocument(e,t){return new en(e,2,t,je.min(),je.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,je.min(),je.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class th{constructor(e,t){this.position=e,this.inclusive=t}}function Ky(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(l.field.isKeyField()?s=xe.comparator(xe.fromName(u.referenceValue),t.key):s=vo(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hr(n.position[t],e.position[t]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ol{constructor(e,t="asc"){this.field=e,this.dir=t}}function FC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xw{}class Nt extends xw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new VC(e,t,s):t==="array-contains"?new HC(e,s):t==="in"?new $C(e,s):t==="not-in"?new qC(e,s):t==="array-contains-any"?new WC(e,s):new Nt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zC(e,s):new BC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vo(t,this.value)):t!==null&&ga(this.value)===ga(t)&&this.matchesComparison(vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends xw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new xr(e,t)}matches(e){return _w(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function _w(n){return n.op==="and"}function kw(n){return UC(n)&&_w(n)}function UC(n){for(const e of n.filters)if(e instanceof xr)return!1;return!0}function Qf(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+yo(n.value);if(kw(n))return n.filters.map((e=>Qf(e))).join(",");{const e=n.filters.map((t=>Qf(t))).join(",");return`${n.op}(${e})`}}function Ew(n,e){return n instanceof Nt?(function(t,s){return s instanceof Nt&&t.op===s.op&&t.field.isEqual(s.field)&&Hr(t.value,s.value)})(n,e):n instanceof xr?(function(t,s){return s instanceof xr&&t.op===s.op&&t.filters.length===s.filters.length?t.filters.reduce(((i,l,u)=>i&&Ew(l,s.filters[u])),!0):!1})(n,e):void Te(19439)}function Nw(n){return n instanceof Nt?(function(e){return`${e.field.canonicalString()} ${e.op} ${yo(e.value)}`})(n):n instanceof xr?(function(e){return e.op.toString()+" {"+e.getFilters().map(Nw).join(" ,")+"}"})(n):"Filter"}class VC extends Nt{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class zC extends Nt{constructor(e,t){super(e,"in",t),this.keys=Sw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class BC extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=Sw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Sw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>xe.fromName(s.referenceValue)))}class HC extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fp(t)&&Dl(t.arrayValue,this.value)}}class $C extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Dl(this.value.arrayValue,t)}}class qC extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Dl(this.value.arrayValue,t)}}class WC extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Dl(this.value.arrayValue,s)))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GC{constructor(e,t=null,s=[],i=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=l,this.startAt=u,this.endAt=d,this.Pe=null}}function Yy(n,e=null,t=[],s=[],i=null,l=null,u=null){return new GC(n,e,t,s,i,l,u)}function Up(n){const e=Ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Qf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>yo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>yo(s))).join(",")),e.Pe=t}return e.Pe}function Vp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ew(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qy(n.startAt,e.startAt)&&Qy(n.endAt,e.endAt)}function Yf(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Io{constructor(e,t=null,s=[],i=[],l=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function KC(n,e,t,s,i,l,u,d){return new Io(n,e,t,s,i,l,u,d)}function Cw(n){return new Io(n)}function Xy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tw(n){return n.collectionGroup!==null}function El(n){const e=Ae(n);if(e.Te===null){e.Te=[];const t=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new jt($t.comparator);return i.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(l=l.add(d.field))}))})),l})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Ol(i,s))})),t.has($t.keyField().canonicalString())||e.Te.push(new Ol($t.keyField(),s))}return e.Te}function Fr(n){const e=Ae(n);return e.Ie||(e.Ie=QC(e,El(n))),e.Ie}function QC(n,e){if(n.limitType==="F")return Yy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const l=i.dir==="desc"?"asc":"desc";return new Ol(i.field,l)}));const t=n.endAt?new th(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new th(n.startAt.position,n.startAt.inclusive):null;return Yy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Xf(n,e){const t=n.filters.concat([e]);return new Io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jf(n,e,t){return new Io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sh(n,e){return Vp(Fr(n),Fr(e))&&n.limitType===e.limitType}function Iw(n){return`${Up(Fr(n))}|lt:${n.limitType}`}function ro(n){return`Query(target=${(function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((s=>Nw(s))).join(", ")}]`),Eh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((s=>(function(i){return`${i.field.canonicalString()} (${i.dir})`})(s))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>yo(s))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>yo(s))).join(",")),`Target(${t})`})(Fr(n))}; limitType=${n.limitType})`}function Ch(n,e){return e.isFoundDocument()&&(function(t,s){const i=s.key.path;return t.collectionGroup!==null?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)})(n,e)&&(function(t,s){for(const i of El(t))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(t,s){for(const i of t.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(t,s){return!(t.startAt&&!(function(i,l,u){const d=Ky(i,l,u);return i.inclusive?d<=0:d<0})(t.startAt,El(t),s)||t.endAt&&!(function(i,l,u){const d=Ky(i,l,u);return i.inclusive?d>=0:d>0})(t.endAt,El(t),s))})(n,e)}function YC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Rw(n){return(e,t)=>{let s=!1;for(const i of El(n)){const l=XC(i,e,t);if(l!==0)return l;s=s||i.field.isKeyField()}return 0}}function XC(n,e,t){const s=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(i,l,u){const d=l.data.field(i),f=u.data.field(i);return d!==null&&f!==null?vo(d,f):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:n.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,l]of s)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,((t,s)=>{for(const[i,l]of s)e(i,l)}))}isEmpty(){return dw(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const JC=new vt(xe.comparator);function ws(){return JC}const jw=new vt(xe.comparator);function bl(...n){let e=jw;for(const t of n)e=e.insert(t.key,t);return e}function Aw(n){let e=jw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ri(){return Nl()}function Pw(){return Nl()}function Nl(){return new pi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const ZC=new vt(xe.comparator),eT=new jt(xe.comparator);function Ue(...n){let e=eT;for(const t of n)e=e.add(t);return e}const tT=new jt(De);function nT(){return tT}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function Lw(n){return{integerValue:""+n}}function rT(n,e){return RC(e)?Lw(e):zp(n,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Th{constructor(){this._=void 0}}function sT(n,e,t){return n instanceof nh?(function(s,i){const l={fields:{[mw]:{stringValue:pw},[vw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mp(i)&&(i=Nh(i)),i&&(l.fields[gw]=i),{mapValue:l}})(t,e):n instanceof Ml?Ow(n,e):n instanceof Fl?Mw(n,e):(function(s,i){const l=Dw(s,i),u=Jy(l)+Jy(s.Ee);return Kf(l)&&Kf(s.Ee)?Lw(u):zp(s.serializer,u)})(n,e)}function aT(n,e,t){return n instanceof Ml?Ow(n,e):n instanceof Fl?Mw(n,e):t}function Dw(n,e){return n instanceof rh?(function(t){return Kf(t)||(function(s){return!!s&&"doubleValue"in s})(t)})(e)?e:{integerValue:0}:null}class nh extends Th{}class Ml extends Th{constructor(e){super(),this.elements=e}}function Ow(n,e){const t=Fw(e);for(const s of n.elements)t.some((i=>Hr(i,s)))||t.push(s);return{arrayValue:{values:t}}}class Fl extends Th{constructor(e){super(),this.elements=e}}function Mw(n,e){let t=Fw(e);for(const s of n.elements)t=t.filter((i=>!Hr(i,s)));return{arrayValue:{values:t}}}class rh extends Th{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Jy(n){return _t(n.integerValue||n.doubleValue)}function Fw(n){return Fp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function iT(n,e){return n.field.isEqual(e.field)&&(function(t,s){return t instanceof Ml&&s instanceof Ml||t instanceof Fl&&s instanceof Fl?go(t.elements,s.elements,Hr):t instanceof rh&&s instanceof rh?Hr(t.Ee,s.Ee):t instanceof nh&&s instanceof nh})(n.transform,e.transform)}class oT{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ih{}function Uw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bp(n.key,br.none()):new Xl(n.key,n.data,br.none());{const t=n.data,s=Sn.empty();let i=new jt($t.comparator);for(let l of e.fields)if(!i.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),i=i.add(l)}return new Na(n.key,s,new On(i.toArray()),br.none())}}function lT(n,e,t){n instanceof Xl?(function(s,i,l){const u=s.value.clone(),d=eb(s.fieldTransforms,i,l.transformResults);u.setAll(d),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Na?(function(s,i,l){if(!Vu(s.precondition,i))return void i.convertToUnknownDocument(l.version);const u=eb(s.fieldTransforms,i,l.transformResults),d=i.data;d.setAll(Vw(s)),d.setAll(u),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Sl(n,e,t,s){return n instanceof Xl?(function(i,l,u,d){if(!Vu(i.precondition,l))return u;const f=i.value.clone(),y=tb(i.fieldTransforms,d,l);return f.setAll(y),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,s):n instanceof Na?(function(i,l,u,d){if(!Vu(i.precondition,l))return u;const f=tb(i.fieldTransforms,d,l),y=l.data;return y.setAll(Vw(i)),y.setAll(f),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((w=>w.field)))})(n,e,t,s):(function(i,l,u){return Vu(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function cT(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),l=Dw(s.transform,i||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(s.field,l))}return t||null}function Zy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(t,s){return t===void 0&&s===void 0||!(!t||!s)&&go(t,s,((i,l)=>iT(i,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xl extends Ih{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Na extends Ih{constructor(e,t,s,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Vw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function eb(n,e,t){const s=new Map;Xe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,d=e.data.field(l.field);s.set(l.field,aT(u,d,t[i]))}return s}function tb(n,e,t){const s=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);s.set(i.field,sT(l,u,e))}return s}class Bp extends Ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uT extends Ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hT{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&lT(l,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Sl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Sl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Pw();return this.mutations.forEach((i=>{const l=e.get(i.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(i.key)?null:d;const f=Uw(u,d);f!==null&&s.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,((t,s)=>Zy(t,s)))&&go(this.baseMutations,e.baseMutations,((t,s)=>Zy(t,s)))}}class Hp{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){Xe(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let i=(function(){return ZC})();const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,s[u].version);return new Hp(e,t,s,i)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Et,Be;function pT(n){switch(n){case Y.OK:return Te(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function zw(n){if(n===void 0)return bs("GRPC error has no .code"),Y.UNKNOWN;switch(n){case Et.OK:return Y.OK;case Et.CANCELLED:return Y.CANCELLED;case Et.UNKNOWN:return Y.UNKNOWN;case Et.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Et.INTERNAL:return Y.INTERNAL;case Et.UNAVAILABLE:return Y.UNAVAILABLE;case Et.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Et.NOT_FOUND:return Y.NOT_FOUND;case Et.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Et.ABORTED:return Y.ABORTED;case Et.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Et.DATA_LOSS:return Y.DATA_LOSS;default:return Te(39323,{code:n})}}(Be=Et||(Et={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mT=new la([4294967295,4294967295],0);function nb(n){const e=lw().encode(n),t=new ew;return t.update(e),new Uint8Array(t.digest())}function rb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new la([t,s],0),new la([i,l],0)]}class $p{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new wl(`Invalid padding: ${t}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new wl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=la.fromNumber(this.fe)}pe(e,t,s){let i=e.add(t.multiply(la.fromNumber(s)));return i.compare(mT)===1&&(i=new la([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=nb(e),[s,i]=rb(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,i,l);if(!this.ye(u))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new $p(l,i,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=nb(e),[s,i]=rb(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,i,l);this.we(u)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rh{constructor(e,t,s,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Rh(je.min(),i,new vt(De),ws(),Ue())}}class Jl{constructor(e,t,s,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Jl(s,t,Ue(),Ue(),Ue())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zu{constructor(e,t,s,i){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=i}}class Bw{constructor(e,t){this.targetId=e,this.De=t}}class Hw{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class sb{constructor(){this.ve=0,this.Ce=ab(),this.Fe=Wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ue(),t=Ue(),s=Ue();return this.Ce.forEach(((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Te(38017,{changeType:l})}})),new Jl(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=ab()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class gT{constructor(e){this.We=e,this.Ge=new Map,this.ze=ws(),this.je=Su(),this.Je=Su(),this.He=new vt(De)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,i)=>{this.nt(i)&&t(i)}))}it(e){const t=e.targetId,s=e.De.count,i=this.st(t);if(i){const l=i.target;if(Yf(l))if(s===0){const u=new xe(l.path);this.Xe(t,u,en.newNoDocument(u,je.min()))}else Xe(s===1,20013,{expectedCount:s});else{const u=this.ot(t);if(u!==s){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const y=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:l=0}=t;let u,d;try{u=ma(s).toUint8Array()}catch(f){if(f instanceof fw)return da("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new $p(u,i,l)}catch(f){return da(f instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let i=0;return s.forEach((l=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),i++)})),i}Pt(e){const t=new Map;this.Ge.forEach(((l,u)=>{const d=this.st(u);if(d){if(l.current&&Yf(d.target)){const f=new xe(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,en.newNoDocument(f,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}}));let s=Ue();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((f=>{const y=this.st(f);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const i=new Rh(e,t,this.He,this.ze,s);return this.ze=ws(),this.je=Su(),this.Je=Su(),this.He=new vt(De),i}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new sb,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new jt(De),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new jt(De),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new sb),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Su(){return new vt(xe.comparator)}function ab(){return new vt(xe.comparator)}const vT={asc:"ASCENDING",desc:"DESCENDING"},yT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bT={and:"AND",or:"OR"};class wT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zf(n,e){return n.useProto3Json||Eh(e)?e:{value:e}}function sh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $w(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xT(n,e){return sh(n,e.toTimestamp())}function Ur(n){return Xe(!!n,49232),je.fromTimestamp((function(e){const t=pa(e);return new Ze(t.seconds,t.nanos)})(n))}function qp(n,e){return ep(n,e).canonicalString()}function ep(n,e){const t=(function(s){return new at(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function qw(n){const e=at.fromString(n);return Xe(Yw(e),10190,{key:e.toString()}),e}function tp(n,e){return qp(n.databaseId,e.path)}function Cf(n,e){const t=qw(e);if(t.get(1)!==n.databaseId.projectId)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(Gw(t))}function Ww(n,e){return qp(n.databaseId,e)}function _T(n){const e=qw(n);return e.length===4?at.emptyPath():Gw(e)}function np(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gw(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ib(n,e,t){return{name:tp(n,e),fields:t.value.mapValue.fields}}function kT(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Te(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=(function(f,y){return f.useProto3Json?(Xe(y===void 0||typeof y=="string",58123),Wt.fromBase64String(y||"")):(Xe(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Wt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(f){const y=f.code===void 0?Y.UNKNOWN:zw(f.code);return new he(y,f.message||"")})(u);t=new Hw(s,i,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Cf(n,s.document.name),l=Ur(s.document.updateTime),u=s.document.createTime?Ur(s.document.createTime):je.min(),d=new Sn({mapValue:{fields:s.document.fields}}),f=en.newFoundDocument(i,l,u,d),y=s.targetIds||[],w=s.removedTargetIds||[];t=new zu(y,w,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Cf(n,s.document),l=s.readTime?Ur(s.readTime):je.min(),u=en.newNoDocument(i,l),d=s.removedTargetIds||[];t=new zu([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Cf(n,s.document),l=s.removedTargetIds||[];t=new zu([],l,i,null)}else{if(!("filter"in e))return Te(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:l}=s,u=new fT(i,l),d=s.targetId;t=new Bw(d,u)}}return t}function ET(n,e){let t;if(e instanceof Xl)t={update:ib(n,e.key,e.value)};else if(e instanceof Bp)t={delete:tp(n,e.key)};else if(e instanceof Na)t={update:ib(n,e.key,e.data),updateMask:PT(e.fieldMask)};else{if(!(e instanceof uT))return Te(16599,{Rt:e.type});t={verify:tp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(i,l){const u=l.transform;if(u instanceof nh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ml)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Fl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof rh)return{fieldPath:l.field.canonicalString(),increment:u.Ee};throw Te(20930,{transform:l.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:xT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Te(27497)})(n,e.precondition)),t}function NT(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(s,i){let l=s.updateTime?Ur(s.updateTime):Ur(i);return l.isEqual(je.min())&&(l=Ur(i)),new oT(l,s.transformResults||[])})(t,e)))):[]}function ST(n,e){return{documents:[Ww(n,e.path)]}}function CT(n,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Ww(n,i);const l=(function(f){if(f.length!==0)return Qw(xr.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(f){if(f.length!==0)return f.map((y=>(function(w){return{field:so(w.field),direction:RT(w.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Zf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:i}}function TT(n){let e=_T(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){Xe(s===1,65062);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(w){const x=Kw(w);return x instanceof xr&&kw(x)?x.getFilters():[x]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((x=>(function(S){return new Ol(ao(S.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(x)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let x;return x=typeof w=="object"?w.value:w,Eh(x)?null:x})(t.limit));let f=null;t.startAt&&(f=(function(w){const x=!!w.before,S=w.values||[];return new th(S,x)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const x=!w.before,S=w.values||[];return new th(S,x)})(t.endAt)),KC(e,i,u,l,d,"F",f,y)}function IT(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kw(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ao(e.unaryFilter.field);return Nt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=ao(e.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ao(e.unaryFilter.field);return Nt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ao(e.unaryFilter.field);return Nt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Nt.create(ao(e.fieldFilter.field),(function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return xr.create(e.compositeFilter.filters.map((t=>Kw(t))),(function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(e.compositeFilter.op))})(n):Te(30097,{filter:n})}function RT(n){return vT[n]}function jT(n){return yT[n]}function AT(n){return bT[n]}function so(n){return{fieldPath:n.canonicalString()}}function ao(n){return $t.fromServerFormat(n.fieldPath)}function Qw(n){return n instanceof Nt?(function(e){if(e.op==="=="){if(Gy(e.value))return{unaryFilter:{field:so(e.field),op:"IS_NAN"}};if(Wy(e.value))return{unaryFilter:{field:so(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Gy(e.value))return{unaryFilter:{field:so(e.field),op:"IS_NOT_NAN"}};if(Wy(e.value))return{unaryFilter:{field:so(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(e.field),op:jT(e.op),value:e.value}}})(n):n instanceof xr?(function(e){const t=e.getFilters().map((s=>Qw(s)));return t.length===1?t[0]:{compositeFilter:{op:AT(e.op),filters:t}}})(n):Te(54877,{filter:n})}function PT(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Yw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sa{constructor(e,t,s,i,l=je.min(),u=je.min(),d=Wt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LT{constructor(e){this.gt=e}}function DT(n){const e=TT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jf(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OT{constructor(){this.Dn=new MT}addToCollectionParentIndex(e,t){return this.Dn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(fa.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(fa.min())}updateCollectionGroup(e,t,s){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class MT{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new jt(at.comparator),l=!i.has(s);return this.index[t]=i.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new jt(at.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xw=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(Xw,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new bo(0)}static ur(){return new bo(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lb="LruGarbageCollector",FT=1048576;function cb([n,e],[t,s]){const i=De(n,t);return i===0?De(e,s):i}class UT{constructor(e){this.Tr=e,this.buffer=new jt(cb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();cb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VT{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(lb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){To(t)?pe(lb,"Ignoring IndexedDB error during garbage collection: ",t):await Co(t)}await this.Rr(3e5)}))}}class zT{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(kh.ue);const s=new UT(t);return this.Vr.forEachTarget(e,(i=>s.Er(i.sequenceNumber))).next((()=>this.Vr.gr(e,(i=>s.Er(i))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(ob)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ob):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,i,l,u,d,f,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,u=Date.now(),this.nthSequenceNumber(e,i)))).next((x=>(s=x,d=Date.now(),this.removeTargets(e,s,t)))).next((x=>(l=x,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(y=Date.now(),no()<=Fe.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-w}ms
	Determined least recently used ${i} in `+(d-u)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${x} documents in `+(y-f)+`ms
Total Duration: ${y-w}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:x}))))}}function BT(n,e){return new zT(n,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HT{constructor(){this.changes=new pi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?J.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $T{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qT{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(s!==null&&Sl(s.mutation,i,On.empty(),Ze.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ue()){const i=ri();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,s).next((l=>{let u=bl();return l.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=ri();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ue())))}populateOverlays(e,t,s){const i=[];return s.forEach((l=>{t.has(l)||i.push(l)})),this.documentOverlayCache.getOverlays(e,i).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,i){let l=ws();const u=Nl(),d=(function(){return Nl()})();return t.forEach(((f,y)=>{const w=s.get(y.key);i.has(y.key)&&(w===void 0||w.mutation instanceof Na)?l=l.insert(y.key,y):w!==void 0?(u.set(y.key,w.mutation.getFieldMask()),Sl(w.mutation,y,w.mutation.getFieldMask(),Ze.now())):u.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((y,w)=>u.set(y,w))),t.forEach(((y,w)=>{var x;return d.set(y,new $T(w,(x=u.get(y))!==null&&x!==void 0?x:null))})),d)))}recalculateAndSaveOverlays(e,t){const s=Nl();let i=new vt(((u,d)=>u-d)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const y=t.get(f);if(y===null)return;let w=s.get(f)||On.empty();w=d.applyToLocalView(y,w),s.set(f,w);const x=(i.get(d.batchId)||Ue()).add(f);i=i.insert(d.batchId,x)}))})).next((()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,w=f.value,x=Pw();w.forEach((S=>{if(!l.has(S)){const N=Uw(t.get(S),s.get(S));N!==null&&x.set(S,N),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,x))}return J.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,i){return(function(l){return xe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next((l=>{const u=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-l.size):J.resolve(ri());let d=Al,f=l;return u.next((y=>J.forEach(y,((w,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),l.get(w)?J.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{f=f.insert(w,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,f,y,Ue()))).next((w=>({batchId:d,changes:Aw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((s=>{let i=bl();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const l=t.collectionGroup;let u=bl();return this.indexManager.getCollectionParents(e,l).next((d=>J.forEach(d,(f=>{const y=(function(w,x){return new Io(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,i).next((w=>{w.forEach(((x,S)=>{u=u.insert(x,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,i)))).next((u=>{l.forEach(((f,y)=>{const w=y.getKey();u.get(w)===null&&(u=u.insert(w,en.newInvalidDocument(w)))}));let d=bl();return u.forEach(((f,y)=>{const w=l.get(f);w!==void 0&&Sl(w.mutation,y,On.empty(),Ze.now()),Ch(t,y)&&(d=d.insert(f,y))})),d}))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WT{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return J.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ur(s.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:DT(s.bundledQuery),readTime:Ur(s.readTime)}})(t)),J.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GT{constructor(){this.overlays=new vt(xe.comparator),this.kr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ri();return J.forEach(t,(i=>this.getOverlay(e,i).next((l=>{l!==null&&s.set(i,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((i,l)=>{this.wt(e,t,l)})),J.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.kr.get(s);return i!==void 0&&(i.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),J.resolve()}getOverlaysForCollection(e,t,s){const i=ri(),l=t.length+1,u=new xe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&f.largestBatchId>s&&i.set(f.getKey(),f)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let l=new vt(((y,w)=>y-w));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=ri(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=ri(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((y,w)=>d.set(y,w))),!(d.size()>=i)););return J.resolve(d)}wt(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const u=this.kr.get(i.largestBatchId).delete(s.key);this.kr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new dT(t,s));let l=this.kr.get(t);l===void 0&&(l=Ue(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KT{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wp{constructor(){this.qr=new jt(Mt.Qr),this.$r=new jt(Mt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Mt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Mt(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new xe(new at([])),s=new Mt(t,e),i=new Mt(t,e+1),l=[];return this.$r.forEachInRange([s,i],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new xe(new at([])),s=new Mt(t,e),i=new Mt(t,e+1);let l=Ue();return this.$r.forEachInRange([s,i],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Mt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Mt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return xe.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new jt(Mt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new hT(l,t,s,i);this.mutationQueue.push(u);for(const d of i)this.Yr=this.Yr.add(new Mt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return J.resolve(u)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.Xr(s),l=i<0?0:i;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Op:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Mt(t,0),i=new Mt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,i],(u=>{const d=this.Zr(u.Hr);l.push(d)})),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jt(De);return t.forEach((i=>{const l=new Mt(i,0),u=new Mt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(d=>{s=s.add(d.Hr)}))})),J.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let l=s;xe.isDocumentKey(l)||(l=l.child(""));const u=new Mt(new xe(l),0);let d=new jt(De);return this.Yr.forEachWhile((f=>{const y=f.key.path;return!!s.isPrefixOf(y)&&(y.length===i&&(d=d.add(f.Hr)),!0)}),u),J.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((s=>{const i=this.Zr(s);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return J.forEach(t.mutations,(i=>{const l=new Mt(i.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new Mt(t,0),i=this.Yr.firstAfterOrEqual(s);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YT{constructor(e){this.ni=e,this.docs=(function(){return new vt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),l=i?i.size:0,u=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return J.resolve(s?s.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let s=ws();return t.forEach((i=>{const l=this.docs.get(i);s=s.insert(i,l?l.document.mutableCopy():en.newInvalidDocument(i))})),J.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let l=ws();const u=t.path,d=new xe(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:y,value:{document:w}}=f.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||SC(NC(w),s)<=0||(i.has(w.key)||Ch(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,s,i){Te(9500)}ri(e,t){return J.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new XT(this)}getSize(e){return J.resolve(this.size)}}class XT extends HT{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(s)})),J.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JT{constructor(e){this.persistence=e,this.ii=new pi((t=>Up(t)),Vp),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.si=0,this.oi=new Wp,this.targetCount=0,this._i=bo.ar()}forEachTarget(e,t){return this.ii.forEach(((s,i)=>t(i))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),J.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new bo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.hr(t),J.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,s){let i=0;const l=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),J.waitFor(l).next((()=>i))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return J.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),J.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach((u=>{l.push(i.markPotentiallyOrphaned(e,u))})),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return J.resolve(s)}containsKey(e,t){return J.resolve(this.oi.containsKey(t))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jw{constructor(e,t){this.ai={},this.overlays={},this.ui=new kh(0),this.ci=!1,this.ci=!0,this.li=new KT,this.referenceDelegate=e(this),this.hi=new JT(this),this.indexManager=new OT,this.remoteDocumentCache=(function(s){return new YT(s)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new LT(t),this.Ti=new WT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new QT(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const i=new ZT(this.ui.next());return this.referenceDelegate.Ii(),s(i).next((l=>this.referenceDelegate.di(i).next((()=>l)))).toPromise().then((l=>(i.raiseOnCommittedEvent(),l)))}Ei(e,t){return J.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class ZT extends TC{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Ai=new Wp,this.Ri=null}static Vi(e){return new Gp(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),J.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((i=>this.mi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,(s=>{const i=xe.fromPath(s);return this.fi(e,i).next((l=>{l||t.removeEntry(i,je.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return J.or([()=>J.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ah{constructor(e,t){this.persistence=e,this.gi=new pi((s=>jC(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=BT(this,t)}static Vi(e,t){return new ah(e,t)}Ii(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return J.forEach(this.gi,((s,i)=>this.Sr(e,s,i).next((l=>l?J.resolve():t(i)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(s++,l.removeEntry(u,je.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fu(e.data.value)),t}Sr(e,t,s){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return J.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kp{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=i}static Es(e,t){let s=Ue(),i=Ue();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Kp(e,t.fromCache,s,i)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tI{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return LE()?8:IC(tn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,i){const l={result:null};return this.ps(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,t,i,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new eI;return this.ws(e,t,u).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>l.result))}Ss(e,t,s,i){return s.documentReadCount<this.Vs?(no()<=Fe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(no()<=Fe.DEBUG&&pe("QueryEngine","Query:",ro(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.fs*i?(no()<=Fe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):J.resolve())}ps(e,t){if(Xy(t))return J.resolve(null);let s=Fr(t);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Jf(t,null,"F"),s=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Ue(...l);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((f=>{const y=this.bs(t,d);return this.Ds(t,y,u,f.readTime)?this.ps(e,Jf(t,null,"F")):this.vs(e,y,t,f)}))))})))))}ys(e,t,s,i){return Xy(t)||i.isEqual(je.min())?J.resolve(null):this.gs.getDocuments(e,s).next((l=>{const u=this.bs(t,l);return this.Ds(t,u,s,i)?J.resolve(null):(no()<=Fe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ro(t)),this.vs(e,u,t,EC(i,Al)).next((d=>d)))}))}bs(e,t){let s=new jt(Rw(e));return t.forEach(((i,l)=>{Ch(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ws(e,t,s){return no()<=Fe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ro(t)),this.gs.getDocumentsMatchingQuery(e,t,fa.min(),s)}vs(e,t,s,i){return this.gs.getDocumentsMatchingQuery(e,s,i).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qp="LocalStore",nI=3e8;class rI{constructor(e,t,s,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new vt(De),this.Ms=new pi((l=>Up(l)),Vp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function sI(n,e,t,s){return new rI(n,e,t,s)}async function Zw(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next((l=>(i=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let f=Ue();for(const y of i){u.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}for(const y of l){d.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}return t.localDocuments.getDocuments(s,f).next((y=>({Bs:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function aI(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,y){const w=f.batch,x=w.keys();let S=J.resolve();return x.forEach((N=>{S=S.next((()=>y.getEntry(d,N))).next((V=>{const U=f.docVersions.get(N);Xe(U!==null,48541),V.version.compareTo(U)<0&&(w.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),y.addEntry(V)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,w)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(u){let d=Ue();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(s,i)))}))}function ex(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function iI(n,e){const t=Ae(n),s=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const d=[];e.targetChanges.forEach(((w,x)=>{const S=i.get(x);if(!S)return;d.push(t.hi.removeMatchingKeys(l,w.removedDocuments,x).next((()=>t.hi.addMatchingKeys(l,w.addedDocuments,x))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?N=N.withResumeToken(Wt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,s)),i=i.insert(x,N),(function(V,U,M){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=nI?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(S,N,w)&&d.push(t.hi.updateTargetData(l,N))}));let f=ws(),y=Ue();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),d.push(oI(l,u,e.documentUpdates).next((w=>{f=w.Ls,y=w.ks}))),!s.isEqual(je.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next((x=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(w)}return J.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,y))).next((()=>f))})).then((l=>(t.Fs=i,l)))}function oI(n,e,t){let s=Ue(),i=Ue();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=ws();return t.forEach(((d,f)=>{const y=l.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(je.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||f.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):pe(Qp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)})),{Ls:u,ks:i}}))}function lI(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Op),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function cI(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return t.hi.getTargetData(s,e).next((l=>l?(i=l,J.resolve(i)):t.hi.allocateTargetId(s).next((u=>(i=new sa(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=t.Fs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function rp(n,e,t){const s=Ae(n),i=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!To(u))throw u;pe(Qp,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(i.target)}function ub(n,e,t){const s=Ae(n);let i=je.min(),l=Ue();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,f,y){const w=Ae(d),x=w.Ms.get(y);return x!==void 0?J.resolve(w.Fs.get(x)):w.hi.getTargetData(f,y)})(s,u,Fr(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{l=f}))})).next((()=>s.Cs.getDocumentsMatchingQuery(u,e,t?i:je.min(),t?l:Ue()))).next((d=>(uI(s,YC(e),d),{documents:d,qs:l})))))}function uI(n,e,t){let s=n.xs.get(e)||je.min();t.forEach(((i,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class hb{constructor(){this.activeTargetIds=nT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hI{constructor(){this.Fo=new hb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new hb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dI{xo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const db="ConnectivityMonitor";class fb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(db,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(db,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Cu=null;function sp(){return Cu===null?Cu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cu++,"0x"+Cu.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Tf="RestConnection",fI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pI{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${i}`,this.Ko=this.databaseId.database===Zu?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(e,t,s,i,l){const u=sp(),d=this.Go(e,t.toUriEncodedString());pe(Tf,`Sending RPC '${e}' ${u}:`,d,s);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,l);const{host:y}=new URL(d),w=_a(y);return this.jo(e,d,f,s,w).then((x=>(pe(Tf,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw da(Tf,`RPC '${e}' ${u} failed with error: `,x,"url: ",d,"request:",s),x}))}Jo(e,t,s,i,l,u){return this.Wo(e,t,s,i,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,l)=>e[l]=i)),s&&s.headers.forEach(((i,l)=>e[l]=i))}Go(e,t){const s=fI[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mI{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Jt="WebChannelConnection";class gI extends pI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,i,l){const u=sp();return new Promise(((d,f)=>{const y=new tw;y.setWithCredentials(!0),y.listenOnce(nw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Mu.NO_ERROR:const x=y.getResponseJson();pe(Jt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),d(x);break;case Mu.TIMEOUT:pe(Jt,`RPC '${e}' ${u} timed out`),f(new he(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Mu.HTTP_ERROR:const S=y.getStatus();if(pe(Jt,`RPC '${e}' ${u} failed with status:`,S,"response text:",y.getResponseText()),S>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const V=N==null?void 0:N.error;if(V&&V.status&&V.message){const U=(function(M){const X=M.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(X)>=0?X:Y.UNKNOWN})(V.status);f(new he(U,V.message))}else f(new he(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new he(Y.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:u,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{pe(Jt,`RPC '${e}' ${u} completed.`)}}));const w=JSON.stringify(i);pe(Jt,`RPC '${e}' ${u} sending request:`,i),y.send(t,"POST",w,s,15)}))}P_(e,t,s){const i=sp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=aw(),d=sw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(f.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const w=l.join("");pe(Jt,`Creating RPC '${e}' stream ${i}: ${w}`,f);const x=u.createWebChannel(w,f);this.T_(x);let S=!1,N=!1;const V=new mI({Ho:M=>{N?pe(Jt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(S||(pe(Jt,`Opening RPC '${e}' stream ${i} transport.`),x.open(),S=!0),pe(Jt,`RPC '${e}' stream ${i} sending:`,M),x.send(M))},Yo:()=>x.close()}),U=(M,X,K)=>{M.listen(X,(G=>{try{K(G)}catch(re){setTimeout((()=>{throw re}),0)}}))};return U(x,yl.EventType.OPEN,(()=>{N||(pe(Jt,`RPC '${e}' stream ${i} transport opened.`),V.s_())})),U(x,yl.EventType.CLOSE,(()=>{N||(N=!0,pe(Jt,`RPC '${e}' stream ${i} transport closed`),V.__(),this.I_(x))})),U(x,yl.EventType.ERROR,(M=>{N||(N=!0,da(Jt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),V.__(new he(Y.UNAVAILABLE,"The operation could not be completed")))})),U(x,yl.EventType.MESSAGE,(M=>{var X;if(!N){const K=M.data[0];Xe(!!K,16349);const G=K,re=(G==null?void 0:G.error)||((X=G[0])===null||X===void 0?void 0:X.error);if(re){pe(Jt,`RPC '${e}' stream ${i} received error:`,re);const fe=re.status;let Q=(function(k){const C=Et[k];if(C!==void 0)return zw(C)})(fe),A=re.message;Q===void 0&&(Q=Y.INTERNAL,A="Unknown error status: "+fe+" with message "+re.message),N=!0,V.__(new he(Q,A)),x.close()}else pe(Jt,`RPC '${e}' stream ${i} received:`,K),V.a_(K)}})),U(d,rw.STAT_EVENT,(M=>{M.stat===qf.PROXY?pe(Jt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===qf.NOPROXY&&pe(Jt,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function If(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jh(n){return new wT(n,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tx{constructor(e,t,s=1e3,i=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=i,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-s);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pb="PersistentStream";class nx{constructor(e,t,s,i,l,u,d,f){this.Fi=e,this.w_=s,this.S_=i,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tx(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(bs(t.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.b_===t&&this.W_(s,i)}),(s=>{e((()=>{const i=new he(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(i)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((i=>{s((()=>this.G_(i)))})),this.stream.onMessage((i=>{s((()=>++this.C_==1?this.j_(i):this.onNext(i)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return pe(pb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(pe(pb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vI extends nx{constructor(e,t,s,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=kT(this.serializer,e),s=(function(i){if(!("targetChange"in i))return je.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?je.min():l.readTime?Ur(l.readTime):je.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=np(this.serializer),t.addTarget=(function(i,l){let u;const d=l.target;if(u=Yf(d)?{documents:ST(i,d)}:{query:CT(i,d).Vt},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=$w(i,l.resumeToken);const f=Zf(i,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(je.min())>0){u.readTime=sh(i,l.snapshotVersion.toTimestamp());const f=Zf(i,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const s=IT(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=np(this.serializer),t.removeTarget=e,this.k_(t)}}class yI extends nx{constructor(e,t,s,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=NT(e.writeResults,e.commitTime),s=Ur(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=np(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>ET(this.serializer,s)))};this.k_(t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bI{}class wI extends bI{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,ep(t,s),i,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Y.UNKNOWN,l.toString())}))}Jo(e,t,s,i,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,ep(t,s),i,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(Y.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class xI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(bs(t),this._a=!1):pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ui="RemoteStore";class _I{constructor(e,t,s,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{s.enqueueAndForget((async()=>{mi(this)&&(pe(ui,"Restarting streams for network reachability change."),await(async function(d){const f=Ae(d);f.Ia.add(4),await Zl(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Ah(f)})(this))}))})),this.Aa=new xI(s,i)}}async function Ah(n){if(mi(n))for(const e of n.da)await e(!0)}async function Zl(n){for(const e of n.da)await e(!1)}function rx(n,e){const t=Ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Zp(t)?Jp(t):Ro(t).x_()&&Xp(t,e))}function Yp(n,e){const t=Ae(n),s=Ro(t);t.Ta.delete(e),s.x_()&&sx(t,e),t.Ta.size===0&&(s.x_()?s.B_():mi(t)&&t.Aa.set("Unknown"))}function Xp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ro(n).H_(e)}function sx(n,e){n.Ra.$e(e),Ro(n).Y_(e)}function Jp(n){n.Ra=new gT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ro(n).start(),n.Aa.aa()}function Zp(n){return mi(n)&&!Ro(n).M_()&&n.Ta.size>0}function mi(n){return Ae(n).Ia.size===0}function ax(n){n.Ra=void 0}async function kI(n){n.Aa.set("Online")}async function EI(n){n.Ta.forEach(((e,t)=>{Xp(n,e)}))}async function NI(n,e){ax(n),Zp(n)?(n.Aa.la(e),Jp(n)):n.Aa.set("Unknown")}async function SI(n,e,t){if(n.Aa.set("Online"),e instanceof Hw&&e.state===2&&e.cause)try{await(async function(s,i){const l=i.cause;for(const u of i.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ta.delete(u),s.Ra.removeTarget(u))})(n,e)}catch(s){pe(ui,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ih(n,s)}else if(e instanceof zu?n.Ra.Ye(e):e instanceof Bw?n.Ra.it(e):n.Ra.et(e),!t.isEqual(je.min()))try{const s=await ex(n.localStore);t.compareTo(s)>=0&&await(function(i,l){const u=i.Ra.Pt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.Ta.get(f);y&&i.Ta.set(f,y.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const y=i.Ta.get(d);if(!y)return;i.Ta.set(d,y.withResumeToken(Wt.EMPTY_BYTE_STRING,y.snapshotVersion)),sx(i,d);const w=new sa(y.target,d,f,y.sequenceNumber);Xp(i,w)})),i.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(s){pe(ui,"Failed to raise snapshot:",s),await ih(n,s)}}async function ih(n,e,t){if(!To(e))throw e;n.Ia.add(1),await Zl(n),n.Aa.set("Offline"),t||(t=()=>ex(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(ui,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Ah(n)}))}function ix(n,e){return e().catch((t=>ih(n,t,e)))}async function Ph(n){const e=Ae(n),t=va(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Op;for(;CI(e);)try{const i=await lI(e.localStore,s);if(i===null){e.Pa.length===0&&t.B_();break}s=i.batchId,TI(e,i)}catch(i){await ih(e,i)}ox(e)&&lx(e)}function CI(n){return mi(n)&&n.Pa.length<10}function TI(n,e){n.Pa.push(e);const t=va(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function ox(n){return mi(n)&&!va(n).M_()&&n.Pa.length>0}function lx(n){va(n).start()}async function II(n){va(n).na()}async function RI(n){const e=va(n);for(const t of n.Pa)e.X_(t.mutations)}async function jI(n,e,t){const s=n.Pa.shift(),i=Hp.from(s,e,t);await ix(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ph(n)}async function AI(n,e){e&&va(n).Z_&&await(async function(t,s){if((function(i){return pT(i)&&i!==Y.ABORTED})(s.code)){const i=t.Pa.shift();va(t).N_(),await ix(t,(()=>t.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Ph(t)}})(n,e),ox(n)&&lx(n)}async function mb(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),pe(ui,"RemoteStore received new credentials");const s=mi(t);t.Ia.add(3),await Zl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ah(t)}async function PI(n,e){const t=Ae(n);e?(t.Ia.delete(2),await Ah(t)):e||(t.Ia.add(2),await Zl(t),t.Aa.set("Unknown"))}function Ro(n){return n.Va||(n.Va=(function(e,t,s){const i=Ae(e);return i.ia(),new vI(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Zo:kI.bind(null,n),e_:EI.bind(null,n),n_:NI.bind(null,n),J_:SI.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Zp(n)?Jp(n):n.Aa.set("Unknown")):(await n.Va.stop(),ax(n))}))),n.Va}function va(n){return n.ma||(n.ma=(function(e,t,s){const i=Ae(e);return i.ia(),new yI(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:II.bind(null,n),n_:AI.bind(null,n),ea:RI.bind(null,n),ta:jI.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Ph(n)):(await n.ma.stop(),n.Pa.length>0&&(pe(ui,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class em{constructor(e,t,s,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=l,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,l){const u=Date.now()+s,d=new em(e,t,u,i,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tm(n,e){if(bs("AsyncQueue",`${e}: ${n}`),To(n))return new he(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=bl(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ho;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gb{constructor(){this.fa=new vt(xe.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Te(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class wo{constructor(e,t,s,i,l,u,d,f,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,i,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new wo(e,t,ho.emptySet(t),u,s,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LI{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class DI{constructor(){this.queries=vb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,t){const s=Ae(e),i=s.queries;s.queries=vb(),i.forEach(((l,u)=>{for(const d of u.wa)d.onError(t)}))})(this,new he(Y.ABORTED,"Firestore shutting down"))}}function vb(){return new pi((n=>Iw(n)),Sh)}async function OI(n,e){const t=Ae(n);let s=3;const i=e.query;let l=t.queries.get(i);l?!l.Sa()&&e.ba()&&(s=2):(l=new LI,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(i,!0);break;case 1:l.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const d=tm(u,`Initialization of query '${ro(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&nm(t)}async function MI(n,e){const t=Ae(n),s=e.query;let i=3;const l=t.queries.get(s);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?i=e.ba()?0:1:!l.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function FI(n,e){const t=Ae(n);let s=!1;for(const i of e){const l=i.query,u=t.queries.get(l);if(u){for(const d of u.wa)d.Ca(i)&&(s=!0);u.ya=i}}s&&nm(t)}function UI(n,e,t){const s=Ae(n),i=s.queries.get(e);if(i)for(const l of i.wa)l.onError(t);s.queries.delete(e)}function nm(n){n.Da.forEach((e=>{e.next()}))}var ap,yb;(yb=ap||(ap={})).Fa="default",yb.Cache="cache";class VI{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ap.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cx{constructor(e){this.key=e}}class ux{constructor(e){this.key=e}}class zI{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ue(),this.mutatedKeys=Ue(),this.Xa=Rw(e),this.eu=new ho(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new gb,i=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,y=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((w,x)=>{const S=i.get(w),N=Ch(this.query,x)?x:null,V=!!S&&this.mutatedKeys.has(S.key),U=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let M=!1;S&&N?S.data.isEqual(N.data)?V!==U&&(s.track({type:3,doc:N}),M=!0):this.iu(S,N)||(s.track({type:2,doc:N}),M=!0,(f&&this.Xa(N,f)>0||y&&this.Xa(N,y)<0)&&(d=!0)):!S&&N?(s.track({type:0,doc:N}),M=!0):S&&!N&&(s.track({type:1,doc:S}),M=!0,(f||y)&&(d=!0)),M&&(N?(u=u.add(N),l=U?l.add(w):l.delete(w)):(u=u.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const w=this.query.limitType==="F"?u.last():u.first();u=u.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{eu:u,ru:s,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((w,x)=>(function(S,N){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{At:U})}};return V(S)-V(N)})(w.type,x.type)||this.Xa(w.doc,x.doc))),this.su(s),i=i!=null&&i;const d=t&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,y=f!==this.Ya;return this.Ya=f,u.length!==0||y?{snapshot:new wo(this.query,e.eu,l,u,e.mutatedKeys,f===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new gb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ue(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new ux(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new cx(s))})),t}uu(e){this.Ha=e.qs,this.Za=Ue();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return wo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const rm="SyncEngine";class BI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class HI{constructor(e){this.key=e,this.lu=!1}}class $I{constructor(e,t,s,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new pi((d=>Iw(d)),Sh),this.Tu=new Map,this.Iu=new Set,this.du=new vt(xe.comparator),this.Eu=new Map,this.Au=new Wp,this.Ru={},this.Vu=new Map,this.mu=bo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function qI(n,e,t=!0){const s=gx(n);let i;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.cu()):i=await hx(s,e,t,!0),i}async function WI(n,e){const t=gx(n);await hx(t,e,!0,!1)}async function hx(n,e,t,s){const i=await cI(n.localStore,Fr(e)),l=i.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await GI(n,e,l,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&rx(n.remoteStore,i),d}async function GI(n,e,t,s,i){n.gu=(x,S,N)=>(async function(V,U,M,X){let K=U.view.nu(M);K.Ds&&(K=await ub(V.localStore,U.query,!1).then((({documents:Q})=>U.view.nu(Q,K))));const G=X&&X.targetChanges.get(U.targetId),re=X&&X.targetMismatches.get(U.targetId)!=null,fe=U.view.applyChanges(K,V.isPrimaryClient,G,re);return wb(V,U.targetId,fe._u),fe.snapshot})(n,x,S,N);const l=await ub(n.localStore,e,!0),u=new zI(e,l.qs),d=u.nu(l.documents),f=Jl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",i),y=u.applyChanges(d,n.isPrimaryClient,f);wb(n,t,y._u);const w=new BI(e,t,u);return n.Pu.set(e,w),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function KI(n,e,t){const s=Ae(n),i=s.Pu.get(e),l=s.Tu.get(i.targetId);if(l.length>1)return s.Tu.set(i.targetId,l.filter((u=>!Sh(u,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await rp(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),t&&Yp(s.remoteStore,i.targetId),ip(s,i.targetId)})).catch(Co)):(ip(s,i.targetId),await rp(s.localStore,i.targetId,!0))}async function QI(n,e){const t=Ae(n),s=t.Pu.get(e),i=t.Tu.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Yp(t.remoteStore,s.targetId))}async function YI(n,e,t){const s=rR(n);try{const i=await(function(l,u){const d=Ae(l),f=Ze.now(),y=u.reduce(((S,N)=>S.add(N.key)),Ue());let w,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let N=ws(),V=Ue();return d.Os.getEntries(S,y).next((U=>{N=U,N.forEach(((M,X)=>{X.isValidDocument()||(V=V.add(M))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,N))).next((U=>{w=U;const M=[];for(const X of u){const K=cT(X,w.get(X.key).overlayedDocument);K!=null&&M.push(new Na(X.key,K,ww(K.value.mapValue),br.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,M,u)})).next((U=>{x=U;const M=U.applyToLocalDocumentSet(w,V);return d.documentOverlayCache.saveOverlays(S,U.batchId,M)}))})).then((()=>({batchId:x.batchId,changes:Aw(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(l,u,d){let f=l.Ru[l.currentUser.toKey()];f||(f=new vt(De)),f=f.insert(u,d),l.Ru[l.currentUser.toKey()]=f})(s,i.batchId,t),await ec(s,i.changes),await Ph(s.remoteStore)}catch(i){const l=tm(i,"Failed to persist write");t.reject(l)}}async function dx(n,e){const t=Ae(n);try{const s=await iI(t.localStore,e);e.targetChanges.forEach(((i,l)=>{const u=t.Eu.get(l);u&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.lu=!0:i.modifiedDocuments.size>0?Xe(u.lu,14607):i.removedDocuments.size>0&&(Xe(u.lu,42227),u.lu=!1))})),await ec(t,s,e)}catch(s){await Co(s)}}function bb(n,e,t){const s=Ae(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.Pu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(l,u){const d=Ae(l);d.onlineState=u;let f=!1;d.queries.forEach(((y,w)=>{for(const x of w.wa)x.va(u)&&(f=!0)})),f&&nm(d)})(s.eventManager,e),i.length&&s.hu.J_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function XI(n,e,t){const s=Ae(n);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Eu.get(e),l=i&&i.key;if(l){let u=new vt(xe.comparator);u=u.insert(l,en.newNoDocument(l,je.min()));const d=Ue().add(l),f=new Rh(je.min(),new Map,new vt(De),u,d);await dx(s,f),s.du=s.du.remove(l),s.Eu.delete(e),sm(s)}else await rp(s.localStore,e,!1).then((()=>ip(s,e,t))).catch(Co)}async function JI(n,e){const t=Ae(n),s=e.batch.batchId;try{const i=await aI(t.localStore,e);px(t,s,null),fx(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ec(t,i)}catch(i){await Co(i)}}async function ZI(n,e,t){const s=Ae(n);try{const i=await(function(l,u){const d=Ae(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let y;return d.mutationQueue.lookupMutationBatch(f,u).next((w=>(Xe(w!==null,37113),y=w.keys(),d.mutationQueue.removeMutationBatch(f,w)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y))).next((()=>d.localDocuments.getDocuments(f,y)))}))})(s.localStore,e);px(s,e,t),fx(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ec(s,i)}catch(i){await Co(i)}}function fx(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function px(n,e,t){const s=Ae(n);let i=s.Ru[s.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),s.Ru[s.currentUser.toKey()]=i}}function ip(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||mx(n,s)}))}function mx(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),sm(n))}function wb(n,e,t){for(const s of t)s instanceof cx?(n.Au.addReference(s.key,e),eR(n,s)):s instanceof ux?(pe(rm,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||mx(n,s.key)):Te(19791,{yu:s})}function eR(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(pe(rm,"New document in limbo: "+t),n.Iu.add(s),sm(n))}function sm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new xe(at.fromString(e)),s=n.mu.next();n.Eu.set(s,new HI(t)),n.du=n.du.insert(t,s),rx(n.remoteStore,new sa(Fr(Cw(t.path)),s,"TargetPurposeLimboResolution",kh.ue))}}async function ec(n,e,t){const s=Ae(n),i=[],l=[],u=[];s.Pu.isEmpty()||(s.Pu.forEach(((d,f)=>{u.push(s.gu(f,e,t).then((y=>{var w;if((y||t)&&s.isPrimaryClient){const x=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(f.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(f.targetId,x?"current":"not-current")}if(y){i.push(y);const x=Kp.Es(f.targetId,y);l.push(x)}})))})),await Promise.all(u),s.hu.J_(i),await(async function(d,f){const y=Ae(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>J.forEach(f,(x=>J.forEach(x.Is,(S=>y.persistence.referenceDelegate.addReference(w,x.targetId,S))).next((()=>J.forEach(x.ds,(S=>y.persistence.referenceDelegate.removeReference(w,x.targetId,S)))))))))}catch(w){if(!To(w))throw w;pe(Qp,"Failed to update sequence numbers: "+w)}for(const w of f){const x=w.targetId;if(!w.fromCache){const S=y.Fs.get(x),N=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(N);y.Fs=y.Fs.insert(x,V)}}})(s.localStore,l))}async function tR(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){pe(rm,"User change. New user:",e.toKey());const s=await Zw(t.localStore,e);t.currentUser=e,(function(i,l){i.Vu.forEach((u=>{u.forEach((d=>{d.reject(new he(Y.CANCELLED,l))}))})),i.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ec(t,s.Bs)}}function nR(n,e){const t=Ae(n),s=t.Eu.get(e);if(s&&s.lu)return Ue().add(s.key);{let i=Ue();const l=t.Tu.get(e);if(!l)return i;for(const u of l){const d=t.Pu.get(u);i=i.unionWith(d.view.tu)}return i}}function gx(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XI.bind(null,e),e.hu.J_=FI.bind(null,e.eventManager),e.hu.pu=UI.bind(null,e.eventManager),e}function rR(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return sI(this.persistence,new tI,e.initialUser,this.serializer)}Du(e){return new Jw(Gp.Vi,this.serializer)}bu(e){return new hI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class sR extends oh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof ah,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new VT(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Jw((s=>ah.Vi(s,t)),this.serializer)}}class op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tR.bind(null,this.syncEngine),await PI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DI})()}createDatastore(e){const t=jh(e.databaseInfo.databaseId),s=(function(i){return new gI(i)})(e.databaseInfo);return(function(i,l,u,d){return new wI(i,l,u,d)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(t,s,i,l,u){return new _I(t,s,i,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>bb(this.syncEngine,t,0)),(function(){return fb.C()?new fb:new dI})())}createSyncEngine(e,t){return(function(s,i,l,u,d,f,y){const w=new $I(s,i,l,u,d,f);return y&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const i=Ae(s);pe(ui,"RemoteStore shutting down."),i.Ia.add(5),await Zl(i),i.Ea.shutdown(),i.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}op.provider={build:()=>new op};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):bs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ya="FirestoreClient";class iR{constructor(e,t,s,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=Zt.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{pe(ya,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(pe(ya,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=tm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Rf(n,e){n.asyncQueue.verifyOperationInProgress(),pe(ya,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async i=>{s.isEqual(i)||(await Zw(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>{da("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((i=>{da("Terminating Firestore due to IndexedDb database deletion failed",i)}))})),n._offlineComponents=e}async function xb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oR(n);pe(ya,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>mb(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,i)=>mb(e.remoteStore,i))),n._onlineComponents=e}async function oR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(ya,"Using user provided OfflineComponentProvider");try{await Rf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;da("Error using user provided cache. Falling back to memory cache: "+t),await Rf(n,new oh)}}else pe(ya,"Using default OfflineComponentProvider"),await Rf(n,new sR(void 0));return n._offlineComponents}async function vx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(ya,"Using user provided OnlineComponentProvider"),await xb(n,n._uninitializedComponentsProvider._online)):(pe(ya,"Using default OnlineComponentProvider"),await xb(n,new op))),n._onlineComponents}function lR(n){return vx(n).then((e=>e.syncEngine))}async function cR(n){const e=await vx(n),t=e.eventManager;return t.onListen=qI.bind(null,e.syncEngine),t.onUnlisten=KI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QI.bind(null,e.syncEngine),t}function uR(n,e,t={}){const s=new ca;return n.asyncQueue.enqueueAndForget((async()=>(function(i,l,u,d,f){const y=new aR({next:x=>{y.Ou(),l.enqueueAndForget((()=>MI(i,w))),x.fromCache&&d.source==="server"?f.reject(new he(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),w=new VI(u,y,{includeMetadataChanges:!0,ka:!0});return OI(i,w)})(await cR(n),n.asyncQueue,e,t,s))),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _b=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bx="firestore.googleapis.com",kb=!0;class Eb{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bx,this.ssl=kb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:kb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FT)throw new he(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yx((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(t,s){return t.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lh{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(t){if(!t)return new pC;switch(t.type){case"firstParty":return new yC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new he(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const t=_b.get(e);t&&(pe("ComponentProvider","Removing Datastore"),_b.delete(e),t.terminate())})(this),Promise.resolve()}}function hR(n,e,t,s={}){var i;n=ci(n,Lh);const l=_a(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;l&&(wp(`https://${f}`),xp("Firestore",!0)),u.host!==bx&&u.host!==f&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},u),{host:f,ssl:l,emulatorOptions:s});if(!ai(y,d)&&(n._setSettings(y),s.mockUserToken)){let w,x;if(typeof s.mockUserToken=="string")w=s.mockUserToken,x=Zt.MOCK_USER;else{w=m0(s.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new he(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Zt(S)}n._authCredentials=new mC(new ow(w,x))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class Rt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Yl(t,Rt._jsonSchema))return new Rt(e,s||null,new xe(at.fromString(t.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:St("string",Rt._jsonSchemaVersion),referencePath:St("string")};class ua extends gi{constructor(e,t,s){super(e,t,Cw(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new xe(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function Zn(n,e,...t){if(n=gt(n),cw("collection","path",e),n instanceof Lh){const s=at.fromString(e,...t);return My(s),new ua(n,null,s)}{if(!(n instanceof Rt||n instanceof ua))throw new he(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(at.fromString(e,...t));return My(s),new ua(n.firestore,null,s)}}function xo(n,e,...t){if(n=gt(n),arguments.length===1&&(e=Dp.newId()),cw("doc","path",e),n instanceof Lh){const s=at.fromString(e,...t);return Oy(s),new Rt(n,null,new xe(s))}{if(!(n instanceof Rt||n instanceof ua))throw new he(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(at.fromString(e,...t));return Oy(s),new Rt(n.firestore,n instanceof ua?n.converter:null,new xe(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nb="AsyncQueue";class Sb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tx(this,"async_queue_retry"),this.oc=()=>{const s=If();s&&pe(Nb,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ca;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!To(e))throw e;pe(Nb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,bs("INTERNAL UNHANDLED ERROR: ",Cb(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=em.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(i),i}ac(){this.tc&&Te(47125,{hc:Cb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Cb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class tc extends Lh{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new Sb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sb(e),this._firestoreClient=void 0,await e}}}function dR(n,e){const t=typeof n=="object"?n:Ep(),s=typeof n=="string"?n:Zu,i=vh(t,"firestore").getImmediate({identifier:s});if(!i._initialized){const l=d0("firestore");l&&hR(i,...l)}return i}function wx(n){if(n._terminated)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fR(n),n._firestoreClient}function fR(n){var e,t,s;const i=n._freezeSettings(),l=(function(u,d,f,y){return new LC(u,d,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,yx(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new iR(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}})(n._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(Wt.fromBase64String(e))}catch(t){throw new he(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yl(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:St("string",Jn._jsonSchemaVersion),bytes:St("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class am{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vr._jsonSchemaVersion}}static fromJSON(e){if(Yl(e,Vr._jsonSchema))return new Vr(e.latitude,e.longitude)}}Vr._jsonSchemaVersion="firestore/geoPoint/1.0",Vr._jsonSchema={type:St("string",Vr._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(t,s){if(t.length!==s.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yl(e,zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zr(e.vectorValues);throw new he(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zr._jsonSchemaVersion="firestore/vectorValue/1.0",zr._jsonSchema={type:St("string",zr._jsonSchemaVersion),vectorValues:St("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pR=/^__.*__$/;class mR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Na(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class xx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _x(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:n})}}class im{constructor(e,t,s,i,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new im(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:s,mc:!1});return i.fc(e),i}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:s,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return lh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(_x(this.Ec)&&pR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class gR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jh(e)}Dc(e,t,s,i=!1){return new im({Ec:e,methodName:t,bc:s,path:$t.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function om(n){const e=n._freezeSettings(),t=jh(n._databaseId);return new gR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vR(n,e,t,s,i,l={}){const u=n.Dc(l.merge||l.mergeFields?2:0,e,t,i);lm("Data must be an object, but it was:",u,s);const d=kx(s,u);let f,y;if(l.merge)f=new On(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const w=[];for(const x of l.mergeFields){const S=lp(e,x,t);if(!u.contains(S))throw new he(Y.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Nx(w,S)||w.push(S)}f=new On(w),y=u.fieldTransforms.filter((x=>f.covers(x.field)))}else f=null,y=u.fieldTransforms;return new mR(new Sn(d),f,y)}class Oh extends am{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oh}}function yR(n,e,t,s){const i=n.Dc(1,e,t);lm("Data must be an object, but it was:",i,s);const l=[],u=Sn.empty();Ea(s,((f,y)=>{const w=cm(e,f,t);y=gt(y);const x=i.gc(w);if(y instanceof Oh)l.push(w);else{const S=nc(y,x);S!=null&&(l.push(w),u.set(w,S))}}));const d=new On(l);return new xx(u,d,i.fieldTransforms)}function bR(n,e,t,s,i,l){const u=n.Dc(1,e,t),d=[lp(e,s,t)],f=[i];if(l.length%2!=0)throw new he(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(lp(e,l[S])),f.push(l[S+1]);const y=[],w=Sn.empty();for(let S=d.length-1;S>=0;--S)if(!Nx(y,d[S])){const N=d[S];let V=f[S];V=gt(V);const U=u.gc(N);if(V instanceof Oh)y.push(N);else{const M=nc(V,U);M!=null&&(y.push(N),w.set(N,M))}}const x=new On(y);return new xx(w,x,u.fieldTransforms)}function wR(n,e,t,s=!1){return nc(t,n.Dc(s?4:3,e))}function nc(n,e){if(Ex(n=gt(n)))return lm("Unsupported field value:",e,n),kx(n,e);if(n instanceof am)return(function(t,s){if(!_x(s.Ec))throw s.wc(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(t,s){const i=[];let l=0;for(const u of t){let d=nc(u,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),l++}return{arrayValue:{values:i}}})(n,e)}return(function(t,s){if((t=gt(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return rT(s.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const i=Ze.fromDate(t);return{timestampValue:sh(s.serializer,i)}}if(t instanceof Ze){const i=new Ze(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:sh(s.serializer,i)}}if(t instanceof Vr)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Jn)return{bytesValue:$w(s.serializer,t._byteString)};if(t instanceof Rt){const i=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qp(t.firestore._databaseId||s.databaseId,t._key.path)}}if(t instanceof zr)return(function(i,l){return{mapValue:{fields:{[yw]:{stringValue:bw},[eh]:{arrayValue:{values:i.toArray().map((u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return zp(l.serializer,u)}))}}}}}})(t,s);throw s.wc(`Unsupported field value: ${_h(t)}`)})(n,e)}function kx(n,e){const t={};return dw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(n,((s,i)=>{const l=nc(i,e.Vc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Ex(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof Vr||n instanceof Jn||n instanceof Rt||n instanceof am||n instanceof zr)}function lm(n,e,t){if(!Ex(t)||!uw(t)){const s=_h(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function lp(n,e,t){if((e=gt(e))instanceof Dh)return e._internalPath;if(typeof e=="string")return cm(n,e);throw lh("Field path arguments must be of type string or ",n,!1,void 0,t)}const xR=new RegExp("[~\\*/\\[\\]]");function cm(n,e,t){if(e.search(xR)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dh(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lh(n,e,t,s,i){const l=s&&!s.isEmpty(),u=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${s}`),u&&(f+=` in document ${i}`),f+=")"),new he(Y.INVALID_ARGUMENT,d+n+f)}function Nx(n,e){return n.some((t=>t.isEqual(e)))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sx{constructor(e,t,s,i,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _R(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(um("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _R extends Sx{data(){return super.data()}}function um(n,e){return typeof e=="string"?cm(n,e):e instanceof Dh?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hm{}class Cx extends hm{}function Sa(n,e,...t){let s=[];e instanceof hm&&s.push(e),s=s.concat(t),(function(i){const l=i.filter((d=>d instanceof fm)).length,u=i.filter((d=>d instanceof dm)).length;if(l>1||l>0&&u>0)throw new he(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)n=i._apply(n);return n}class dm extends Cx{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new dm(e,t,s)}_apply(e){const t=this._parse(e);return Tx(e._query,t),new gi(e.firestore,e.converter,Xf(e._query,t))}_parse(e){const t=om(e.firestore);return(function(s,i,l,u,d,f,y){let w;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new he(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ib(y,f);const x=[];for(const S of y)x.push(Tb(u,s,S));w={arrayValue:{values:x}}}else w=Tb(u,s,y)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ib(y,f),w=wR(l,i,y,f==="in"||f==="not-in");return Nt.create(d,f,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class fm extends hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let l=s;const u=i.getFlattenedFilters();for(const d of u)Tx(l,d),l=Xf(l,d)})(e._query,t),new gi(e.firestore,e.converter,Xf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pm extends Cx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pm(e,t)}_apply(e){const t=(function(s,i,l){if(s.startAt!==null)throw new he(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ol(i,l)})(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,(function(s,i){const l=s.explicitOrderBy.concat([i]);return new Io(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Ca(n,e="asc"){const t=e,s=um("orderBy",n);return pm._create(s,t)}function Tb(n,e,t){if(typeof(t=gt(t))=="string"){if(t==="")throw new he(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tw(e)&&t.indexOf("/")!==-1)throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(at.fromString(t));if(!xe.isDocumentKey(s))throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return qy(n,new xe(s))}if(t instanceof Rt)return qy(n,t._key);throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(t)}.`)}function Ib(n,e){if(!Array.isArray(n)||n.length===0)throw new he(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tx(n,e){const t=(function(s,i){for(const l of s)for(const u of l.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ER{convertValue(e,t="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ea(e,((i,l)=>{s[i]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,i;const l=(i=(s=(t=e.fields)===null||t===void 0?void 0:t[eh].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map((u=>_t(u.doubleValue)));return new zr(l)}convertGeoPoint(e){return new Vr(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Nh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){const t=pa(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=at.fromString(e);Xe(Yw(s),9688,{name:e});const i=new Ll(s.get(1),s.get(3)),l=new xe(s.popFirst(5));return i.isEqual(t)||bs(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NR(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Tu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fo extends Sx{constructor(e,t,s,i,l,u){super(e,t,s,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(um("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),t}}fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",fo._jsonSchema={type:St("string",fo._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class Bu extends fo{data(e={}){return super.data(e)}}class po{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tu(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Bu(this._firestore,this._userDataWriter,s.key,s,new Tu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Bu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Tu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new Bu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Tu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,y=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:SR(u.type),doc:d,oldIndex:f,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],i=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),i.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:St("string",po._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class CR extends ER{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}function Ta(n){n=ci(n,gi);const e=ci(n.firestore,tc),t=wx(e),s=new CR(e);return kR(n._query),uR(t,n._query).then((i=>new po(e,s,n,i)))}function TR(n,e,t,...s){n=ci(n,Rt);const i=ci(n.firestore,tc),l=om(i);let u;return u=typeof(e=gt(e))=="string"||e instanceof Dh?bR(l,"updateDoc",n._key,e,t,s):yR(l,"updateDoc",n._key,e),mm(i,[u.toMutation(n._key,br.exists(!0))])}function Mh(n){return mm(ci(n.firestore,tc),[new Bp(n._key,br.none())])}function Fh(n,e){const t=ci(n.firestore,tc),s=xo(n),i=NR(n.converter,e);return mm(t,[vR(om(n.firestore),"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,br.exists(!1))]).then((()=>s))}function mm(n,e){return(function(t,s){const i=new ca;return t.asyncQueue.enqueueAndForget((async()=>YI(await lR(t),s,i))),i.promise})(wx(n),e)}(function(n,e=!0){(function(t){So=t})(di),ii(new ha("firestore",((t,{instanceIdentifier:s,options:i})=>{const l=t.getProvider("app").getImmediate(),u=new tc(new gC(t.getProvider("auth-internal")),new bC(l,t.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new he(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(d.options.projectId,f)})(l,s),l);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),Dr(jy,Ay,n),Dr(jy,Ay,"esm2017")})();/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ix="firebasestorage.googleapis.com",Rx="storageBucket",IR=120*1e3,RR=600*1e3,jR=1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yt extends qr{constructor(e,t,s=0){super(jf(e),`Firebase Storage: ${t} (${jf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function jf(n){return"storage/"+n}function gm(){const n="An unknown error occurred, please check the error payload for server response.";return new yt(lt.UNKNOWN,n)}function AR(n){return new yt(lt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function PR(n){return new yt(lt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LR(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(lt.UNAUTHENTICATED,n)}function DR(){return new yt(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function OR(n){return new yt(lt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function jx(){return new yt(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ax(){return new yt(lt.CANCELED,"User canceled the upload/download.")}function MR(n){return new yt(lt.INVALID_URL,"Invalid URL '"+n+"'.")}function FR(n){return new yt(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function UR(){return new yt(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rx+"' property when initializing the app?")}function Px(){return new yt(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VR(){return new yt(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function zR(){return new yt(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function BR(n){return new yt(lt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cp(n){return new yt(lt.INVALID_ARGUMENT,n)}function Lx(){return new yt(lt.APP_DELETED,"The Firebase app was deleted.")}function HR(n){return new yt(lt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cl(n,e){return new yt(lt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ml(n){throw new yt(lt.INTERNAL_ERROR,"Internal error: "+n)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Mn.makeFromUrl(e,t)}catch{return new Mn(e,"")}if(s.path==="")return s;throw FR(e)}static makeFromUrl(e,t){let s=null;const i="([A-Za-z0-9.\\-_]+)";function l(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+i+u,"i"),f={bucket:1,path:3};function y(G){G.path_=decodeURIComponent(G.path)}const w="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",N=new RegExp(`^https?://${x}/${w}/b/${i}/o${S}`,"i"),V={bucket:1,path:3},U=t===Ix?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",X=new RegExp(`^https?://${U}/${i}/${M}`,"i"),K=[{regex:d,indices:f,postModify:l},{regex:N,indices:V,postModify:y},{regex:X,indices:{bucket:1,path:2},postModify:y}];for(let G=0;G<K.length;G++){const re=K[G],fe=re.regex.exec(e);if(fe){const Q=fe[re.indices.bucket];let A=fe[re.indices.path];A||(A=""),s=new Mn(Q,A),re.postModify(s);break}}if(s==null)throw MR(e);return s}}class $R{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qR(n,e,t){let s=1,i=null,l=null,u=!1,d=0;function f(){return d===2}let y=!1;function w(...M){y||(y=!0,e.apply(null,M))}function x(M){i=setTimeout(()=>{i=null,n(N,f())},M)}function S(){l&&clearTimeout(l)}function N(M,...X){if(y){S();return}if(M){S(),w.call(null,M,...X);return}if(f()||u){S(),w.call(null,M,...X);return}s<64&&(s*=2);let K;d===1?(d=2,K=0):K=(s+Math.random())*1e3,x(K)}let V=!1;function U(M){V||(V=!0,S(),!y&&(i!==null?(M||(d=2),clearTimeout(i),x(0)):M||(d=1)))}return x(0),l=setTimeout(()=>{u=!0,U(!0)},t),U}function WR(n){n(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GR(n){return n!==void 0}function KR(n){return typeof n=="function"}function QR(n){return typeof n=="object"&&!Array.isArray(n)}function Uh(n){return typeof n=="string"||n instanceof String}function Rb(n){return vm()&&n instanceof Blob}function vm(){return typeof Blob<"u"}function jb(n,e,t,s){if(s<e)throw cp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw cp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jo(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function Dx(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const i=e(s)+"="+e(n[s]);t=t+i+"&"}return t=t.slice(0,-1),t}var si;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(si||(si={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ox(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YR{constructor(e,t,s,i,l,u,d,f,y,w,x,S=!0,N=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=x,this.retry=S,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,U)=>{this.resolve_=V,this.reject_=U,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new Iu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=d=>{const f=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,y)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const d=l.getErrorCode()===si.NO_ERROR,f=l.getStatus();if(!d||Ox(f,this.additionalRetryCodes_)&&this.retry){const w=l.getErrorCode()===si.ABORT;s(!1,new Iu(!1,null,w));return}const y=this.successCodes_.indexOf(f)!==-1;s(!0,new Iu(y,l))})},t=(s,i)=>{const l=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());GR(f)?l(f):l()}catch(f){u(f)}else if(d!==null){const f=gm();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(i.canceled){const f=this.appDelete_?Lx():Ax();u(f)}else{const f=jx();u(f)}};this.canceled_?t(!1,new Iu(!1,null,!0)):this.backoffId_=qR(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Iu{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function XR(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function JR(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ZR(n,e){e&&(n["X-Firebase-GMPID"]=e)}function e4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function t4(n,e,t,s,i,l,u=!0,d=!1){const f=Dx(n.urlParams),y=n.url+f,w=Object.assign({},n.headers);return ZR(w,e),XR(w,t),JR(w,l),e4(w,s),new YR(y,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u,d)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function n4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function r4(...n){const e=n4();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(vm())return new Blob(n);throw new yt(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function s4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a4(n){if(typeof atob>"u")throw BR("base-64");return atob(n)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Af{constructor(e,t){this.data=e,this.contentType=t||null}}function i4(n,e){switch(n){case Lr.RAW:return new Af(Mx(e));case Lr.BASE64:case Lr.BASE64URL:return new Af(Fx(n,e));case Lr.DATA_URL:return new Af(l4(e),c4(e))}throw gm()}function Mx(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=s,l=n.charCodeAt(++t);s=65536|(i&1023)<<10|l&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function o4(n){let e;try{e=decodeURIComponent(n)}catch{throw Cl(Lr.DATA_URL,"Malformed data URL.")}return Mx(e)}function Fx(n,e){switch(n){case Lr.BASE64:{const i=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(i||l)throw Cl(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Lr.BASE64URL:{const i=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(i||l)throw Cl(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=a4(e)}catch(i){throw i.message.includes("polyfill")?i:Cl(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s}class Ux{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Cl(Lr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=u4(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function l4(n){const e=new Ux(n);return e.base64?Fx(Lr.BASE64,e.rest):o4(e.rest)}function c4(n){return new Ux(n).contentType}function u4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ra{constructor(e,t){let s=0,i="";Rb(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Rb(this.data_)){const s=this.data_,i=s4(s,e,t);return i===null?null:new ra(i)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new ra(s,!0)}}static getBlob(...e){if(vm()){const t=e.map(s=>s instanceof ra?s.data_:s);return new ra(r4.apply(null,t))}else{const t=e.map(u=>Uh(u)?i4(Lr.RAW,u).data:u.data_);let s=0;t.forEach(u=>{s+=u.byteLength});const i=new Uint8Array(s);let l=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[l++]=u[d]}),new ra(i,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vx(n){let e;try{e=JSON.parse(n)}catch{return null}return QR(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function h4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function d4(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function zx(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f4(n,e){return e}class un{constructor(e,t,s,i){this.server=e,this.local=t||e,this.writable=!!s,this.xform=i||f4}}let Ru=null;function p4(n){return!Uh(n)||n.length<2?n:zx(n)}function Bx(){if(Ru)return Ru;const n=[];n.push(new un("bucket")),n.push(new un("generation")),n.push(new un("metageneration")),n.push(new un("name","fullPath",!0));function e(l,u){return p4(u)}const t=new un("name");t.xform=e,n.push(t);function s(l,u){return u!==void 0?Number(u):u}const i=new un("size");return i.xform=s,n.push(i),n.push(new un("timeCreated")),n.push(new un("updated")),n.push(new un("md5Hash",null,!0)),n.push(new un("cacheControl",null,!0)),n.push(new un("contentDisposition",null,!0)),n.push(new un("contentEncoding",null,!0)),n.push(new un("contentLanguage",null,!0)),n.push(new un("contentType",null,!0)),n.push(new un("metadata","customMetadata",!0)),Ru=n,Ru}function m4(n,e){function t(){const s=n.bucket,i=n.fullPath,l=new Mn(s,i);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function g4(n,e,t){const s={};s.type="file";const i=t.length;for(let l=0;l<i;l++){const u=t[l];s[u.local]=u.xform(s,e[u.server])}return m4(s,n),s}function Hx(n,e,t){const s=Vx(e);return s===null?null:g4(n,s,t)}function v4(n,e,t,s){const i=Vx(e);if(i===null||!Uh(i.downloadTokens))return null;const l=i.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(d=>{const f=n.bucket,y=n.fullPath,w="/b/"+u(f)+"/o/"+u(y),x=jo(w,t,s),S=Dx({alt:"media",token:d});return x+S})[0]}function $x(n,e){const t={},s=e.length;for(let i=0;i<s;i++){const l=e[i];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class vi{constructor(e,t,s,i){this.url=e,this.method=t,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ms(n){if(!n)throw gm()}function ym(n,e){function t(s,i){const l=Hx(n,i,e);return ms(l!==null),l}return t}function y4(n,e){function t(s,i){const l=Hx(n,i,e);return ms(l!==null),v4(l,i,n.host,n._protocol)}return t}function rc(n){function e(t,s){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=DR():i=LR():t.getStatus()===402?i=PR(n.bucket):t.getStatus()===403?i=OR(n.path):i=s,i.status=t.getStatus(),i.serverResponse=s.serverResponse,i}return e}function bm(n){const e=rc(n);function t(s,i){let l=e(s,i);return s.getStatus()===404&&(l=AR(n.path)),l.serverResponse=i.serverResponse,l}return t}function b4(n,e,t){const s=e.fullServerUrl(),i=jo(s,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,d=new vi(i,l,ym(n,t),u);return d.errorHandler=bm(e),d}function w4(n,e,t){const s=e.fullServerUrl(),i=jo(s,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,d=new vi(i,l,y4(n,t),u);return d.errorHandler=bm(e),d}function x4(n,e){const t=e.fullServerUrl(),s=jo(t,n.host,n._protocol),i="DELETE",l=n.maxOperationRetryTime;function u(f,y){}const d=new vi(s,i,u,l);return d.successCodes=[200,204],d.errorHandler=bm(e),d}function _4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function qx(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=_4(null,e)),s}function k4(n,e,t,s,i){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let G="";for(let re=0;re<2;re++)G=G+Math.random().toString().slice(2);return G}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const y=qx(e,s,i),w=$x(y,t),x="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+f+`\r
Content-Type: `+y.contentType+`\r
\r
`,S=`\r
--`+f+"--",N=ra.getBlob(x,s,S);if(N===null)throw Px();const V={name:y.fullPath},U=jo(l,n.host,n._protocol),M="POST",X=n.maxUploadRetryTime,K=new vi(U,M,ym(n,t),X);return K.urlParams=V,K.headers=u,K.body=N.uploadData(),K.errorHandler=rc(e),K}class ch{constructor(e,t,s,i){this.current=e,this.total=t,this.finalized=!!s,this.metadata=i||null}}function wm(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ms(!1)}return ms(!!t&&(e||["active"]).indexOf(t)!==-1),t}function E4(n,e,t,s,i){const l=e.bucketOnlyServerUrl(),u=qx(e,s,i),d={name:u.fullPath},f=jo(l,n.host,n._protocol),y="POST",w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=$x(u,t),S=n.maxUploadRetryTime;function N(U){wm(U);let M;try{M=U.getResponseHeader("X-Goog-Upload-URL")}catch{ms(!1)}return ms(Uh(M)),M}const V=new vi(f,y,N,S);return V.urlParams=d,V.headers=w,V.body=x,V.errorHandler=rc(e),V}function N4(n,e,t,s){const i={"X-Goog-Upload-Command":"query"};function l(y){const w=wm(y,["active","final"]);let x=null;try{x=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ms(!1)}x||ms(!1);const S=Number(x);return ms(!isNaN(S)),new ch(S,s.size(),w==="final")}const u="POST",d=n.maxUploadRetryTime,f=new vi(t,u,l,d);return f.headers=i,f.errorHandler=rc(e),f}const Ab=256*1024;function S4(n,e,t,s,i,l,u,d){const f=new ch(0,0);if(u?(f.current=u.current,f.total=u.total):(f.current=0,f.total=s.size()),s.size()!==f.total)throw VR();const y=f.total-f.current;let w=y;i>0&&(w=Math.min(w,i));const x=f.current,S=x+w;let N="";w===0?N="finalize":y===w?N="upload, finalize":N="upload";const V={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${f.current}`},U=s.slice(x,S);if(U===null)throw Px();function M(re,fe){const Q=wm(re,["active","final"]),A=f.current+w,k=s.size();let C;return Q==="final"?C=ym(e,l)(re,fe):C=null,new ch(A,k,Q==="final",C)}const X="POST",K=e.maxUploadRetryTime,G=new vi(t,X,M,K);return G.headers=V,G.body=U.uploadData(),G.progressCallback=d||null,G.errorHandler=rc(n),G}const Nn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pf(n){switch(n){case"running":case"pausing":case"canceling":return Nn.RUNNING;case"paused":return Nn.PAUSED;case"success":return Nn.SUCCESS;case"canceled":return Nn.CANCELED;case"error":return Nn.ERROR;default:return Nn.ERROR}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C4{constructor(e,t,s){if(KR(e)||t!=null||s!=null)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function to(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class T4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=si.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=si.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=si.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,i,l){if(this.sent_)throw ml("cannot .send() more than once");if(_a(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ml("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ml("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ml("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ml("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class I4 extends T4{initXhr(){this.xhr_.responseType="text"}}function ni(){return new I4}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class R4{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=Bx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(Ox(i.status,[]))if(l)i=jx();else{this.sleepTime=Math.max(this.sleepTime*2,jR),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const s=E4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,ni,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const i=N4(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(i,ni,t,s);this._request=l,l.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ab*this._chunkMultiplier,t=new ch(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((i,l)=>{let u;try{u=S4(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){this._error=f,this._transition("error");return}const d=this._ref.storage._makeRequest(u,ni,i,l,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ab*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=b4(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(s,ni,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=k4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,ni,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ax(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Pf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,i){const l=new C4(t||void 0,s||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Pf(this._state)){case Nn.SUCCESS:to(this._resolve.bind(null,this.snapshot))();break;case Nn.CANCELED:case Nn.ERROR:const t=this._reject;to(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pf(this._state)){case Nn.RUNNING:case Nn.PAUSED:e.next&&to(e.next.bind(e,this.snapshot))();break;case Nn.SUCCESS:e.complete&&to(e.complete.bind(e))();break;case Nn.CANCELED:case Nn.ERROR:e.error&&to(e.error.bind(e,this._error))();break;default:e.error&&to(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hi{constructor(e,t){this._service=e,t instanceof Mn?this._location=t:this._location=Mn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hi(e,t)}get root(){const e=new Mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zx(this._location.path)}get storage(){return this._service}get parent(){const e=h4(this._location.path);if(e===null)return null;const t=new Mn(this._location.bucket,e);return new hi(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw HR(e)}}function j4(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new R4(n,new ra(e),t)}function A4(n){n._throwIfRoot("getDownloadURL");const e=w4(n.storage,n._location,Bx());return n.storage.makeRequestWithTokens(e,ni).then(t=>{if(t===null)throw zR();return t})}function P4(n){n._throwIfRoot("deleteObject");const e=x4(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ni)}function L4(n,e){const t=d4(n._location.path,e),s=new Mn(n._location.bucket,t);return new hi(n.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D4(n){return/^[A-Za-z]+:\/\//.test(n)}function O4(n,e){return new hi(n,e)}function Wx(n,e){if(n instanceof xm){const t=n;if(t._bucket==null)throw UR();const s=new hi(t,t._bucket);return e!=null?Wx(s,e):s}else return e!==void 0?L4(n,e):n}function M4(n,e){if(e&&D4(e)){if(n instanceof xm)return O4(n,e);throw cp("To use ref(service, url), the first argument must be a Storage instance.")}else return Wx(n,e)}function Pb(n,e){const t=e==null?void 0:e[Rx];return t==null?null:Mn.makeFromBucketSpec(t,n)}function F4(n,e,t,s={}){n.host=`${e}:${t}`;const i=_a(e);i&&(wp(`https://${n.host}/b`),xp("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:m0(l,n.app.options.projectId))}class xm{constructor(e,t,s,i,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=i,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=Ix,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=IR,this._maxUploadRetryTime=RR,this._requests=new Set,i!=null?this._bucket=Mn.makeFromBucketSpec(i,this._host):this._bucket=Pb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mn.makeFromBucketSpec(this._url,e):this._bucket=Pb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hi(this,e)}_makeRequest(e,t,s,i,l=!0){if(this._deleted)return new $R(Lx());{const u=t4(e,this._appId,s,i,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,i).getPromise()}}const Lb="@firebase/storage",Db="0.13.14";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gx="storage";function Vh(n,e,t){return n=gt(n),j4(n,e,t)}function zh(n){return n=gt(n),A4(n)}function Bh(n){return n=gt(n),P4(n)}function ba(n,e){return n=gt(n),M4(n,e)}function U4(n=Ep(),e){n=gt(n);const t=vh(n,Gx).getImmediate({identifier:e}),s=d0("storage");return s&&V4(t,...s),t}function V4(n,e,t,s={}){F4(n,e,t,s)}function z4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xm(t,s,i,e,di)}function B4(){ii(new ha(Gx,z4,"PUBLIC").setMultipleInstances(!0)),Dr(Lb,Db,""),Dr(Lb,Db,"esm2017")}B4();const H4={apiKey:"AIzaSyBSHnoSvUbngvO8VOWFbMr-7xxSftZwf58",authDomain:"genius-classes-vaavol.firebaseapp.com",projectId:"genius-classes-vaavol",storageBucket:"genius-classes-vaavol.firebasestorage.app",messagingSenderId:"646240113944",appId:"1:646240113944:web:6ec159d3c4735cbca8ba6d"},_m=y0(H4),km=uC(_m),qt=dR(_m),wa=U4(_m),Kx=j.createContext({user:null,loading:!0});function $4({children:n}){const[e,t]=j.useState(null),[s,i]=j.useState(!0);return j.useEffect(()=>JN(km,l=>{t(l),i(!1)}),[]),m.jsx(Kx.Provider,{value:{user:e,loading:s},children:n})}function Qx(){return j.useContext(Kx)}/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Yx=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const q4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const W4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ob=n=>{const e=W4(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var G4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const K4=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Q4=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:u,...d},f)=>j.createElement("svg",{ref:f,...G4,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:Yx("lucide",i),...!l&&!K4(d)&&{"aria-hidden":"true"},...d},[...u.map(([y,w])=>j.createElement(y,w)),...Array.isArray(l)?l:[l]]));/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Je=(n,e)=>{const t=j.forwardRef(({className:s,...i},l)=>j.createElement(Q4,{ref:l,iconNode:e,className:Yx(`lucide-${q4(Ob(n))}`,`lucide-${n}`,s),...i}));return t.displayName=Ob(n),t};/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Y4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uh=Je("arrow-right",Y4);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const X4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Mb=Je("award",X4);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const J4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],up=Je("book-open",J4);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Z4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ej=Je("briefcase",Z4);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hp=Je("clock",tj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rj=Je("download",nj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],aj=Je("external-link",sj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ij=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oj=Je("eye",ij);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hh=Je("file-text",lj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const cj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],uj=Je("file",cj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const hj=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],xa=Je("graduation-cap",hj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Em=Je("image",dj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const fj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],pj=Je("layout-dashboard",fj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const mj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cn=Je("loader-circle",mj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const gj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Fb=Je("lock",gj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const vj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yj=Je("log-out",vj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const bj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Xx=Je("map-pin",bj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const wj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],xj=Je("menu",wj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _j=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],kj=Je("pencil",_j);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ej=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Jx=Je("phone",Ej);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Sj=Je("play",Nj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ul=Je("plus",Cj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Tj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Zx=Je("star",Tj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ij=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Rj=Je("target",Ij);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const jj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hh=Je("trash-2",jj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Aj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Vl=Je("trophy",Aj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Pj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dh=Je("upload",Pj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Lj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ub=Je("users",Lj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Dj=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],zl=Je("video",Dj);/**
* @license lucide-react v0.564.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Oj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sc=Je("x",Oj),Vb=[{to:"/",label:"Home"},{to:"/lectures",label:"Lectures"},{to:"/notes",label:"Notes"},{to:"/teachers",label:"Teachers"},{to:"/results",label:"Results"},{to:"/contact",label:"Contact"}];function Mj(){const[n,e]=j.useState(!1),t=$r();return m.jsxs("nav",{className:"sticky top-0 z-50 bg-[var(--background)]/95 backdrop-blur-md border-b border-border",children:[m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs(oo,{to:"/",className:"flex items-center gap-2 group",onClick:()=>e(!1),children:[m.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary flex items-center justify-center",children:m.jsx(xa,{className:"w-5 h-5 text-primary-foreground"})}),m.jsx("span",{className:"text-lg font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:"Genius Classes"})]}),m.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[Vb.map(s=>m.jsx(oo,{to:s.to,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${t.pathname===s.to?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:s.label},s.to)),m.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScyuQ7WdPgahcyX5yKFwGvg9CFgJckSq6_gFOtUY25YUXIExA/viewform?usp=header",target:"_blank",rel:"noopener noreferrer",className:"ml-2 px-4 py-2 rounded-lg text-sm font-semibold bg-accent text-accent-foreground hover:opacity-90 transition-opacity",children:"Apply Now"})]}),m.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-secondary transition-colors",onClick:()=>e(!n),"aria-label":"Toggle menu",children:n?m.jsx(sc,{className:"w-5 h-5"}):m.jsx(xj,{className:"w-5 h-5"})})]})}),n&&m.jsx("div",{className:"md:hidden border-t border-border bg-[var(--background)] animate-fade-in",children:m.jsxs("div",{className:"px-4 py-3 space-y-1",children:[Vb.map(s=>m.jsx(oo,{to:s.to,onClick:()=>e(!1),className:`block px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${t.pathname===s.to?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:s.label},s.to)),m.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScyuQ7WdPgahcyX5yKFwGvg9CFgJckSq6_gFOtUY25YUXIExA/viewform?usp=header",target:"_blank",rel:"noopener noreferrer",className:"block px-3 py-2.5 rounded-lg text-sm font-semibold bg-accent text-accent-foreground text-center",onClick:()=>e(!1),children:"Apply Now"})]})})]})}function Fj(){const n=ph(),e=j.useRef(null),t=j.useRef(0),s=j.useCallback(()=>{e.current=setTimeout(()=>{n("/admin")},2e3)},[n]),i=j.useCallback(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),l=j.useCallback(d=>{t.current=d.clientY},[]),u=j.useCallback(d=>{t.current-d.clientY>80&&n("/admin")},[n]);return m.jsx("footer",{className:"bg-foreground text-primary-foreground",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary flex items-center justify-center",children:m.jsx(xa,{className:"w-5 h-5 text-primary-foreground"})}),m.jsx("span",{className:"text-lg font-bold",style:{fontFamily:"var(--font-heading)"},children:"Genius Classes"})]}),m.jsx("p",{className:"text-sm text-primary-foreground/70 leading-relaxed",children:"Premier coaching institute providing quality education for Std 1-12 students in both English and Gujarati medium."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider mb-4 text-primary-foreground/80",children:"Quick Links"}),m.jsx("ul",{className:"space-y-2",children:["Lectures","Notes","Teachers","Results","Contact"].map(d=>m.jsx("li",{children:m.jsx("a",{href:`/${d.toLowerCase()}`,className:"text-sm text-primary-foreground/60 hover:text-primary-foreground transition-colors",children:d})},d))})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider mb-4 text-primary-foreground/80",children:"Contact"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("a",{href:"tel:+919712843679",className:"flex items-center gap-2 text-sm text-primary-foreground/60 hover:text-primary-foreground transition-colors",children:[m.jsx(Jx,{className:"w-4 h-4"}),"+91 97128 43679"]}),m.jsxs("a",{href:"https://maps.app.goo.gl/89XHFo4mjbYdUJdq7",target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-2 text-sm text-primary-foreground/60 hover:text-primary-foreground transition-colors",children:[m.jsx(Xx,{className:"w-4 h-4 mt-0.5 shrink-0"}),"Genius Classes, Vavol (near Jannat Residency)"]})]})]})]}),m.jsxs("div",{className:"border-t border-primary-foreground/10 mt-10 pt-8 flex flex-col sm:flex-row justify-between items-center gap-3",children:[m.jsx("p",{className:"text-sm text-primary-foreground/50 select-none cursor-default",onTouchStart:s,onTouchEnd:i,onTouchCancel:i,onMouseDown:l,onMouseUp:u,children:" Genius Classes"}),m.jsx("p",{className:"text-xs text-primary-foreground/40",children:"Developed by Smit Patel"})]})]})})}function Uj(){const{pathname:n}=$r();return j.useEffect(()=>{window.scrollTo(0,0)},[n]),null}function dp(n){const[e,t]=j.useState(!1);return j.useEffect(()=>{if(!n.current)return;const s=new IntersectionObserver(([i])=>{i.isIntersecting&&t(!0)},{threshold:.15});return s.observe(n.current),()=>s.disconnect()},[n]),e}function Vj({end:n,suffix:e=""}){const[t,s]=j.useState(0),i=j.useRef(null),l=dp(i);return j.useEffect(()=>{if(!l)return;let u=0;const d=1500,f=y=>{u||(u=y);const w=Math.min((y-u)/d,1);s(Math.floor(w*n)),w<1&&requestAnimationFrame(f)};requestAnimationFrame(f)},[l,n]),m.jsxs("span",{ref:i,children:[t,e]})}function zj(){const n=j.useRef(null),e=j.useRef(null),t=dp(n),s=dp(e);return m.jsxs("div",{children:[m.jsxs("section",{className:"relative overflow-hidden",style:{background:"linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end))"},children:[m.jsxs("div",{className:"absolute inset-0 opacity-10",children:[m.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 rounded-full border border-white/20"}),m.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 rounded-full border border-white/20"}),m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] rounded-full border border-white/10"})]}),m.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-36",children:m.jsxs("div",{className:"max-w-3xl",children:[m.jsx("div",{className:"animate-fade-in-up",children:m.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-semibold tracking-wide uppercase bg-white/10 text-white/90 mb-6",children:[m.jsx(Zx,{className:"w-3.5 h-3.5"}),"Premier Coaching Institute"]})}),m.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-tight animate-fade-in-up animation-delay-100 text-balance",style:{fontFamily:"var(--font-heading)"},children:["Unlock Your ",m.jsx("br",{}),m.jsx("span",{className:"text-[var(--accent)]",children:"Academic Potential"})]}),m.jsx("p",{className:"mt-6 text-lg md:text-xl text-white/70 leading-relaxed max-w-2xl animate-fade-in-up animation-delay-200",children:"Genius Classes provides quality coaching for Std 1-12 in both English and Gujarati medium. Join 100+ students already on the path to excellence."}),m.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 animate-fade-in-up animation-delay-300",children:[m.jsxs("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScyuQ7WdPgahcyX5yKFwGvg9CFgJckSq6_gFOtUY25YUXIExA/viewform?usp=header",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg bg-accent text-accent-foreground font-semibold hover:opacity-90 transition-opacity",children:["Apply Now",m.jsx(uh,{className:"w-4 h-4"})]}),m.jsx(oo,{to:"/contact",className:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg border border-white/20 text-white font-medium hover:bg-white/10 transition-colors",children:"Contact Us"})]})]})})]}),m.jsx("section",{ref:e,className:"bg-background",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-12 relative z-10",children:m.jsx("div",{className:`grid grid-cols-2 md:grid-cols-4 gap-4 transition-all duration-700 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[{icon:Ub,value:100,suffix:"+",label:"Students"},{icon:hp,value:3,suffix:"+",label:"Years Experience"},{icon:up,value:12,suffix:"",label:"Classes Covered"},{icon:Mb,value:95,suffix:"%",label:"Satisfaction"}].map((i,l)=>m.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 text-center shadow-sm hover:shadow-md transition-shadow",children:[m.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center mx-auto mb-3",children:m.jsx(i.icon,{className:"w-5 h-5 text-primary"})}),m.jsx("p",{className:"text-2xl md:text-3xl font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:s?m.jsx(Vj,{end:i.value,suffix:i.suffix}):"0"}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.label})]},l))})})}),m.jsx("section",{ref:n,className:"py-20 bg-background",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-14",children:[m.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-primary",children:"Why choose us"}),m.jsx("h2",{className:"mt-3 text-3xl md:text-4xl font-bold text-foreground text-balance",style:{fontFamily:"var(--font-heading)"},children:"Everything You Need to Succeed"}),m.jsx("p",{className:"mt-4 text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"We provide comprehensive coaching with modern teaching methods, personal attention, and a focus on building strong fundamentals."})]}),m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:xa,title:"Expert Teachers",desc:"Experienced faculty with deep subject knowledge and modern teaching methods."},{icon:up,title:"Study Materials",desc:"Access comprehensive notes, lectures, and practice materials anytime."},{icon:Rj,title:"Focused Learning",desc:"Structured curriculum designed for Std 1-12 in English & Gujarati medium."},{icon:Ub,title:"Small Batches",desc:"Personal attention with limited batch sizes ensuring every student grows."},{icon:Mb,title:"Proven Results",desc:"Track record of excellent results and student satisfaction."},{icon:hp,title:"Flexible Timings",desc:"Morning and evening batches to suit every student's schedule."}].map((i,l)=>m.jsxs("div",{className:`group bg-card border border-border rounded-xl p-6 hover:shadow-lg hover:border-primary/20 transition-all duration-300 ${t?"animate-fade-in-up":"opacity-0"}`,style:{animationDelay:`${l*100}ms`},children:[m.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors",children:m.jsx(i.icon,{className:"w-6 h-6 text-primary"})}),m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:i.title}),m.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:i.desc})]},l))})]})}),m.jsx("section",{className:"py-20",style:{background:"linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end))"},children:m.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white text-balance",style:{fontFamily:"var(--font-heading)"},children:"Ready to Start Your Journey?"}),m.jsx("p",{className:"mt-4 text-lg text-white/70 max-w-2xl mx-auto leading-relaxed",children:"Join Genius Classes today and take the first step towards academic excellence. Admissions are now open for all classes."}),m.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:[m.jsxs("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScyuQ7WdPgahcyX5yKFwGvg9CFgJckSq6_gFOtUY25YUXIExA/viewform?usp=header",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg bg-accent text-accent-foreground font-semibold hover:opacity-90 transition-opacity",children:["Apply Now",m.jsx(uh,{className:"w-4 h-4"})]}),m.jsx("a",{href:"tel:+919712843679",className:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg border border-white/20 text-white font-medium hover:bg-white/10 transition-colors",children:"Call Us"})]})]})})]})}function Bj(n){if(!n)return null;const e=[/(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/];for(const t of e){const s=n.match(t);if(s)return s[1]}return null}function Hj({lecture:n}){const[e,t]=j.useState(!1),s=n.thumbnailURL,i=Bj(n.videoURL),l=i?`https://img.youtube.com/vi/${i}/mqdefault.jpg`:null,u=s||l;return!u||e?m.jsx("div",{className:"aspect-video bg-secondary flex items-center justify-center",children:m.jsx(zl,{className:"w-12 h-12 text-muted-foreground/30"})}):m.jsxs("div",{className:"aspect-video bg-secondary relative group overflow-hidden",children:[m.jsx("img",{src:u,alt:n.title,className:"w-full h-full object-cover",crossOrigin:"anonymous",onError:()=>t(!0)}),m.jsx("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:m.jsx("div",{className:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center",children:m.jsx(Sj,{className:"w-5 h-5 text-foreground ml-0.5"})})})]})}function $j(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[i,l]=j.useState(""),[u,d]=j.useState("");j.useEffect(()=>{async function x(){try{const S=Sa(Zn(qt,"lectures"),Ca("createdAt","desc")),N=await Ta(S);e(N.docs.map(V=>({id:V.id,...V.data()})))}catch(S){console.error("Error loading lectures:",S)}finally{s(!1)}}x()},[]);const f=n.filter(x=>!(i&&x.subject!==i||u&&x.className!==u)),y=[...new Set(n.map(x=>x.subject).filter(Boolean))],w=[...new Set(n.map(x=>x.className).filter(Boolean))];return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("section",{className:"py-16",style:{background:"linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end))"},children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[m.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-balance",style:{fontFamily:"var(--font-heading)"},children:"Video Lectures"}),m.jsx("p",{className:"mt-4 text-lg text-white/70 max-w-2xl mx-auto",children:"Watch recorded lectures and learn at your own pace, anytime, anywhere."})]})}),m.jsx("section",{className:"py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.length>0&&m.jsxs("div",{className:"flex flex-wrap gap-3 mb-8",children:[m.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border bg-card text-sm focus:outline-none focus:ring-2 focus:ring-ring",value:i,onChange:x=>l(x.target.value),children:[m.jsx("option",{value:"",children:"All Subjects"}),y.map(x=>m.jsx("option",{value:x,children:x},x))]}),m.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border bg-card text-sm focus:outline-none focus:ring-2 focus:ring-ring",value:u,onChange:x=>d(x.target.value),children:[m.jsx("option",{value:"",children:"All Classes"}),w.map(x=>m.jsx("option",{value:x,children:x},x))]})]}),t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-8 h-8 animate-spin text-primary"})}):f.length===0?m.jsxs("div",{className:"text-center py-20",children:[m.jsx(zl,{className:"w-16 h-16 text-muted-foreground/40 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:n.length===0?"Lectures Coming Soon":"No Matching Lectures"}),m.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Video lectures will be uploaded shortly.":"Try changing the filters."})]}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(x=>m.jsxs("a",{href:x.videoURL,target:"_blank",rel:"noopener noreferrer",className:"bg-card border border-border rounded-xl overflow-hidden hover:shadow-lg transition-shadow group block",children:[m.jsx(Hj,{lecture:x}),m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.subject&&m.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md bg-primary/10 text-primary font-medium",children:x.subject}),x.className&&m.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md bg-secondary text-secondary-foreground",children:x.className})]}),m.jsx("h3",{className:"text-base font-semibold text-foreground mb-1 group-hover:text-primary transition-colors",children:x.title}),x.description&&m.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-2",children:x.description}),m.jsxs("span",{className:"inline-flex items-center gap-1.5 mt-3 text-sm text-primary font-medium",children:["Watch Lecture"," ",m.jsx(aj,{className:"w-3.5 h-3.5"})]})]})]},x.id))})]})})]})}function qj(n){const e=n.toLowerCase();return e.includes("pdf")?"PDF":e.includes("ppt")||e.includes("presentation")?"PPT":e.includes("doc")||e.includes("word")?"DOC":e.includes("image")||e.includes("png")||e.includes("jpg")?"IMG":"FILE"}function Wj(n){const e=n.toLowerCase();return e.includes("pdf")?"bg-red-100 text-red-700":e.includes("ppt")||e.includes("presentation")?"bg-orange-100 text-orange-700":e.includes("doc")||e.includes("word")?"bg-blue-100 text-blue-700":e.includes("image")||e.includes("png")||e.includes("jpg")?"bg-green-100 text-green-700":"bg-secondary text-secondary-foreground"}function Gj(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[i,l]=j.useState("");j.useEffect(()=>{async function f(){try{const y=Sa(Zn(qt,"materials"),Ca("createdAt","desc")),w=await Ta(y);e(w.docs.map(x=>({id:x.id,...x.data()})))}catch(y){console.error("Error loading notes:",y)}finally{s(!1)}}f()},[]);const u=n.filter(f=>!i||f.subject===i),d=[...new Set(n.map(f=>f.subject))];return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("section",{className:"py-16",style:{background:"linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end))"},children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[m.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-balance",style:{fontFamily:"var(--font-heading)"},children:"Study Materials"}),m.jsx("p",{className:"mt-4 text-lg text-white/70 max-w-2xl mx-auto",children:"Download notes, presentations, and study materials for all subjects."})]})}),m.jsx("section",{className:"py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.length>0&&m.jsx("div",{className:"flex flex-wrap gap-3 mb-8",children:m.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border bg-card text-sm focus:outline-none focus:ring-2 focus:ring-ring",value:i,onChange:f=>l(f.target.value),children:[m.jsx("option",{value:"",children:"All Subjects"}),d.map(f=>m.jsx("option",{value:f,children:f},f))]})}),t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-8 h-8 animate-spin text-primary"})}):u.length===0?m.jsxs("div",{className:"text-center py-20",children:[m.jsx(hh,{className:"w-16 h-16 text-muted-foreground/40 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:n.length===0?"Notes Coming Soon":"No Matching Notes"}),m.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Study materials will be uploaded shortly.":"Try changing the filters."})]}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-5",children:u.map(f=>m.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 hover:shadow-lg transition-shadow",children:[m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:`shrink-0 w-12 h-12 rounded-lg flex items-center justify-center text-xs font-bold ${Wj(f.fileType)}`,children:qj(f.fileType)}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"text-base font-semibold text-foreground truncate",children:f.title}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md bg-primary/10 text-primary font-medium",children:f.subject}),f.className&&m.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md bg-secondary text-secondary-foreground",children:f.className})]}),f.description&&m.jsx("p",{className:"mt-2 text-sm text-muted-foreground leading-relaxed line-clamp-2",children:f.description})]})]}),m.jsxs("div",{className:"mt-4 flex gap-2",children:[m.jsxs("a",{href:f.fileURL,target:"_blank",rel:"noopener noreferrer",className:"flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 transition-opacity",children:[m.jsx(oj,{className:"w-3.5 h-3.5"})," View"]}),m.jsxs("a",{href:f.fileURL,download:!0,className:"flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg border border-border text-sm font-medium hover:bg-secondary transition-colors",children:[m.jsx(rj,{className:"w-3.5 h-3.5"})," Download"]})]})]},f.id))})]})})]})}function Kj(){const[n,e]=j.useState([]),[t,s]=j.useState(!0);return j.useEffect(()=>{async function i(){try{const l=Sa(Zn(qt,"teachers"),Ca("createdAt","desc")),u=await Ta(l);e(u.docs.map(d=>({id:d.id,...d.data()})))}catch(l){console.error("Error loading teachers:",l)}finally{s(!1)}}i()},[]),m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("section",{className:"py-16",style:{background:"linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end))"},children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[m.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-balance",style:{fontFamily:"var(--font-heading)"},children:"Our Teachers"}),m.jsx("p",{className:"mt-4 text-lg text-white/70 max-w-2xl mx-auto",children:"Meet the dedicated educators who make learning an enriching experience at Genius Classes."})]})}),m.jsx("section",{className:"py-16",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-8 h-8 animate-spin text-primary"})}):n.length===0?m.jsxs("div",{className:"text-center py-20",children:[m.jsx(xa,{className:"w-16 h-16 text-muted-foreground/40 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Teachers Coming Soon"}),m.jsx("p",{className:"text-muted-foreground",children:"Our faculty information will be updated shortly."})]}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(i=>m.jsxs("div",{className:"bg-card border border-border rounded-xl overflow-hidden hover:shadow-lg transition-shadow",children:[i.photoURL?m.jsx("div",{className:"aspect-[4/3] bg-secondary",children:m.jsx("img",{src:i.photoURL,alt:i.name,className:"w-full h-full object-cover",crossOrigin:"anonymous"})}):m.jsx("div",{className:"aspect-[4/3] bg-secondary flex items-center justify-center",children:m.jsx(xa,{className:"w-16 h-16 text-muted-foreground/30"})}),m.jsxs("div",{className:"p-5",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:i.name}),m.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[m.jsx(ej,{className:"w-3.5 h-3.5"}),i.qualification,"  ",i.experience]}),i.description&&m.jsx("p",{className:"mt-3 text-sm text-muted-foreground leading-relaxed line-clamp-3",children:i.description}),m.jsxs("div",{className:"mt-4 flex flex-wrap gap-1.5",children:[m.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md bg-primary/10 text-primary font-medium",children:[m.jsx(up,{className:"w-3 h-3"}),i.medium]}),i.subjects.map(l=>m.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-secondary text-secondary-foreground",children:l},l))]}),m.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:i.classes.map(l=>m.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-accent/10 text-accent-foreground font-medium",children:l},l))})]})]},i.id))})})})]})}function Qj(){const[n,e]=j.useState([]),[t,s]=j.useState(!0);return j.useEffect(()=>{async function i(){try{const l=Sa(Zn(qt,"results"),Ca("createdAt","desc")),u=await Ta(l);e(u.docs.map(d=>({id:d.id,...d.data()})))}catch(l){console.error("Error loading results:",l)}finally{s(!1)}}i()},[]),m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("section",{className:"py-16",style:{background:"linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end))"},children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[m.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-balance",style:{fontFamily:"var(--font-heading)"},children:"Our Results"}),m.jsx("p",{className:"mt-4 text-lg text-white/70 max-w-2xl mx-auto",children:"Celebrating the achievements of our students. Their success is our pride."})]})}),m.jsx("section",{className:"py-16",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-8 h-8 animate-spin text-primary"})}):n.length===0?m.jsxs("div",{className:"text-center py-20",children:[m.jsx(Vl,{className:"w-16 h-16 text-muted-foreground/40 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Results Coming Soon"}),m.jsx("p",{className:"text-muted-foreground",children:"Student results will be published here shortly."})]}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(i=>m.jsxs("div",{className:"bg-card border border-border rounded-xl overflow-hidden hover:shadow-lg transition-shadow",children:[i.photoURL?m.jsx("div",{className:"aspect-square bg-secondary",children:m.jsx("img",{src:i.photoURL,alt:i.studentName,className:"w-full h-full object-cover",crossOrigin:"anonymous"})}):m.jsx("div",{className:"aspect-square bg-secondary flex items-center justify-center",children:m.jsx(Vl,{className:"w-16 h-16 text-muted-foreground/30"})}),m.jsxs("div",{className:"p-5",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:i.studentName}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md bg-primary/10 text-primary font-medium",children:i.className}),m.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md bg-accent/20 text-accent-foreground font-bold",children:i.percentage})]}),i.achievement&&m.jsxs("div",{className:"mt-3 flex items-start gap-1.5",children:[m.jsx(Zx,{className:"w-3.5 h-3.5 text-accent mt-0.5 shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:i.achievement})]}),i.year&&m.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Year: ",i.year]})]})]},i.id))})})})]})}function Yj(){return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("section",{className:"py-16",style:{background:"linear-gradient(135deg, var(--hero-gradient-start), var(--hero-gradient-end))"},children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[m.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-balance",style:{fontFamily:"var(--font-heading)"},children:"Contact Us"}),m.jsx("p",{className:"mt-4 text-lg text-white/70 max-w-2xl mx-auto",children:"Get in touch with us for admissions, enquiries, or any questions."})]})}),m.jsx("section",{className:"py-16",children:m.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-lg transition-shadow",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:m.jsx(Jx,{className:"w-6 h-6 text-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Call Us"}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Available during working hours"}),m.jsx("a",{href:"tel:+919712843679",className:"inline-flex items-center gap-1.5 mt-3 text-primary font-semibold text-lg hover:underline",children:"+91 97128 43679"})]})]})}),m.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-lg transition-shadow",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:m.jsx(Xx,{className:"w-6 h-6 text-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Visit Us"}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Genius Classes, Vavol (near Jannat Residency)"}),m.jsxs("a",{href:"https://maps.app.goo.gl/89XHFo4mjbYdUJdq7",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 mt-3 text-sm text-primary font-medium hover:underline",children:["Open in Google Maps ",m.jsx(uh,{className:"w-3.5 h-3.5"})]})]})]})}),m.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-lg transition-shadow",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:m.jsx(hp,{className:"w-6 h-6 text-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Working Hours"}),m.jsxs("div",{className:"mt-2 space-y-1 text-sm text-muted-foreground",children:[m.jsx("p",{children:"Monday - Saturday: 8:00 AM - 8:00 PM"}),m.jsx("p",{children:"Sunday: Closed"})]})]})]})}),m.jsxs("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScyuQ7WdPgahcyX5yKFwGvg9CFgJckSq6_gFOtUY25YUXIExA/viewform?usp=header",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-6 py-3 rounded-lg bg-accent text-accent-foreground font-semibold hover:opacity-90 transition-opacity",children:["Apply Now ",m.jsx(uh,{className:"w-4 h-4"})]})]}),m.jsx("div",{className:"rounded-xl overflow-hidden border border-border shadow-sm",children:m.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3670.036!2d72.597!3d23.108!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjPCsDA2JzI5LjAiTiA3MsKwMzUnNDkuMiJF!5e0!3m2!1sen!2sin!4v1700000000000!5m2!1sen!2sin",width:"100%",height:"100%",style:{border:0,minHeight:"400px"},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Genius Classes Location"})})]})})})]})}function Xj(){const n=ph(),{user:e}=Qx(),[t,s]=j.useState(1),[i,l]=j.useState(""),[u,d]=j.useState(""),[f,y]=j.useState(""),[w,x]=j.useState(!1),S=j.useRef(null),N=j.useRef(0);if(e)return n("/admin-panel",{replace:!0}),null;const V=j.useCallback(()=>{t<3&&s(re=>re+1)},[t]),U=j.useCallback(()=>{S.current=setTimeout(()=>{V()},2e3)},[V]),M=j.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null)},[]),X=j.useCallback(re=>{N.current=re.clientY},[]),K=j.useCallback(re=>{N.current-re.clientY>80&&V()},[V]),G=async re=>{var fe;re.preventDefault(),y(""),x(!0);try{await QN(km,i,u),n("/admin-panel",{replace:!0})}catch(Q){y((fe=Q.message)!=null&&fe.includes("invalid")?"Invalid email or password":"Login failed. Please try again.")}finally{x(!1)}};return t<3?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:m.jsxs("div",{className:"text-center select-none cursor-default",onTouchStart:U,onTouchEnd:M,onTouchCancel:M,onMouseDown:X,onMouseUp:K,children:[m.jsx("div",{className:"w-16 h-16 rounded-2xl bg-secondary flex items-center justify-center mx-auto mb-6",children:m.jsx(Fb,{className:"w-7 h-7 text-muted-foreground"})}),m.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Thank you for visiting Genius Classes"}),m.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"We appreciate your interest in our institute."})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:m.jsx("div",{className:"w-full max-w-sm",children:m.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary flex items-center justify-center mx-auto mb-4",children:m.jsx(Fb,{className:"w-6 h-6 text-primary-foreground"})}),m.jsx("h1",{className:"text-xl font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:"Admin Login"}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Authorized personnel only"})]}),m.jsxs("form",{onSubmit:G,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"admin-email",className:"block text-sm font-medium text-foreground mb-1.5",children:"Email"}),m.jsx("input",{id:"admin-email",type:"email",value:i,onChange:re=>l(re.target.value),required:!0,className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"admin@example.com"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"admin-password",className:"block text-sm font-medium text-foreground mb-1.5",children:"Password"}),m.jsx("input",{id:"admin-password",type:"password",value:u,onChange:re=>d(re.target.value),required:!0,className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Enter password"})]}),f&&m.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded-lg px-3 py-2",children:f}),m.jsxs("button",{type:"submit",disabled:w,className:"w-full py-2.5 rounded-lg bg-primary text-primary-foreground font-semibold text-sm hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:[w?m.jsx(Cn,{className:"w-4 h-4 animate-spin"}):null,w?"Signing in...":"Sign In"]})]})]})})})}const Jj=Array.from({length:12},(n,e)=>`Std ${e+1}`),Zj=["English","Maths","Science","SS","Gujarati"],zb={name:"",qualification:"",experience:"",description:"",medium:"English Medium",classes:[],subjects:[]};function eA(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[i,l]=j.useState(!1),[u,d]=j.useState(null),[f,y]=j.useState(zb),[w,x]=j.useState(null),[S,N]=j.useState(null),[V,U]=j.useState(!1),[M,X]=j.useState(0),[K,G]=j.useState(!1),re=j.useRef(null),[fe,Q]=j.useState(!1),A=j.useCallback(async()=>{try{const Z=Sa(Zn(qt,"teachers"),Ca("createdAt","desc")),Ie=await Ta(Z);e(Ie.docs.map(me=>({id:me.id,...me.data()})))}catch(Z){console.error(Z),He.error("Failed to load teachers")}finally{s(!1)}},[]);j.useEffect(()=>{A()},[A]);const k=Z=>{if(!Z.type.match(/image\/(jpeg|png|jpg)/)){He.error("Only JPG/PNG images allowed");return}if(Z.size>5*1024*1024){He.error("Image must be under 5MB");return}x(Z),N(URL.createObjectURL(Z))},C=async Z=>{const Ie=`teachers/${Date.now()}_${Z.name}`,me=ba(wa,Ie),ae=Vh(me,Z);return new Promise((se,oe)=>{ae.on("state_changed",F=>{X(Math.round(F.bytesTransferred/F.totalBytes*100))},F=>oe(F),async()=>{const F=await zh(ae.snapshot.ref);se(F)})})},P=async()=>{if(!f.name.trim()){He.error("Teacher name is required");return}G(!0);try{let Z="";if(w&&(U(!0),Z=await C(w),U(!1)),u){const Ie=xo(qt,"teachers",u),me={...f};Z&&(me.photoURL=Z),await TR(Ie,me),He.success("Teacher updated successfully")}else await Fh(Zn(qt,"teachers"),{...f,photoURL:Z,createdAt:Ze.now()}),He.success("Teacher added successfully");I(),A()}catch(Z){console.error(Z),He.error("Failed to save teacher")}finally{G(!1),U(!1)}},T=Z=>{d(Z.id),y({name:Z.name,qualification:Z.qualification,experience:Z.experience,description:Z.description,medium:Z.medium,classes:Z.classes||[],subjects:Z.subjects||[]}),N(Z.photoURL||null),x(null),l(!0)},D=async Z=>{if(confirm(`Delete teacher "${Z.name}"?`))try{if(await Mh(xo(qt,"teachers",Z.id)),Z.photoURL)try{const Ie=ba(wa,Z.photoURL);await Bh(Ie)}catch{}He.success("Teacher deleted"),A()}catch{He.error("Failed to delete teacher")}},I=()=>{l(!1),d(null),y(zb),x(null),N(null),X(0)},Le=(Z,Ie)=>{y(me=>({...me,[Z]:me[Z].includes(Ie)?me[Z].filter(ae=>ae!==Ie):[...me[Z],Ie]}))};return t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-6 h-6 animate-spin text-primary"})}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:"Teachers Management"}),!i&&m.jsxs("button",{onClick:()=>{I(),l(!0)},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 transition-opacity",children:[m.jsx(Ul,{className:"w-4 h-4"})," Add Teacher"]})]}),i&&m.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 mb-6 animate-fade-in",children:[m.jsxs("div",{className:"flex items-center justify-between mb-5",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:u?"Edit Teacher":"Add New Teacher"}),m.jsx("button",{onClick:I,className:"p-1.5 rounded-lg hover:bg-secondary transition-colors",children:m.jsx(sc,{className:"w-5 h-5 text-muted-foreground"})})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Name *"}),m.jsx("input",{type:"text",value:f.name,onChange:Z=>y({...f,name:Z.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Teacher name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Qualification"}),m.jsx("input",{type:"text",value:f.qualification,onChange:Z=>y({...f,qualification:Z.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g. M.Sc., B.Ed."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Experience"}),m.jsx("input",{type:"text",value:f.experience,onChange:Z=>y({...f,experience:Z.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g. 5+ Years"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Medium"}),m.jsxs("select",{value:f.medium,onChange:Z=>y({...f,medium:Z.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[m.jsx("option",{value:"English Medium",children:"English Medium"}),m.jsx("option",{value:"Gujarati Medium",children:"Gujarati Medium"})]})]})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Description"}),m.jsx("textarea",{value:f.description,onChange:Z=>y({...f,description:Z.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring resize-none",rows:3,placeholder:"Brief description about the teacher"})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Classes"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Jj.map(Z=>m.jsx("button",{type:"button",onClick:()=>Le("classes",Z),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${f.classes.includes(Z)?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:Z},Z))})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Subjects"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Zj.map(Z=>m.jsx("button",{type:"button",onClick:()=>Le("subjects",Z),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${f.subjects.includes(Z)?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:Z},Z))})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Photo (JPG/PNG)"}),m.jsx("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-colors cursor-pointer ${fe?"border-primary bg-primary/5":"border-input hover:border-primary/40"}`,onClick:()=>{var Z;return(Z=re.current)==null?void 0:Z.click()},onDragOver:Z=>{Z.preventDefault(),Q(!0)},onDragLeave:()=>Q(!1),onDrop:Z=>{var Ie;Z.preventDefault(),Q(!1);const me=(Ie=Z.dataTransfer.files)==null?void 0:Ie[0];me&&k(me)},children:S?m.jsxs("div",{className:"space-y-3",children:[m.jsx("img",{src:S,alt:"Preview",className:"w-24 h-24 rounded-lg object-cover mx-auto",crossOrigin:"anonymous"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Click or drop to change"})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsx(Em,{className:"w-10 h-10 text-muted-foreground/40 mx-auto"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop or click to upload"}),m.jsx("p",{className:"text-xs text-muted-foreground/60",children:"JPG, PNG only. Max 5MB."})]})}),m.jsx("input",{ref:re,type:"file",accept:"image/jpeg,image/png,image/jpg",className:"hidden",onChange:Z=>{var Ie;const me=(Ie=Z.target.files)==null?void 0:Ie[0];me&&k(me)}}),V&&m.jsxs("div",{className:"mt-3",children:[m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[m.jsx("span",{children:"Uploading..."}),m.jsxs("span",{children:[M,"%"]})]}),m.jsx("div",{className:"w-full h-2 bg-secondary rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${M}%`}})})]})]}),m.jsxs("div",{className:"mt-6 flex gap-3",children:[m.jsxs("button",{onClick:P,disabled:K,className:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:[K?m.jsx(Cn,{className:"w-4 h-4 animate-spin"}):m.jsx(dh,{className:"w-4 h-4"}),u?"Update Teacher":"Add Teacher"]}),m.jsx("button",{onClick:I,className:"px-5 py-2.5 rounded-lg border border-border text-sm font-medium hover:bg-secondary transition-colors",children:"Cancel"})]})]}),n.length===0?m.jsxs("div",{className:"text-center py-16 bg-card border border-border rounded-xl",children:[m.jsx(xa,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),m.jsx("p",{className:"text-muted-foreground",children:"No teachers added yet."})]}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(Z=>{var Ie;return m.jsxs("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[Z.photoURL?m.jsx("div",{className:"aspect-[3/2] bg-secondary",children:m.jsx("img",{src:Z.photoURL,alt:Z.name,className:"w-full h-full object-cover",crossOrigin:"anonymous"})}):m.jsx("div",{className:"aspect-[3/2] bg-secondary flex items-center justify-center",children:m.jsx(xa,{className:"w-10 h-10 text-muted-foreground/20"})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h4",{className:"font-semibold text-foreground",children:Z.name}),m.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[Z.qualification," ",Z.experience?`| ${Z.experience}`:""]}),m.jsx("p",{className:"text-xs text-primary font-medium mt-1",children:Z.medium}),m.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:(Ie=Z.subjects)==null?void 0:Ie.map(me=>m.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-secondary text-secondary-foreground",children:me},me))}),m.jsxs("div",{className:"mt-3 flex gap-2",children:[m.jsxs("button",{onClick:()=>T(Z),className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium border border-border hover:bg-secondary transition-colors",children:[m.jsx(kj,{className:"w-3 h-3"})," Edit"]}),m.jsxs("button",{onClick:()=>D(Z),className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium text-destructive border border-destructive/20 hover:bg-destructive/10 transition-colors",children:[m.jsx(Hh,{className:"w-3 h-3"})," Delete"]})]})]})]},Z.id)})})]})}const tA=["English","Maths","Science","SS","Gujarati"],nA=Array.from({length:12},(n,e)=>`Std ${e+1}`);function rA(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[i,l]=j.useState(!1),[u,d]=j.useState({title:"",description:"",subject:"",className:""}),[f,y]=j.useState(null),[w,x]=j.useState(!1),[S,N]=j.useState(0),[V,U]=j.useState(!1),M=j.useRef(null),[X,K]=j.useState(!1),G=j.useCallback(async()=>{try{const k=Sa(Zn(qt,"materials"),Ca("createdAt","desc")),C=await Ta(k);e(C.docs.map(P=>({id:P.id,...P.data()})))}catch(k){console.error(k),He.error("Failed to load materials")}finally{s(!1)}},[]);j.useEffect(()=>{G()},[G]);const re=["application/pdf","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png","image/jpg"],fe=k=>{if(!re.includes(k.type)){He.error("Only PDF, PPT, DOC, and images are accepted");return}if(k.size>25*1024*1024){He.error("File must be under 25MB");return}y(k)},Q=async()=>{if(!u.title.trim()){He.error("Title is required");return}if(!f){He.error("Please select a file");return}if(!u.subject){He.error("Please select a subject");return}U(!0),x(!0);try{const k=`materials/${Date.now()}_${f.name}`,C=ba(wa,k),P=Vh(C,f),T=await new Promise((D,I)=>{P.on("state_changed",Le=>N(Math.round(Le.bytesTransferred/Le.totalBytes*100)),I,async()=>{const Le=await zh(P.snapshot.ref);D(Le)})});await Fh(Zn(qt,"materials"),{...u,fileURL:T,fileName:f.name,fileType:f.type,createdAt:Ze.now()}),He.success("Material uploaded successfully"),l(!1),d({title:"",description:"",subject:"",className:""}),y(null),N(0),G()}catch(k){console.error(k),He.error("Failed to upload material")}finally{U(!1),x(!1)}},A=async k=>{if(confirm(`Delete "${k.title}"?`))try{if(await Mh(xo(qt,"materials",k.id)),k.fileURL)try{const C=ba(wa,k.fileURL);await Bh(C)}catch{}He.success("Material deleted"),G()}catch{He.error("Failed to delete")}};return t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-6 h-6 animate-spin text-primary"})}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:"Study Materials"}),!i&&m.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 transition-opacity",children:[m.jsx(Ul,{className:"w-4 h-4"})," Upload Material"]})]}),i&&m.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 mb-6 animate-fade-in",children:[m.jsxs("div",{className:"flex items-center justify-between mb-5",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Upload Material"}),m.jsx("button",{onClick:()=>{l(!1),y(null)},className:"p-1.5 rounded-lg hover:bg-secondary",children:m.jsx(sc,{className:"w-5 h-5 text-muted-foreground"})})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Title *"}),m.jsx("input",{type:"text",value:u.title,onChange:k=>d({...u,title:k.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Material title"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Subject *"}),m.jsxs("select",{value:u.subject,onChange:k=>d({...u,subject:k.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[m.jsx("option",{value:"",children:"Select subject"}),tA.map(k=>m.jsx("option",{value:k,children:k},k))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Class"}),m.jsxs("select",{value:u.className,onChange:k=>d({...u,className:k.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[m.jsx("option",{value:"",children:"Select class"}),nA.map(k=>m.jsx("option",{value:k,children:k},k))]})]})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Description"}),m.jsx("textarea",{value:u.description,onChange:k=>d({...u,description:k.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring resize-none",rows:2,placeholder:"Brief description"})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"File (PDF, PPT, DOC, Image) *"}),m.jsx("div",{className:`border-2 border-dashed rounded-xl p-6 text-center cursor-pointer transition-colors ${X?"border-primary bg-primary/5":"border-input hover:border-primary/40"}`,onClick:()=>{var k;return(k=M.current)==null?void 0:k.click()},onDragOver:k=>{k.preventDefault(),K(!0)},onDragLeave:()=>K(!1),onDrop:k=>{var C;k.preventDefault(),K(!1);const P=(C=k.dataTransfer.files)==null?void 0:C[0];P&&fe(P)},children:f?m.jsxs("div",{className:"space-y-2",children:[m.jsx(uj,{className:"w-8 h-8 text-primary mx-auto"}),m.jsx("p",{className:"text-sm font-medium text-foreground",children:f.name}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[(f.size/1024/1024).toFixed(2)," MB"]})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsx(dh,{className:"w-8 h-8 text-muted-foreground/40 mx-auto"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop or click to select"}),m.jsx("p",{className:"text-xs text-muted-foreground/60",children:"PDF, PPT, DOC, Images. Max 25MB."})]})}),m.jsx("input",{ref:M,type:"file",accept:".pdf,.ppt,.pptx,.doc,.docx,.jpg,.jpeg,.png",className:"hidden",onChange:k=>{var C;const P=(C=k.target.files)==null?void 0:C[0];P&&fe(P)}}),w&&m.jsxs("div",{className:"mt-3",children:[m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[m.jsx("span",{children:"Uploading..."}),m.jsxs("span",{children:[S,"%"]})]}),m.jsx("div",{className:"w-full h-2 bg-secondary rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${S}%`}})})]})]}),m.jsxs("div",{className:"mt-6 flex gap-3",children:[m.jsxs("button",{onClick:Q,disabled:V,className:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 disabled:opacity-50",children:[V?m.jsx(Cn,{className:"w-4 h-4 animate-spin"}):m.jsx(dh,{className:"w-4 h-4"}),"Upload"]}),m.jsx("button",{onClick:()=>{l(!1),y(null)},className:"px-5 py-2.5 rounded-lg border border-border text-sm font-medium hover:bg-secondary transition-colors",children:"Cancel"})]})]}),n.length===0?m.jsxs("div",{className:"text-center py-16 bg-card border border-border rounded-xl",children:[m.jsx(hh,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),m.jsx("p",{className:"text-muted-foreground",children:"No materials uploaded yet."})]}):m.jsx("div",{className:"space-y-3",children:n.map(k=>m.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center shrink-0",children:m.jsx(hh,{className:"w-5 h-5 text-primary"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"font-medium text-foreground text-sm truncate",children:k.title}),m.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[m.jsx("span",{className:"text-xs text-primary font-medium",children:k.subject}),k.className&&m.jsx("span",{className:"text-xs text-muted-foreground",children:k.className}),m.jsx("span",{className:"text-xs text-muted-foreground",children:k.fileName})]})]}),m.jsx("button",{onClick:()=>A(k),className:"p-2 rounded-lg text-destructive hover:bg-destructive/10 transition-colors",children:m.jsx(Hh,{className:"w-4 h-4"})})]},k.id))})]})}const sA=["English","Maths","Science","SS","Gujarati"],aA=Array.from({length:12},(n,e)=>`Std ${e+1}`);function iA(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[i,l]=j.useState(!1),[u,d]=j.useState({title:"",description:"",subject:"",className:"",videoURL:""}),[f,y]=j.useState(null),[w,x]=j.useState(null),[S,N]=j.useState(!1),[V,U]=j.useState(0),[M,X]=j.useState(!1),[K,G]=j.useState(!1),re=j.useRef(null),fe=j.useCallback(async()=>{try{const T=Sa(Zn(qt,"lectures"),Ca("createdAt","desc")),D=await Ta(T);e(D.docs.map(I=>({id:I.id,...I.data()})))}catch(T){console.error(T),He.error("Failed to load lectures")}finally{s(!1)}},[]);j.useEffect(()=>{fe()},[fe]);const Q=T=>{if(!T.type.match(/image\/(jpeg|png|jpg|webp)/)){He.error("Only JPG, PNG, or WebP images allowed");return}if(T.size>5*1024*1024){He.error("Image must be under 5MB");return}y(T),x(URL.createObjectURL(T))},A=async T=>{const D=`lecture-thumbnails/${Date.now()}_${T.name}`,I=ba(wa,D),Le=Vh(I,T);return new Promise((Z,Ie)=>{Le.on("state_changed",me=>{U(Math.round(me.bytesTransferred/me.totalBytes*100))},me=>Ie(me),async()=>{const me=await zh(Le.snapshot.ref);Z(me)})})},k=async()=>{if(!u.title.trim()){He.error("Title is required");return}if(!u.videoURL.trim()){He.error("Video URL is required");return}X(!0);try{let T="";f&&(N(!0),T=await A(f),N(!1)),await Fh(Zn(qt,"lectures"),{...u,thumbnailURL:T,createdAt:Ze.now()}),He.success("Lecture added successfully"),P(),fe()}catch(T){console.error(T),He.error("Failed to add lecture")}finally{X(!1),N(!1)}},C=async T=>{if(confirm(`Delete "${T.title}"?`))try{if(await Mh(xo(qt,"lectures",T.id)),T.thumbnailURL)try{const D=ba(wa,T.thumbnailURL);await Bh(D)}catch{}He.success("Lecture deleted"),fe()}catch{He.error("Failed to delete")}},P=()=>{l(!1),d({title:"",description:"",subject:"",className:"",videoURL:""}),y(null),x(null),U(0)};return t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-6 h-6 animate-spin text-primary"})}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:"Lectures Management"}),!i&&m.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 transition-opacity",children:[m.jsx(Ul,{className:"w-4 h-4"})," Add Lecture"]})]}),i&&m.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 mb-6 animate-fade-in",children:[m.jsxs("div",{className:"flex items-center justify-between mb-5",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Add Lecture"}),m.jsx("button",{onClick:P,className:"p-1.5 rounded-lg hover:bg-secondary",children:m.jsx(sc,{className:"w-5 h-5 text-muted-foreground"})})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Title *"}),m.jsx("input",{type:"text",value:u.title,onChange:T=>d({...u,title:T.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Lecture title"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Video URL *"}),m.jsx("input",{type:"url",value:u.videoURL,onChange:T=>d({...u,videoURL:T.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"https://youtube.com/..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Subject"}),m.jsxs("select",{value:u.subject,onChange:T=>d({...u,subject:T.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[m.jsx("option",{value:"",children:"Select subject"}),sA.map(T=>m.jsx("option",{value:T,children:T},T))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Class"}),m.jsxs("select",{value:u.className,onChange:T=>d({...u,className:T.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[m.jsx("option",{value:"",children:"Select class"}),aA.map(T=>m.jsx("option",{value:T,children:T},T))]})]})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Description"}),m.jsx("textarea",{value:u.description,onChange:T=>d({...u,description:T.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring resize-none",rows:2,placeholder:"Brief description"})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Thumbnail Image (JPG / PNG / WebP)"}),m.jsx("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-colors cursor-pointer ${K?"border-primary bg-primary/5":"border-input hover:border-primary/40"}`,onClick:()=>{var T;return(T=re.current)==null?void 0:T.click()},onDragOver:T=>{T.preventDefault(),G(!0)},onDragLeave:()=>G(!1),onDrop:T=>{var D;T.preventDefault(),G(!1);const I=(D=T.dataTransfer.files)==null?void 0:D[0];I&&Q(I)},children:w?m.jsxs("div",{className:"space-y-3",children:[m.jsx("img",{src:w,alt:"Thumbnail preview",className:"max-w-[240px] max-h-[140px] rounded-lg object-cover mx-auto",crossOrigin:"anonymous"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Click or drop to change thumbnail"})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsx(Em,{className:"w-10 h-10 text-muted-foreground/40 mx-auto"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop or click to upload thumbnail"}),m.jsx("p",{className:"text-xs text-muted-foreground/60",children:"JPG, PNG, or WebP. Max 5MB. Recommended 16:9 ratio."})]})}),m.jsx("input",{ref:re,type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",className:"hidden",onChange:T=>{var D;const I=(D=T.target.files)==null?void 0:D[0];I&&Q(I)}}),S&&m.jsxs("div",{className:"mt-3",children:[m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[m.jsx("span",{children:"Uploading thumbnail..."}),m.jsxs("span",{children:[V,"%"]})]}),m.jsx("div",{className:"w-full h-2 bg-secondary rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${V}%`}})})]})]}),m.jsxs("div",{className:"mt-6 flex gap-3",children:[m.jsxs("button",{onClick:k,disabled:M,className:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 disabled:opacity-50",children:[M?m.jsx(Cn,{className:"w-4 h-4 animate-spin"}):m.jsx(dh,{className:"w-4 h-4"}),"Add Lecture"]}),m.jsx("button",{onClick:P,className:"px-5 py-2.5 rounded-lg border border-border text-sm font-medium hover:bg-secondary transition-colors",children:"Cancel"})]})]}),n.length===0?m.jsxs("div",{className:"text-center py-16 bg-card border border-border rounded-xl",children:[m.jsx(zl,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),m.jsx("p",{className:"text-muted-foreground",children:"No lectures added yet."})]}):m.jsx("div",{className:"space-y-3",children:n.map(T=>m.jsxs("div",{className:"bg-card border border-border rounded-xl p-3 flex items-center gap-4",children:[m.jsx("div",{className:"w-20 h-14 sm:w-28 sm:h-16 rounded-lg bg-secondary overflow-hidden shrink-0",children:T.thumbnailURL?m.jsx("img",{src:T.thumbnailURL,alt:T.title,className:"w-full h-full object-cover",crossOrigin:"anonymous"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx(zl,{className:"w-5 h-5 text-muted-foreground/30"})})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"font-medium text-foreground text-sm truncate",children:T.title}),m.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[T.subject&&m.jsx("span",{className:"text-xs text-primary font-medium",children:T.subject}),T.className&&m.jsx("span",{className:"text-xs text-muted-foreground",children:T.className})]})]}),m.jsx("a",{href:T.videoURL,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary font-medium hover:underline hidden sm:block",children:"Open"}),m.jsx("button",{onClick:()=>C(T),className:"p-2 rounded-lg text-destructive hover:bg-destructive/10 transition-colors",children:m.jsx(Hh,{className:"w-4 h-4"})})]},T.id))})]})}const oA=Array.from({length:12},(n,e)=>`Std ${e+1}`);function lA(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[i,l]=j.useState(!1),[u,d]=j.useState({studentName:"",className:"",percentage:"",year:"",achievement:""}),[f,y]=j.useState(null),[w,x]=j.useState(null),[S,N]=j.useState(!1),[V,U]=j.useState(!1),[M,X]=j.useState(0),K=j.useRef(null),G=j.useCallback(async()=>{try{const Q=Sa(Zn(qt,"results"),Ca("createdAt","desc")),A=await Ta(Q);e(A.docs.map(k=>({id:k.id,...k.data()})))}catch(Q){console.error(Q),He.error("Failed to load results")}finally{s(!1)}},[]);j.useEffect(()=>{G()},[G]);const re=async()=>{if(!u.studentName.trim()){He.error("Student name is required");return}N(!0);try{let Q="";if(f){U(!0);const A=`results/${Date.now()}_${f.name}`,k=ba(wa,A),C=Vh(k,f);Q=await new Promise((P,T)=>{C.on("state_changed",D=>X(Math.round(D.bytesTransferred/D.totalBytes*100)),T,async()=>{const D=await zh(C.snapshot.ref);P(D)})}),U(!1)}await Fh(Zn(qt,"results"),{...u,photoURL:Q,createdAt:Ze.now()}),He.success("Result added successfully"),l(!1),d({studentName:"",className:"",percentage:"",year:"",achievement:""}),y(null),x(null),X(0),G()}catch(Q){console.error(Q),He.error("Failed to add result")}finally{N(!1),U(!1)}},fe=async Q=>{if(confirm(`Delete result for "${Q.studentName}"?`))try{if(await Mh(xo(qt,"results",Q.id)),Q.photoURL)try{await Bh(ba(wa,Q.photoURL))}catch{}He.success("Result deleted"),G()}catch{He.error("Failed to delete")}};return t?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx(Cn,{className:"w-6 h-6 animate-spin text-primary"})}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:"Results Management"}),!i&&m.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 transition-opacity",children:[m.jsx(Ul,{className:"w-4 h-4"})," Add Result"]})]}),i&&m.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 mb-6 animate-fade-in",children:[m.jsxs("div",{className:"flex items-center justify-between mb-5",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Add Result"}),m.jsx("button",{onClick:()=>{l(!1),y(null),x(null)},className:"p-1.5 rounded-lg hover:bg-secondary",children:m.jsx(sc,{className:"w-5 h-5 text-muted-foreground"})})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Student Name *"}),m.jsx("input",{type:"text",value:u.studentName,onChange:Q=>d({...u,studentName:Q.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Student name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Class"}),m.jsxs("select",{value:u.className,onChange:Q=>d({...u,className:Q.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[m.jsx("option",{value:"",children:"Select class"}),oA.map(Q=>m.jsx("option",{value:Q,children:Q},Q))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Percentage / Grade"}),m.jsx("input",{type:"text",value:u.percentage,onChange:Q=>d({...u,percentage:Q.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g. 95% or A+"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Year"}),m.jsx("input",{type:"text",value:u.year,onChange:Q=>d({...u,year:Q.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g. 2025"})]})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:"Achievement"}),m.jsx("input",{type:"text",value:u.achievement,onChange:Q=>d({...u,achievement:Q.target.value}),className:"w-full px-3 py-2.5 rounded-lg border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g. School Topper"})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Photo (optional)"}),m.jsx("div",{className:"border-2 border-dashed rounded-xl p-6 text-center cursor-pointer border-input hover:border-primary/40 transition-colors",onClick:()=>{var Q;return(Q=K.current)==null?void 0:Q.click()},children:w?m.jsxs("div",{className:"space-y-2",children:[m.jsx("img",{src:w,alt:"Preview",className:"w-20 h-20 rounded-lg object-cover mx-auto",crossOrigin:"anonymous"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to change"})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsx(Em,{className:"w-8 h-8 text-muted-foreground/40 mx-auto"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload photo"})]})}),m.jsx("input",{ref:K,type:"file",accept:"image/*",className:"hidden",onChange:Q=>{var A;const k=(A=Q.target.files)==null?void 0:A[0];k&&(y(k),x(URL.createObjectURL(k)))}}),V&&m.jsx("div",{className:"mt-3",children:m.jsx("div",{className:"w-full h-2 bg-secondary rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${M}%`}})})})]}),m.jsxs("div",{className:"mt-6 flex gap-3",children:[m.jsxs("button",{onClick:re,disabled:S,className:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 disabled:opacity-50",children:[S?m.jsx(Cn,{className:"w-4 h-4 animate-spin"}):m.jsx(Ul,{className:"w-4 h-4"}),"Add Result"]}),m.jsx("button",{onClick:()=>{l(!1),y(null),x(null)},className:"px-5 py-2.5 rounded-lg border border-border text-sm font-medium hover:bg-secondary transition-colors",children:"Cancel"})]})]}),n.length===0?m.jsxs("div",{className:"text-center py-16 bg-card border border-border rounded-xl",children:[m.jsx(Vl,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),m.jsx("p",{className:"text-muted-foreground",children:"No results added yet."})]}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(Q=>m.jsx("div",{className:"bg-card border border-border rounded-xl p-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[Q.photoURL?m.jsx("img",{src:Q.photoURL,alt:Q.studentName,className:"w-12 h-12 rounded-lg object-cover",crossOrigin:"anonymous"}):m.jsx("div",{className:"w-12 h-12 rounded-lg bg-secondary flex items-center justify-center",children:m.jsx(Vl,{className:"w-5 h-5 text-muted-foreground/30"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"font-medium text-foreground text-sm",children:Q.studentName}),m.jsxs("div",{className:"flex gap-2 mt-0.5",children:[Q.className&&m.jsx("span",{className:"text-xs text-primary",children:Q.className}),Q.percentage&&m.jsx("span",{className:"text-xs font-bold text-accent-foreground",children:Q.percentage})]}),Q.achievement&&m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Q.achievement})]}),m.jsx("button",{onClick:()=>fe(Q),className:"p-1.5 rounded-lg text-destructive hover:bg-destructive/10 transition-colors",children:m.jsx(Hh,{className:"w-4 h-4"})})]})},Q.id))})]})}const cA=[{id:"teachers",label:"Teachers",icon:xa},{id:"materials",label:"Materials",icon:hh},{id:"lectures",label:"Lectures",icon:zl},{id:"results",label:"Results",icon:Vl}];function uA(){const{user:n,loading:e}=Qx(),t=ph(),[s,i]=j.useState("teachers");if(e)return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:m.jsx(Cn,{className:"w-8 h-8 animate-spin text-primary"})});if(!n)return t("/admin",{replace:!0}),null;const l=async()=>{await ZN(km),t("/admin",{replace:!0})};return m.jsxs("div",{className:"min-h-screen bg-secondary",children:[m.jsx("header",{className:"bg-card border-b border-border sticky top-0 z-50",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary flex items-center justify-center",children:m.jsx(pj,{className:"w-4 h-4 text-primary-foreground"})}),m.jsx("span",{className:"font-bold text-foreground",style:{fontFamily:"var(--font-heading)"},children:"Admin Panel"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xs text-muted-foreground hidden sm:block",children:n.email}),m.jsxs("button",{onClick:l,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium text-destructive hover:bg-destructive/10 transition-colors",children:[m.jsx(yj,{className:"w-4 h-4"}),"Logout"]})]})]})}),m.jsx("div",{className:"bg-card border-b border-border",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"flex gap-1 overflow-x-auto py-2",children:cA.map(u=>m.jsxs("button",{onClick:()=>i(u.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${s===u.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:[m.jsx(u.icon,{className:"w-4 h-4"}),u.label]},u.id))})})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s==="teachers"&&m.jsx(eA,{}),s==="materials"&&m.jsx(rA,{}),s==="lectures"&&m.jsx(iA,{}),s==="results"&&m.jsx(lA,{})]})]})}function hA(){const n=$r(),e=n.pathname==="/admin"||n.pathname==="/admin-panel";return m.jsxs(m.Fragment,{children:[!e&&m.jsx(Mj,{}),m.jsx("main",{children:m.jsxs(lk,{children:[m.jsx(hs,{path:"/",element:m.jsx(zj,{})}),m.jsx(hs,{path:"/lectures",element:m.jsx($j,{})}),m.jsx(hs,{path:"/notes",element:m.jsx(Gj,{})}),m.jsx(hs,{path:"/teachers",element:m.jsx(Kj,{})}),m.jsx(hs,{path:"/results",element:m.jsx(Qj,{})}),m.jsx(hs,{path:"/contact",element:m.jsx(Yj,{})}),m.jsx(hs,{path:"/admin",element:m.jsx(Xj,{})}),m.jsx(hs,{path:"/admin-panel",element:m.jsx(uA,{})})]})}),!e&&m.jsx(Fj,{})]})}function dA(){return m.jsxs($4,{children:[m.jsx(Uj,{}),m.jsx(hA,{}),m.jsx(gE,{position:"top-right",toastOptions:{style:{background:"var(--card)",color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}h_.createRoot(document.getElementById("root")).render(m.jsx(ue.StrictMode,{children:m.jsx(Ak,{children:m.jsx(dA,{})})}));
